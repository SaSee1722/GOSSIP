(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83904,e=>{"use strict";var t=e.i(49982),a=e.i(77600),s=e.i(76930),r=e.i(72013),l=e.i(23995),i=e.i(18409),n=e.i(7711);let c=(0,n.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var o=e.i(68411),d=e.i(85647);let m=(0,n.default)("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);var x=e.i(47738);let h=(0,n.default)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),u=(0,n.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),p=(0,n.default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var f=e.i(23130);let b=(0,n.default)("reply",[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]]);var g=e.i(36835),w=e.i(89934),j=e.i(60564),v=e.i(76845),y=e.i(12570),N=e.i(14709),k=e.i(94018),_=e.i(60678);function S(e){let s,r,l,i,n,c,o,d,m,x,h,u,p,f,b,w,j,S,A,q,F,M,E=(0,a.c)(43),{onClose:U,onVoiceCall:P,onVideoCall:z,onBlockUser:I,isBlocked:L}=e;E[0]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)("span",{className:"text-primary font-black",children:"GOSSIP"}),E[0]=s):s=E[0],E[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsxs)("h2",{className:"text-xl font-bold tracking-tighter",children:[s," ",(0,t.jsx)("span",{className:"text-secondary font-black",children:"ACTIONS"})]}),E[1]=r):r=E[1],E[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)(v.X,{className:"w-6 h-6 text-white"}),E[2]=l):l=E[2],E[3]!==U?(i=(0,t.jsxs)("div",{className:"p-6 flex items-center justify-between border-b border-white/5",children:[r,(0,t.jsx)("button",{onClick:U,className:"p-2 hover:bg-white/5 rounded-full transition-colors",children:l})]}),E[3]=U,E[4]=i):i=E[4],E[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary group-hover:scale-110 transition-transform",children:(0,t.jsx)(y.Phone,{className:"w-5 h-5"})}),c=(0,t.jsx)("span",{className:"text-white font-bold text-[15px]",children:"Voice Call"}),E[5]=n,E[6]=c):(n=E[5],c=E[6]),E[7]!==P?(o=(0,t.jsxs)("button",{onClick:P,className:"w-full flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group",children:[n,c]}),E[7]=P,E[8]=o):o=E[8],E[9]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary group-hover:scale-110 transition-transform",children:(0,t.jsx)(N.Video,{className:"w-5 h-5"})}),m=(0,t.jsx)("span",{className:"text-white font-bold text-[15px]",children:"Video Call"}),E[9]=d,E[10]=m):(d=E[9],m=E[10]),E[11]!==z?(x=(0,t.jsxs)("button",{onClick:z,className:"w-full flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group",children:[d,m]}),E[11]=z,E[12]=x):x=E[12],E[13]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsxs)("button",{className:"w-full flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-yellow-500/10 flex items-center justify-center text-yellow-500 group-hover:scale-110 transition-transform",children:(0,t.jsx)(k.Lock,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"text-white font-bold text-[15px]",children:"Lock Chat"})]}),E[13]=h):h=E[13];let R=L?"bg-green-500/5 border-green-500/20 hover:bg-green-500/10":"bg-red-500/5 border-red-500/20 hover:bg-red-500/10";E[14]!==R?(u=(0,g.cn)("w-full flex items-center gap-4 p-4 border rounded-2xl transition-all group",R),E[14]=R,E[15]=u):u=E[15];let T=L?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500";E[16]!==T?(p=(0,g.cn)("w-10 h-10 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",T),E[16]=T,E[17]=p):p=E[17],E[18]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(_.Ban,{className:"w-5 h-5"}),E[18]=f):f=E[18],E[19]!==p?(b=(0,t.jsx)("div",{className:p,children:f}),E[19]=p,E[20]=b):b=E[20];let B=L?"text-green-500":"text-red-500";E[21]!==B?(w=(0,g.cn)("font-bold text-[15px]",B),E[21]=B,E[22]=w):w=E[22];let O=L?"Unblock User":"Block User";return E[23]!==w||E[24]!==O?(j=(0,t.jsx)("span",{className:w,children:O}),E[23]=w,E[24]=O,E[25]=j):j=E[25],E[26]!==I||E[27]!==u||E[28]!==b||E[29]!==j?(S=(0,t.jsxs)("button",{onClick:I,className:u,children:[b,j]}),E[26]=I,E[27]=u,E[28]=b,E[29]=j,E[30]=S):S=E[30],E[31]!==x||E[32]!==S||E[33]!==o?(A=(0,t.jsxs)("div",{className:"p-4 space-y-3 pb-12",children:[o,x,h,S]}),E[31]=x,E[32]=S,E[33]=o,E[34]=A):A=E[34],E[35]!==A||E[36]!==i?(q=(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-[#0A0A0A] border-t border-x border-white/10 rounded-t-[32px] sm:rounded-b-[32px] shadow-2xl overflow-hidden animate-in slide-in-from-bottom duration-300",onClick:C,children:[i,A]}),E[35]=A,E[36]=i,E[37]=q):q=E[37],E[38]!==U?(F=(0,t.jsx)("div",{className:"absolute inset-0 -z-10",onClick:U}),E[38]=U,E[39]=F):F=E[39],E[40]!==q||E[41]!==F?(M=(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-black/40 backdrop-blur-sm p-0 sm:p-4",children:[q,F]}),E[40]=q,E[41]=F,E[42]=M):M=E[42],M}function C(e){return e.stopPropagation()}var A=e.i(65044);function q({roomId:e,onClose:a,currentUserId:s}){let[n,c]=(0,r.useState)([]),[o,d]=(0,r.useState)(""),[m,x]=(0,r.useState)("ELLARUM VANGA ALWAYS WELCOME YOU"),[h,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!0),[b,g]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)(""),[k,_]=(0,r.useState)([]),[S,C]=(0,r.useState)(!1),q=(0,l.createClient)();(0,r.useEffect)(()=>{F()},[e]);let F=async()=>{let{data:t}=await q.from("rooms").select("*").eq("id",e).single();t&&(d(t.name||"Chat"),u(t.is_group));let{data:a}=await q.from("room_participants").select("role, profiles(*)").eq("room_id",e);if(a){let e=a.map(e=>({...e.profiles,role:e.role}));c(e);let t=e.find(e=>e.id===s);t&&("owner"===t.role||"admin"===t.role)&&g(!0)}f(!1)},M=async()=>{o.trim()&&await q.from("rooms").update({name:o}).eq("id",e)},E=async t=>{await q.from("room_participants").delete().eq("room_id",e).eq("user_id",t),c(e=>e.filter(e=>e.id!==t))};return p?null:w?(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-black/40 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-[#0A0A0A] border-t border-x border-white/10 rounded-t-[32px] shadow-2xl overflow-hidden animate-in slide-in-from-bottom duration-300 max-h-[80vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"p-6 flex items-center justify-between border-b border-white/5",children:[(0,t.jsx)("button",{onClick:()=>j(!1),className:"text-primary font-bold",children:"Back"}),(0,t.jsxs)("h2",{className:"text-xl font-bold tracking-tighter",children:[(0,t.jsx)("span",{className:"text-primary font-black",children:"GROUP"})," ",(0,t.jsx)("span",{className:"text-secondary font-black",children:"MEMBERS"})]}),(0,t.jsx)("button",{onClick:a,className:"p-2 hover:bg-white/5 rounded-full transition-colors",children:(0,t.jsx)(v.X,{className:"w-6 h-6 text-white"})})]}),(0,t.jsx)("div",{className:"p-4 overflow-y-auto custom-scrollbar flex-1",children:(0,t.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(i.Avatar,{src:e.avatar_url||void 0,fallback:e.username||"?",className:"w-10 h-10"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-white",children:e.full_name||e.username}),(0,t.jsx)("p",{className:"text-[10px] text-white/40 uppercase font-black",children:e.role})]})]}),b&&s!==e.id&&(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)("button",{onClick:()=>E(e.id),className:"text-red-500 text-xs font-bold",children:"REMOVE"})})]},e.id))})})]})}):(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-end justify-center bg-black/40 backdrop-blur-sm p-0 sm:p-4",children:[(0,t.jsxs)("div",{className:"w-full max-w-2xl bg-[#0A0A0A] border-t border-x border-white/10 rounded-t-[32px] sm:rounded-b-[32px] shadow-2xl overflow-hidden animate-in slide-in-from-bottom duration-300",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"p-6 flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold tracking-tighter",children:[(0,t.jsx)("span",{className:"text-primary font-black",children:"GROUP"})," ",(0,t.jsx)("span",{className:"text-secondary font-black",children:"SETTINGS"})]}),(0,t.jsx)("button",{onClick:a,className:"p-1 px-[3px] border-2 border-primary rounded-md text-primary hover:bg-primary/10 transition-colors",children:(0,t.jsx)(v.X,{className:"w-4 h-4 text-primary",strokeWidth:4})})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center p-6 pt-0 space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)(i.Avatar,{src:n[0]?.avatar_url,fallback:o[0],className:"w-[100px] h-[100px] rounded-full border-4 border-white/5"}),(0,t.jsx)("span",{className:"text-[11px] font-black text-white/40 uppercase tracking-widest",children:"Group Avatar"})]}),(0,t.jsxs)("div",{className:"w-full space-y-6 pb-12",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[11px] font-black text-white/40 uppercase tracking-[0.2em] ml-2",children:"Group Name"}),(0,t.jsx)("div",{className:"p-4 bg-[#0A0A0A] border border-white/10 rounded-2xl",children:(0,t.jsx)("input",{value:o,onChange:e=>d(e.target.value),onBlur:M,className:"w-full bg-transparent border-none outline-none text-white font-bold"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[11px] font-black text-white/40 uppercase tracking-[0.2em] ml-2",children:"Description"}),(0,t.jsx)("div",{className:"p-4 bg-[#0A0A0A] border border-white/10 rounded-2xl min-h-[80px]",children:(0,t.jsx)("textarea",{value:m,onChange:e=>x(e.target.value),className:"w-full bg-transparent border-none outline-none text-white font-bold resize-none h-full"})})]}),(0,t.jsxs)("button",{onClick:()=>j(!0),className:"w-full flex items-center gap-4 p-4 bg-[#0A0A0A] border border-white/10 rounded-2xl hover:bg-white/5 transition-all group",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary group-hover:scale-110 transition-transform",children:(0,t.jsx)(A.Users,{className:"w-5 h-5"})}),(0,t.jsx)("span",{className:"text-white font-bold text-[15px]",children:"View Members"})]})]})]})]}),(0,t.jsx)("div",{className:"absolute inset-0 -z-10",onClick:a})]})}function F({roomId:e,user:a}){let[n,v]=(0,r.useState)([]),[y,N]=(0,r.useState)(""),[k,_]=(0,r.useState)(null),[C,A]=(0,r.useState)(!1),[F,M]=(0,r.useState)(!1),[E,U]=(0,r.useState)(!1),[P,z]=(0,r.useState)(!1),[I,L]=(0,r.useState)(null),[R,T]=(0,r.useState)(null),[B,O]=(0,r.useState)(!1),[$,G]=(0,r.useState)(!0),[V,D]=(0,r.useState)("Chat Room"),[H,W]=(0,r.useState)(void 0),[X,Y]=(0,r.useState)(void 0),K=(0,r.useRef)(null),J=(0,r.useRef)([]),Q=(0,r.useRef)(null),Z=(0,r.useRef)(null),ee=(0,l.createClient)(),et=(0,s.useRouter)(),{startCall:ea}=(0,j.useCall)(),{addToast:es}=(0,w.useToast)();(0,r.useEffect)(()=>{(async()=>{G(!0);let{data:t}=await ee.from("rooms").select("*, room_participants(user_id, profiles(username, full_name, avatar_url, gender))").eq("id",e).single();if(_(t),t)if(!1===t.is_group&&t.room_participants){let e=t.room_participants.find(e=>e.user_id!==a.id);if(e&&e.profiles){D((e.profiles.full_name||e.profiles.username||"Unknown User").toUpperCase()),W(e.profiles.avatar_url),Y(e.profiles.gender);let{data:t}=await ee.from("blocked_users").select("*").eq("blocker_id",a.id).eq("blocked_id",e.user_id).maybeSingle();O(!!t)}}else D(`${(t.name||"Group Chat").toUpperCase()}...ðŸ’–`);let{data:s}=await ee.from("messages").select("*, profiles(username, avatar_url, gender), reply_item: messages!reply_to(content, message_type, profiles(username))").eq("room_id",e).order("created_at",{ascending:!0});s&&v(s),G(!1)})();let t=ee.channel(`room:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`room_id=eq.${e}`},async e=>{let{data:t}=await ee.from("messages").select("*, profiles(username, avatar_url, gender), reply_item: messages!reply_to(content, message_type, profiles(username))").eq("id",e.new.id).single();t&&v(e=>[...e,t])}).subscribe();return()=>{ee.removeChannel(t)}},[e,a.id,ee]),(0,r.useEffect)(()=>{Q.current&&(Q.current.scrollTop=Q.current.scrollHeight);let e=n.filter(e=>e.user_id!==a.id&&!e.read_at).map(e=>e.id);e.length>0&&ee.from("messages").update({read_at:new Date().toISOString()}).in("id",e).then(()=>{})},[n,a.id,ee]);let er=e=>{switch(e?.toLowerCase()){case"male":return"#00BFFF";case"female":return"#FFB6C1";case"other":return"#FFD700";default:return"#FFF"}},el=async(t,s="text",r,l)=>{if(t&&t.preventDefault(),B)return;let i="text"===s?y:null;if("text"===s&&!i?.trim())return;i||"text"===s||(i="image"===s?"ðŸ“· Image":"video"===s?"ðŸ“¹ Video":"audio"===s?"ðŸŽ¤ Voice Note":"ðŸ“Ž Attachment");let{error:n}=await ee.from("messages").insert({room_id:e,user_id:a.id,content:i,message_type:s,media_url:r,media_meta:l,reply_to:R?.id,status:"sent",is_deleted:!1});n||("text"===s&&N(""),T(null),await ee.from("rooms").update({updated_at:new Date().toISOString()}).eq("id",e))},ei=async e=>{let{error:t}=await ee.from("messages").update({content:"ðŸš« Message deleted",is_deleted:!0,media_url:null,media_meta:null}).eq("id",e);t&&es("Failed to delete message","error")},en=async()=>{if(!B)try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);K.current=t,J.current=[],t.ondataavailable=e=>{e.data.size>0&&J.current.push(e.data)},t.onstop=()=>{let t=new Blob(J.current,{type:"audio/webm"});L(t),e.getTracks().forEach(e=>e.stop())},t.start(),z(!0)}catch(e){console.error("Error accessing microphone:",e),es("Could not access microphone","error")}},ec=async()=>{if(!k||k.is_group)return;let e=k.room_participants?.find(e=>e.user_id!==a?.id);if(e)try{B?(await ee.from("blocked_users").delete().eq("blocker_id",a?.id).eq("blocked_id",e.user_id),O(!1),es("User unblocked","success")):(await ee.from("blocked_users").insert({blocker_id:a?.id,blocked_id:e.user_id}),O(!0),es("User blocked","error"),et.push("/chat"))}catch(e){es("Action failed","error")}};return $?(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center bg-black",children:[(0,t.jsx)(f.Loader2,{className:"w-10 h-10 text-primary animate-spin"}),(0,t.jsx)("p",{className:"mt-4 text-white/50 font-bold tracking-widest uppercase text-[10px]",children:"Establishing Secure Line..."})]}):(0,t.jsxs)("div",{className:"flex flex-col h-full bg-black relative",children:[(0,t.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[120px] pointer-events-none"}),(0,t.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between bg-black/80 backdrop-blur-xl border-b border-white/5 z-20",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>et.push("/chat"),className:"p-2 -ml-2 hover:bg-white/5 rounded-xl text-white/30 hover:text-white transition-all",children:(0,t.jsx)(c,{className:"w-6 h-6",strokeWidth:3})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-11 h-11 rounded-2xl p-0.5 bg-gradient-to-br from-primary/30 to-secondary/30",children:(0,t.jsx)(i.Avatar,{src:H,fallback:V[0]||"?",className:"w-full h-full rounded-[14px]"})}),(0,t.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-online border-[3px] border-black rounded-full shadow-lg shadow-online/20"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-[17px] font-black tracking-tight",style:{color:er(X)},children:V}),k?.is_group?(0,t.jsxs)("p",{className:"text-[11px] font-black text-online uppercase tracking-widest mt-0.5",children:[k.room_participants?.length||0," online â€¢ ",k.room_participants?.length||0," members"]}):(0,t.jsx)("p",{className:"text-[11px] font-black text-online uppercase tracking-widest mt-0.5",children:"Online"})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)("button",{onClick:()=>{k?.is_group?U(!0):M(!0)},className:"p-2.5 hover:bg-white/5 rounded-xl text-white/40 hover:text-white transition-all",children:(0,t.jsx)(p,{className:"w-6 h-6",strokeWidth:2.5})})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar relative z-10",ref:Q,children:[(0,t.jsx)("div",{className:"flex justify-center mb-8",children:(0,t.jsx)("div",{className:"px-4 py-1 rounded-full bg-white/5 border border-white/10",children:(0,t.jsx)("span",{className:"text-[10px] font-black text-white/30 uppercase tracking-[0.2em]",children:"Today"})})}),n.map((e,s)=>{let r=e.user_id===a.id,l=n[s-1],c=l?.user_id===e.user_id;return(0,t.jsxs)("div",{className:(0,g.cn)("flex flex-col",r?"items-end":"items-start"),children:[!r&&!c&&(0,t.jsx)("span",{className:"text-[10px] font-black text-white/20 mb-1.5 ml-14 uppercase tracking-wider",style:{color:er(e.profiles?.gender)},children:e.profiles?.username}),(0,t.jsxs)("div",{className:(0,g.cn)("flex items-end gap-3 max-w-[85%]",r&&"flex-row-reverse"),children:[!r&&(0,t.jsx)("div",{className:"w-8 h-8 rounded-xl overflow-hidden ring-1 ring-white/10 flex-shrink-0",children:c?(0,t.jsx)("div",{className:"w-full h-full"}):(0,t.jsx)(i.Avatar,{src:e.profiles?.avatar_url||"",fallback:e.profiles?.username?.[0]||"?",className:"w-full h-full"})}),(0,t.jsxs)("div",{className:(0,g.cn)("px-4 py-2.5 relative group transition-all",r?"bg-primary text-black rounded-[18px] rounded-br-[4px]":"bg-[#1A1A1A] text-white rounded-[18px] rounded-bl-[4px]"),children:[(0,t.jsxs)("div",{className:(0,g.cn)("absolute -top-8 px-2 py-1 bg-black/60 backdrop-blur-md rounded-xl border border-white/10 flex gap-2 opacity-0 group-hover:opacity-100 transition-all z-20",r?"right-0":"left-0"),children:[(0,t.jsx)("button",{onClick:()=>T(e),className:"text-white/60 hover:text-primary transition-colors",children:(0,t.jsx)(b,{size:14})}),r&&!e.is_deleted&&(0,t.jsx)("button",{onClick:()=>ei(e.id),className:"text-white/60 hover:text-secondary transition-colors",children:(0,t.jsx)(u,{size:14})})]}),e.is_deleted?(0,t.jsx)("p",{className:"italic text-[13px] opacity-40 font-medium tracking-tight",children:"ðŸš« Ghost message deleted"}):(0,t.jsxs)(t.Fragment,{children:[e.reply_item&&(0,t.jsxs)("div",{className:(0,g.cn)("mb-2 p-2 rounded-xl flex flex-col gap-0.5 border-l-4",r?"bg-black/5 border-black/20":"bg-white/5 border-primary/40"),children:[(0,t.jsx)("span",{className:(0,g.cn)("text-[9px] font-black uppercase tracking-widest",r?"text-black/50":"text-primary/70"),children:e.reply_item.profiles?.username||"GOSSIPER"}),(0,t.jsx)("p",{className:(0,g.cn)("text-[11px] font-bold truncate italic opacity-60",r?"text-black":"text-white"),children:"text"===e.reply_item.message_type?e.reply_item.content:`[MEDIA ${e.reply_item.message_type.toUpperCase()}]`})]}),"text"===e.message_type&&(0,t.jsx)("p",{className:"text-[15px] font-medium leading-relaxed tracking-tight",children:e.content}),"image"===e.message_type&&(0,t.jsx)("div",{className:"rounded-2xl overflow-hidden my-1 border border-white/10",children:(0,t.jsx)("img",{src:e.media_url||"",alt:"",className:"max-w-full max-h-[400px] w-auto h-auto object-cover"})})]}),(0,t.jsxs)("div",{className:(0,g.cn)("flex items-center gap-1.5 mt-1.5",r?"justify-end":"justify-start"),children:[(0,t.jsx)("span",{className:(0,g.cn)("text-[10px] font-black uppercase tracking-widest",r?"text-black/40":"text-white/20"),children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),r&&(e.read_at?(0,t.jsx)(h,{size:12,className:"text-black/60"}):(0,t.jsx)(x.Check,{size:12,className:"text-black/40"}))]})]})]})]},e.id)}),C&&(0,t.jsx)("div",{className:"flex justify-end pr-4",children:(0,t.jsxs)("div",{className:"bg-primary/20 p-2 rounded-xl flex items-center gap-2 border border-primary/20",children:[(0,t.jsx)(f.Loader2,{className:"w-4 h-4 animate-spin text-primary"}),(0,t.jsx)("span",{className:"text-[11px] font-black text-primary uppercase tracking-widest",children:"Transmitting..."})]})})]}),(0,t.jsx)("form",{onSubmit:e=>el(e,"text"),className:"p-4 bg-black",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex-1 flex items-center bg-[#1A1A1A] rounded-[28px] px-4 py-1 border border-white/5",children:[(0,t.jsx)("button",{type:"button",className:"p-2 text-white/40 hover:text-white",children:(0,t.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("path",{d:"M8 14s1.5 2 4 2 4-2 4-2"}),(0,t.jsx)("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),(0,t.jsx)("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})]})}),(0,t.jsx)("input",{value:y,onChange:e=>N(e.target.value),placeholder:"Message...",className:"flex-1 bg-transparent border-none outline-none px-2 text-[15px] text-white placeholder:text-white/20 h-11"}),(0,t.jsx)("button",{type:"button",onClick:()=>Z.current?.click(),className:"p-2 text-white/40 hover:text-white",children:(0,t.jsx)(m,{className:"w-5 h-5"})})]}),(0,t.jsx)("button",{type:y.trim()?"submit":"button",onClick:y.trim()?void 0:P?()=>{K.current&&P&&(K.current.stop(),z(!1))}:en,className:(0,g.cn)("w-12 h-12 rounded-full flex items-center justify-center transition-all",y.trim()?"bg-primary text-black":"bg-[#1A1A1A] text-white/60"),children:y.trim()?(0,t.jsx)(d.Send,{className:"w-5 h-5 ml-0.5"}):(0,t.jsx)(o.Mic,{className:(0,g.cn)("w-5 h-5",P&&"text-red-500 animate-pulse")})})]})}),E&&(0,t.jsx)(q,{roomId:e,onClose:()=>U(!1),currentUserId:a.id}),F&&(0,t.jsx)(S,{onClose:()=>M(!1),onVoiceCall:()=>{M(!1),ea(e,!1)},onVideoCall:()=>{M(!1),ea(e,!0)},onBlockUser:()=>{M(!1),ec()},isBlocked:B,isGroup:!1})]})}var M=e.i(26817),E=e.i(94331),U=e.i(48966),P=e.i(42230);let z=(0,n.default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function I(e){let s,n,c,o,d,m,h,u,p,f,b=(0,a.c)(19),{onClose:j,currentUserId:y}=e,[N,k]=(0,r.useState)("");b[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],b[0]=s):s=b[0];let[_,S]=(0,r.useState)(s),[C,A]=(0,r.useState)(!1);b[1]===Symbol.for("react.memo_cache_sentinel")?(n=new Set,b[1]=n):n=b[1];let[q,F]=(0,r.useState)(n),M=(0,l.createClient)(),{addToast:E}=(0,w.useToast)(),U=async()=>{if(!N.trim())return;A(!0);let{data:e}=await M.from("profiles").select("*").or(`username.ilike.%${N}%,full_name.ilike.%${N}%`).neq("id",y).limit(10);e&&S(e),A(!1)},I=async e=>{F(t=>new Set(t).add(e));let{data:t,error:a}=await M.from("connections").select("*").or(`and(requester_id.eq.${y},addressee_id.eq.${e}),and(requester_id.eq.${e},addressee_id.eq.${y})`).maybeSingle();if(a)return void console.error("Error checking connection:",a);let s=null;if(t)if("rejected"===t.status){let{error:a}=await M.from("connections").update({status:"pending",requester_id:y,addressee_id:e}).eq("id",t.id);s=a}else console.log("Connection already exists or is pending.");else{let{error:t}=await M.from("connections").insert({requester_id:y,addressee_id:e});s=t}s?(console.error("Failed to send request",s),F(t=>{let a=new Set(t);return a.delete(e),a}),E("Failed to send request: "+s.message,"error")):E("Request sent!","success")};b[2]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)("h2",{className:"text-lg font-bold text-white",children:"Find People"}),b[2]=c):c=b[2],b[3]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)(v.X,{className:"w-5 h-5 text-white/70"}),b[3]=o):o=b[3],b[4]!==j?(d=(0,t.jsxs)("div",{className:"p-4 border-b border-white/5 flex items-center justify-between",children:[c,(0,t.jsx)("button",{onClick:j,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:o})]}),b[4]=j,b[5]=d):d=b[5],b[6]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)(P.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/50"}),b[6]=m):m=b[6],b[7]===Symbol.for("react.memo_cache_sentinel")?(h=e=>k(e.target.value),b[7]=h):h=b[7];let L=C?"...":"Search";b[8]!==U||b[9]!==C||b[10]!==L?(u=(0,t.jsx)("button",{onClick:U,disabled:C,className:"px-4 py-2 bg-primary text-primary-foreground font-medium rounded-xl hover:bg-primary/90 transition-colors disabled:opacity-50",children:L}),b[8]=U,b[9]=C,b[10]=L,b[11]=u):u=b[11],b[12]!==C||b[13]!==N||b[14]!==_.length?(p=0===_.length&&!C&&N&&(0,t.jsx)("p",{className:"text-center text-white/30 py-4",children:"No users found."}),b[12]=C,b[13]=N,b[14]=_.length,b[15]=p):p=b[15];let R=_.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 border border-transparent hover:border-white/5 transition-all",children:[(0,t.jsx)(i.Avatar,{src:e.avatar_url||void 0,fallback:e.username||e.full_name||"?"}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,t.jsx)("p",{className:"font-semibold text-white truncate",children:e.full_name||e.username||"Unknown"}),(0,t.jsxs)("p",{className:"text-xs text-white/50 truncate",children:["@",e.username]})]}),(0,t.jsx)("button",{onClick:()=>I(e.id),disabled:q.has(e.id),className:(0,g.cn)("p-2 rounded-full transition-all",q.has(e.id)?"bg-green-500/20 text-green-400":"bg-primary/10 text-primary hover:bg-primary/20"),children:q.has(e.id)?(0,t.jsx)(x.Check,{className:"w-4 h-4"}):(0,t.jsx)(z,{className:"w-4 h-4"})})]},e.id));return b[16]!==p||b[17]!==R?(f=(0,t.jsxs)("div",{className:"space-y-2 max-h-[300px] overflow-y-auto custom-scrollbar",children:[p,R]}),b[16]=p,b[17]=R,b[18]=f):f=b[18],(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-[#1e1e24] border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[d,(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[m,(0,t.jsx)("input",{type:"text",placeholder:"Search by username...",className:"w-full bg-white/5 border border-white/10 rounded-xl py-2 pl-9 pr-4 text-white placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all",value:N,onChange:h,onKeyDown:e=>"Enter"===e.key&&U()})]}),u]}),f]})]})})}let L=(0,n.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);function R({onClose:e,currentUserId:a}){let[n,c]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),m=(0,l.createClient)(),h=(0,s.useRouter)();(0,r.useEffect)(()=>{u()},[]);let u=async()=>{let{data:e,error:t}=await m.from("connections").select("*, requester:profiles!requester_id(*)").eq("addressee_id",a).eq("status","pending");e&&c(e),d(!1)},p=async(e,t)=>{let{error:a}=await m.from("connections").update({status:t}).eq("id",e);if(!a&&(c(t=>t.filter(t=>t.id!==e)),"accepted"===t)){let t=n.find(t=>t.id===e);t&&await f(t.requester_id)}},f=async t=>{d(!0);let{data:s,error:r}=await m.from("rooms").insert({is_group:!1,name:"Direct Message"}).select().single();s?(await m.from("room_participants").insert([{room_id:s.id,user_id:a},{room_id:s.id,user_id:t}]),e(),h.push(`/chat?roomId=${s.id}`)):(console.error("Failed to create room",r),d(!1))};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-[#1e1e24] border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-white/5 flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,t.jsx)(L,{className:"w-5 h-5 text-primary"}),"Connection Requests"]}),(0,t.jsx)("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:(0,t.jsx)(v.X,{className:"w-5 h-5 text-white/70"})})]}),(0,t.jsxs)("div",{className:"p-4 space-y-2 max-h-[400px] overflow-y-auto custom-scrollbar",children:[o&&(0,t.jsx)("p",{className:"text-center text-white/30 py-4",children:"Loading..."}),!o&&0===n.length&&(0,t.jsxs)("div",{className:"text-center text-white/30 py-8 flex flex-col items-center gap-2",children:[(0,t.jsx)(L,{className:"w-10 h-10 opacity-20"}),(0,t.jsx)("p",{children:"No pending requests."})]}),n.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5",children:[(0,t.jsx)(i.Avatar,{src:e.requester?.avatar_url||void 0,fallback:e.requester?.username||"?"}),(0,t.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,t.jsx)("p",{className:"font-semibold text-white truncate",children:e.requester?.full_name||e.requester?.username||"Unknown User"}),(0,t.jsx)("p",{className:"text-xs text-white/50 truncate",children:"wants to connect"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{onClick:()=>p(e.id,"accepted"),className:"p-2 bg-green-500/20 text-green-400 hover:bg-green-500/30 rounded-full transition-colors",title:"Accept",children:(0,t.jsx)(x.Check,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>p(e.id,"rejected"),className:"p-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 rounded-full transition-colors",title:"Reject",children:(0,t.jsx)(v.X,{className:"w-4 h-4"})})]})]},e.id))]})]})})}var T=e.i(24982),B=e.i(98505);let O=(0,n.default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),$=(0,n.default)("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var G=e.i(90047);let V=(0,n.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),D=(0,n.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),H=(0,n.default)("languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);var W=e.i(81495),X=e.i(90283),Y=e.i(5036),K=e.i(66635),J=e.i(61480),Q=e.i(4476);let Z={English:{profile:"Profile",personalInfo:"PERSONAL INFO",settings:"SETTINGS",notifications:"Notifications",language:"Language",logout:"Logout",fullName:"Full Name",username:"Username",age:"Age",phone:"Phone",bio:"Bio",edit:"Edit",save:"Save Changes",cancel:"Cancel",gender:"Gender",male:"Male",female:"Female",other:"Other"},Tamil:{profile:"à®šà¯à®¯à®µà®¿à®µà®°à®®à¯",personalInfo:"à®¤à®©à®¿à®ªà¯à®ªà®Ÿà¯à®Ÿ à®¤à®•à®µà®²à¯",settings:"à®…à®®à¯ˆà®ªà¯à®ªà¯à®•à®³à¯",notifications:"à®…à®±à®¿à®µà®¿à®ªà¯à®ªà¯à®•à®³à¯",language:"à®®à¯Šà®´à®¿",logout:"à®µà¯†à®³à®¿à®¯à¯‡à®±à¯",fullName:"à®®à¯à®´à¯ à®ªà¯†à®¯à®°à¯",username:"à®ªà®¯à®©à®°à¯à®ªà¯†à®¯à®°à¯",age:"à®µà®¯à®¤à¯",phone:"à®¤à¯Šà®²à¯ˆà®ªà¯‡à®šà®¿",bio:"à®šà¯à®¯à®šà®°à®¿à®¤à¯ˆ",edit:"à®¤à¯Šà®•à¯",save:"à®®à®¾à®±à¯à®±à®™à¯à®•à®³à¯ˆ à®šà¯‡à®®à®¿",cancel:"à®°à®¤à¯à®¤à¯à®šà¯†à®¯à¯",gender:"à®ªà®¾à®²à®¿à®©à®®à¯",male:"à®†à®£à¯",female:"à®ªà¯†à®£à¯",other:"à®®à®±à¯à®±à®µà¯ˆ"}};function ee(e){let s,n,c,o,d,m,x,h,u,p,b,g,j,y,N,k,_,S,C,A,q,F,M,E,U,P,z,I,L,R,ee,et,ea,es,er,el,ei,en,ec=(0,a.c)(90),{onClose:eo,user:ed}=e,[,em]=(0,r.useState)(!1),[ex,eh]=(0,r.useState)("English"),[eu,ep]=(0,r.useState)(null);ec[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],ec[0]=s):s=ec[0];let[ef,eb]=(0,r.useState)(s),[eg,ew]=(0,r.useState)(!0),[ej,ev]=(0,r.useState)(!1),[ey,eN]=(0,r.useState)(!0),[ek,e_]=(0,r.useState)("info"),eS=(0,r.useRef)(null);ec[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.createClient)(),ec[1]=n):n=ec[1];let eC=n,{addToast:eA}=(0,w.useToast)(),{logout:eq}=(0,K.useAuth)(),eF=Z[ex];ec[2]===Symbol.for("react.memo_cache_sentinel")?(c={full_name:"",username:"",age:"",phone:"",bio:"",gender:""},ec[2]=c):c=ec[2];let[eM,eE]=(0,r.useState)(c);ec[3]!==ed.id?(o=()=>{(async()=>{ew(!0);let{data:e}=await J.ProfileService.getProfile(ed.id);e&&(ep(e),eE({full_name:e.full_name||"",username:e.username||"",age:e.age?.toString()||"",phone:e.phone||"",bio:e.bio||"",gender:e.gender||""}));let{data:t}=await eC.from("blocked_users").select("*, blocked:profiles!blocked_id(*)").eq("blocker_id",ed.id);t&&eb(t),ew(!1)})()},d=[ed.id,eC],ec[3]=ed.id,ec[4]=o,ec[5]=d):(o=ec[4],d=ec[5]),(0,r.useEffect)(o,d),ec[6]!==eA||ec[7]!==eM||ec[8]!==ed.id?(m=async()=>{ev(!0);let{error:e}=await J.ProfileService.updateProfile(ed.id,{...eM,age:parseInt(eM.age)||void 0});e?eA(e,"error"):(eA("Profile updated","success"),em(!1),ep(e=>e?{...e,...eM,age:parseInt(eM.age)||void 0}:null)),ev(!1)},ec[6]=eA,ec[7]=eM,ec[8]=ed.id,ec[9]=m):m=ec[9];let eU=m;ec[10]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{eS.current?.click()},ec[10]=x):x=ec[10];let eP=x;ec[11]!==eA||ec[12]!==ed.id?(h=async e=>{let t=e.target.files?.[0];if(!t)return;ev(!0);let{data:a,error:s}=await J.ProfileService.uploadAvatar(ed.id,t);a?(await J.ProfileService.updateProfile(ed.id,{avatar_url:a}),ep(e=>e?{...e,avatar_url:a}:null),eA("Avatar updated","success")):s&&eA(s,"error"),ev(!1)},ec[11]=eA,ec[12]=ed.id,ec[13]=h):h=ec[13];let ez=h;ec[14]!==eA?(u=async e=>{let{error:t}=await eC.from("blocked_users").delete().eq("id",e);t||(eb(t=>t.filter(t=>t.id!==e)),eA("User unblocked","success"))},ec[14]=eA,ec[15]=u):u=ec[15];let eI=u;ec[16]!==eM.gender?(p=()=>{switch(eM.gender?.toLowerCase()){case"male":return"from-[#00BFFF] to-transparent";case"female":return"from-[#FFB6C1] to-transparent";case"other":return"from-[#FFD700] to-transparent";default:return"from-primary/20 to-transparent"}},ec[16]=eM.gender,ec[17]=p):p=ec[17];let eL=p,eR=`absolute top-0 left-0 right-0 h-64 bg-gradient-to-b ${eL()} opacity-20 pointer-events-none transition-all duration-500`;ec[18]!==eR?(b=(0,t.jsx)("div",{className:eR}),ec[18]=eR,ec[19]=b):b=ec[19],ec[20]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsx)("div",{className:"p-3 rounded-2xl bg-white/5 border border-white/10",children:(0,t.jsx)(T.Shield,{className:"w-6 h-6 text-primary"})}),ec[20]=g):g=ec[20],ec[21]===Symbol.for("react.memo_cache_sentinel")?(j=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[g,(0,t.jsxs)("h2",{className:"text-2xl font-black text-white italic uppercase tracking-tight",children:["Identity ",(0,t.jsx)("span",{className:"text-primary",children:"&"})," Settings"]})]}),ec[21]=j):j=ec[21],ec[22]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)(v.X,{className:"w-6 h-6"}),ec[22]=y):y=ec[22],ec[23]!==eo?(N=(0,t.jsxs)("div",{className:"p-8 pb-4 flex items-center justify-between relative z-10",children:[j,(0,t.jsx)("button",{onClick:eo,className:"p-3 bg-white/5 hover:bg-white/10 rounded-2xl text-white/40 hover:text-white transition-all shadow-lg",children:y})]}),ec[23]=eo,ec[24]=N):N=ec[24],ec[25]===Symbol.for("react.memo_cache_sentinel")?(k=()=>e_("info"),ec[25]=k):k=ec[25];let eT=`flex items-center gap-3 p-4 rounded-2xl transition-all border ${"info"===ek?"bg-primary/10 border-primary/20 text-primary shadow-lg shadow-primary/5":"bg-white/5 border-white/5 text-white/40 hover:text-white hover:bg-white/10"}`;ec[26]===Symbol.for("react.memo_cache_sentinel")?(_=(0,t.jsx)(V,{className:"w-5 h-5"}),S=(0,t.jsx)("span",{className:"font-black text-[10px] uppercase tracking-[0.2em]",children:"Profile"}),ec[26]=_,ec[27]=S):(_=ec[26],S=ec[27]),ec[28]!==eT?(C=(0,t.jsxs)("button",{onClick:k,className:eT,children:[_,S]}),ec[28]=eT,ec[29]=C):C=ec[29],ec[30]===Symbol.for("react.memo_cache_sentinel")?(A=()=>e_("settings"),ec[30]=A):A=ec[30];let eB=`flex items-center gap-3 p-4 rounded-2xl transition-all border ${"settings"===ek?"bg-primary/10 border-primary/20 text-primary shadow-lg shadow-primary/5":"bg-white/5 border-white/5 text-white/40 hover:text-white hover:bg-white/10"}`;ec[31]===Symbol.for("react.memo_cache_sentinel")?(q=(0,t.jsx)(H,{className:"w-5 h-5"}),F=(0,t.jsx)("span",{className:"font-black text-[10px] uppercase tracking-[0.2em]",children:"Options"}),ec[31]=q,ec[32]=F):(q=ec[31],F=ec[32]),ec[33]!==eB?(M=(0,t.jsxs)("button",{onClick:A,className:eB,children:[q,F]}),ec[33]=eB,ec[34]=M):M=ec[34],ec[35]===Symbol.for("react.memo_cache_sentinel")?(E=()=>e_("blocked"),ec[35]=E):E=ec[35];let eO=`flex items-center gap-3 p-4 rounded-2xl transition-all border ${"blocked"===ek?"bg-secondary/10 border-secondary/20 text-secondary shadow-lg shadow-secondary/5":"bg-white/5 border-white/5 text-white/40 hover:text-white hover:bg-white/10"}`;return ec[36]===Symbol.for("react.memo_cache_sentinel")?(U=(0,t.jsx)(O,{className:"w-5 h-5"}),P=(0,t.jsx)("span",{className:"font-black text-[10px] uppercase tracking-[0.2em]",children:"Ghosts"}),ec[36]=U,ec[37]=P):(U=ec[36],P=ec[37]),ec[38]!==eO?(z=(0,t.jsxs)("button",{onClick:E,className:eO,children:[U,P]}),ec[38]=eO,ec[39]=z):z=ec[39],ec[40]===Symbol.for("react.memo_cache_sentinel")?(I=(0,t.jsx)(X.LogOut,{className:"w-4 h-4"}),ec[40]=I):I=ec[40],ec[41]!==eq||ec[42]!==eF.logout?(L=(0,t.jsxs)("button",{onClick:eq,className:"w-full flex items-center justify-center gap-2 p-4 rounded-2xl bg-secondary opacity-80 hover:opacity-100 transition-all text-black font-black uppercase text-[10px] tracking-widest shadow-lg shadow-secondary/10",children:[I,eF.logout]}),ec[41]=eq,ec[42]=eF.logout,ec[43]=L):L=ec[43],ec[44]===Symbol.for("react.memo_cache_sentinel")?(R=(0,t.jsx)("p",{className:"text-center text-[9px] font-black text-white/20 mt-4 tracking-[0.3em] uppercase",children:"GOSSIP v1.2.0 â€¢ Web"}),ec[44]=R):R=ec[44],ec[45]!==L?(ee=(0,t.jsxs)("div",{className:"mt-auto pt-8",children:[L,R]}),ec[45]=L,ec[46]=ee):ee=ec[46],ec[47]!==C||ec[48]!==M||ec[49]!==z||ec[50]!==ee?(et=(0,t.jsxs)("div",{className:"flex flex-col gap-4 md:w-48",children:[C,M,z,ee]}),ec[47]=C,ec[48]=M,ec[49]=z,ec[50]=ee,ec[51]=et):et=ec[51],ec[52]!==ek||ec[53]!==eM.age||ec[54]!==eM.bio||ec[55]!==eM.full_name||ec[56]!==eM.gender||ec[57]!==eM.username||ec[58]!==eL||ec[59]!==ez||ec[60]!==eU||ec[61]!==eu?.avatar_url||ec[62]!==eu?.full_name||ec[63]!==eu?.username||ec[64]!==ej||ec[65]!==eF||ec[66]!==ed.user_metadata?.avatar_url?(ea="info"===ek&&(0,t.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("div",{className:"w-32 h-32 rounded-[40px] p-1 bg-gradient-to-br from-primary via-white/10 to-secondary shadow-2xl relative overflow-hidden",children:[(0,t.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br ${eL()} opacity-40 blur-xl group-hover:opacity-60 transition-opacity`}),(0,t.jsx)(i.Avatar,{src:eu?.avatar_url||ed.user_metadata?.avatar_url,fallback:eu?.username?.[0]||"?",className:"w-full h-full rounded-[36px] relative z-10"})]}),(0,t.jsx)("button",{onClick:eP,className:"absolute -bottom-2 -right-2 p-3 bg-primary text-black rounded-2xl shadow-xl hover:scale-110 transition-transform z-20 border-4 border-black",disabled:ej,children:(0,t.jsx)(G.Camera,{className:"w-4 h-4"})}),(0,t.jsx)("input",{type:"file",ref:eS,className:"hidden",onChange:ez,accept:"image/*"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(Q.GradientText,{text:eu?.full_name||"NEW GOSSIPER",className:"text-3xl font-black italic uppercase tracking-tighter"}),(0,t.jsxs)("p",{className:"text-white/30 text-[10px] font-black tracking-[0.3em] uppercase mt-1",children:["@",eu?.username||"unknown"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4",children:eF.fullName}),(0,t.jsx)("input",{value:eM.full_name,onChange:e=>eE(t=>({...t,full_name:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-white font-bold focus:border-primary/50 transition-all outline-none",placeholder:"Enter full name"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4",children:eF.username}),(0,t.jsx)("input",{value:eM.username,onChange:e=>eE(t=>({...t,username:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-white font-bold focus:border-primary/50 transition-all outline-none",placeholder:"username"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4",children:eF.gender}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["Male","Female","Other"].map(e=>(0,t.jsx)("button",{onClick:()=>eE(t=>({...t,gender:e})),className:`p-4 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all border ${eM.gender===e?"bg-primary text-black border-primary":"bg-white/5 text-white/30 border-white/5 hover:border-white/10"}`,children:eF[e.toLowerCase()]},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4",children:eF.age}),(0,t.jsx)("input",{value:eM.age,onChange:e=>eE(t=>({...t,age:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-white font-bold focus:border-primary/50 transition-all outline-none",placeholder:"25",type:"number"})]}),(0,t.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,t.jsx)("label",{className:"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4",children:eF.bio}),(0,t.jsx)("textarea",{value:eM.bio,onChange:e=>eE(t=>({...t,bio:e.target.value})),className:"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-white font-bold focus:border-primary/50 transition-all outline-none h-24 resize-none",placeholder:"Tell Your Story..."})]})]}),(0,t.jsxs)("button",{onClick:eU,disabled:ej,className:"w-full py-5 bg-gradient-to-r from-primary to-primary-dark text-black font-black uppercase italic tracking-[0.2em] rounded-2xl shadow-xl shadow-primary/10 hover:scale-[1.02] transition-all flex items-center justify-center gap-3 active:scale-95",children:[ej?(0,t.jsx)(f.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(D,{className:"w-5 h-5"}),eF.save]})]}),ec[52]=ek,ec[53]=eM.age,ec[54]=eM.bio,ec[55]=eM.full_name,ec[56]=eM.gender,ec[57]=eM.username,ec[58]=eL,ec[59]=ez,ec[60]=eU,ec[61]=eu?.avatar_url,ec[62]=eu?.full_name,ec[63]=eu?.username,ec[64]=ej,ec[65]=eF,ec[66]=ed.user_metadata?.avatar_url,ec[67]=ea):ea=ec[67],ec[68]!==ek||ec[69]!==ex||ec[70]!==ey||ec[71]!==eF.language||ec[72]!==eF.notifications?(es="settings"===ek&&(0,t.jsxs)("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-500",children:[(0,t.jsxs)("div",{className:"p-6 rounded-3xl bg-white/5 border border-white/10 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-primary/10 rounded-2xl",children:(0,t.jsx)(W.Bell,{className:"w-5 h-5 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-black uppercase text-white tracking-widest",children:eF.notifications}),(0,t.jsx)("p",{className:"text-[9px] font-bold text-white/30 uppercase tracking-widest",children:"Real-time alerts"})]})]}),(0,t.jsx)("button",{onClick:()=>eN(!ey),className:`w-14 h-8 rounded-full relative transition-all duration-300 ${ey?"bg-primary":"bg-white/10"}`,children:(0,t.jsx)("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition-all duration-300 ${ey?"left-7 shadow-lg shadow-black/20":"left-1"}`})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-secondary/10 rounded-2xl",children:(0,t.jsx)(H,{className:"w-5 h-5 text-secondary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-black uppercase text-white tracking-widest",children:eF.language}),(0,t.jsx)("p",{className:"text-[9px] font-bold text-white/30 uppercase tracking-widest",children:"Tamil & English supported"})]})]}),(0,t.jsxs)("select",{value:ex,onChange:e=>eh(e.target.value),className:"bg-white/10 border-none rounded-xl p-3 text-[10px] font-black text-white uppercase tracking-widest outline-none cursor-pointer",children:[(0,t.jsx)("option",{value:"English",className:"bg-black",children:"English"}),(0,t.jsx)("option",{value:"Tamil",className:"bg-black",children:"Tamil"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"p-3 bg-white/5 rounded-2xl",children:(0,t.jsx)(B.Eye,{className:"w-5 h-5 text-white/40"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[11px] font-black uppercase text-white tracking-widest",children:"Last Seen"}),(0,t.jsx)("p",{className:"text-[9px] font-bold text-white/30 uppercase tracking-widest",children:"Privacy control"})]})]}),(0,t.jsx)("button",{className:"w-14 h-8 rounded-full bg-primary relative",children:(0,t.jsx)("div",{className:"absolute top-1 left-7 w-6 h-6 bg-white rounded-full shadow-lg"})})]})]}),(0,t.jsxs)("div",{className:"p-6 rounded-3xl bg-secondary/10 border border-secondary/20 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(T.Shield,{className:"w-6 h-6 text-secondary"}),(0,t.jsxs)("p",{className:"text-[11px] font-black text-secondary uppercase tracking-widest leading-loose",children:["End-to-End Encryption",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-white/40",children:"Verified & Active"})]})]}),(0,t.jsx)(Y.ChevronRight,{className:"w-5 h-5 text-secondary opacity-40"})]})]}),ec[68]=ek,ec[69]=ex,ec[70]=ey,ec[71]=eF.language,ec[72]=eF.notifications,ec[73]=es):es=ec[73],ec[74]!==ek||ec[75]!==ef||ec[76]!==eI||ec[77]!==eg?(er="blocked"===ek&&(0,t.jsx)("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-500",children:(0,t.jsxs)("div",{className:"p-6 rounded-3xl bg-white/5 border border-white/10",children:[(0,t.jsx)("h3",{className:"text-[11px] font-black text-white/40 uppercase tracking-[0.2em] mb-6",children:"Blocked Manifest"}),eg?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center p-12",children:(0,t.jsx)(f.Loader2,{className:"w-8 h-8 animate-spin text-primary"})}):0===ef.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 space-y-4",children:[(0,t.jsx)("div",{className:"p-6 bg-white/5 rounded-full border border-white/10",children:(0,t.jsx)(O,{className:"w-10 h-10 text-white/20"})}),(0,t.jsx)("p",{className:"text-xs font-bold text-white/20 uppercase tracking-widest italic text-center",children:"Your ghost list is empty"})]}):(0,t.jsx)("div",{className:"space-y-3",children:ef.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between bg-black/40 p-3 rounded-2xl border border-white/5 group hover:border-white/20 transition-all",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(i.Avatar,{src:e.blocked?.avatar_url,fallback:e.blocked?.username?.[0]||"?",className:"w-10 h-10 rounded-xl"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[13px] font-black text-white uppercase tracking-tight",children:e.blocked?.username||"Unknown Entity"}),(0,t.jsx)("p",{className:"text-[9px] font-bold text-white/20 uppercase tracking-[0.2em]",children:"Restricted Access"})]})]}),(0,t.jsxs)("button",{onClick:()=>eI(e.id),className:"flex items-center gap-2 px-4 py-2 bg-secondary/10 hover:bg-secondary text-secondary hover:text-black rounded-xl transition-all font-black text-[9px] uppercase tracking-widest",children:[(0,t.jsx)($,{className:"w-3 h-3"}),"Restore"]})]},e.id))})]})}),ec[74]=ek,ec[75]=ef,ec[76]=eI,ec[77]=eg,ec[78]=er):er=ec[78],ec[79]!==ea||ec[80]!==es||ec[81]!==er?(el=(0,t.jsxs)("div",{className:"flex-1",children:[ea,es,er]}),ec[79]=ea,ec[80]=es,ec[81]=er,ec[82]=el):el=ec[82],ec[83]!==et||ec[84]!==el?(ei=(0,t.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8 pt-0 relative z-10",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[et,el]})}),ec[83]=et,ec[84]=el,ec[85]=ei):ei=ec[85],ec[86]!==b||ec[87]!==N||ec[88]!==ei?(en=(0,t.jsx)("div",{className:"fixed inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-black border border-white/10 w-full max-w-2xl rounded-[40px] shadow-2xl overflow-hidden relative flex flex-col max-h-[90vh]",children:[b,N,ei]})}),ec[86]=b,ec[87]=N,ec[88]=ei,ec[89]=en):en=ec[89],en}var et=e.i(58086),ea=e.i(32758);function es(e){let n,c,o,d,m,x,h,u,p,f,b,w,j,v,y,N,k,_,S,C,A,q,F,z,L,T,B,O,$,G,V,D,H,W,X,Y,K=(0,a.c)(91),{user:J}=e;K[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],K[0]=n):n=K[0];let[Z,es]=(0,r.useState)(n);K[1]===Symbol.for("react.memo_cache_sentinel")?(c=[],K[1]=c):c=K[1];let[,ei]=(0,r.useState)(c),[en,ec]=(0,r.useState)(!1),[eo,ed]=(0,r.useState)(!1),[em,ex]=(0,r.useState)(!1),[eh,eu]=(0,r.useState)(0);K[2]===Symbol.for("react.memo_cache_sentinel")?(o=new Set,K[2]=o):o=K[2];let[ep,ef]=(0,r.useState)(o),{statuses:eb}=(0,ea.useStatus)();K[3]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.createClient)(),K[3]=d):d=K[3];let eg=d;(0,s.usePathname)();let ew=(0,s.useSearchParams)(),ej=(0,s.useRouter)();K[4]!==ew?(m=ew.get("roomId"),K[4]=ew,K[5]=m):m=K[5];let ev=m;if(K[6]!==J?(x=()=>{let e=async()=>{let{data:e,error:t}=await et.ChatService.getMyRooms();e?es(e):t&&console.error("fetchRooms error:",t)},t=async()=>{let{count:e}=await eg.from("connections").select("*",{count:"exact",head:!0}).eq("addressee_id",J?.id).eq("status","pending");eu(e||0);let{data:t}=await eg.from("connections").select("\n                    *,\n                    requester:profiles!requester_id(username, avatar_url, full_name, gender),\n                    addressee:profiles!addressee_id(username, avatar_url, full_name, gender)\n                ").or(`requester_id.eq.${J.id},addressee_id.eq.${J.id}`).eq("status","accepted").limit(10);t&&ei(t);let{data:a}=await eg.from("blocked_users").select("blocked_id").eq("blocker_id",J.id);a&&ef(new Set(a.map(el)))};J&&(e(),t());let a=eg.channel("rooms_realtime").on("postgres_changes",{event:"*",schema:"public",table:"rooms"},()=>e()).subscribe(),s=eg.channel("connections_sidebar").on("postgres_changes",{event:"*",schema:"public",table:"connections"},()=>t()).subscribe();return()=>{eg.removeChannel(a),eg.removeChannel(s)}},h=[J,eg],K[6]=J,K[7]=x,K[8]=h):(x=K[7],h=K[8]),(0,r.useEffect)(x,h),K[9]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(Q.GradientText,{text:"GOSSIP.",className:"text-[32px] font-[900] tracking-[0.5px]"}),(0,t.jsx)("img",{src:"/images/gossip_header_doodle.png",alt:"Gossip Doodle",className:"w-[50px] h-[50px] object-contain -mt-2 opacity-80"})]}),p=()=>ed(!0),K[9]=u,K[10]=p):(u=K[9],p=K[10]),K[11]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)("div",{className:"w-[28px] h-[28px]",children:(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),(0,t.jsx)("path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0"})]})}),K[11]=f):f=K[11],K[12]!==eh?(b=eh>0&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] rounded-full bg-red-500 border-2 border-black flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white text-[10px] font-[900]",children:eh})}),K[12]=eh,K[13]=b):b=K[13],K[14]!==b?(w=(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[u,(0,t.jsxs)("button",{onClick:p,className:"relative p-1",children:[f,b]})]}),K[14]=b,K[15]=w):w=K[15],K[16]===Symbol.for("react.memo_cache_sentinel")?(j=(0,t.jsx)("p",{className:"text-[13px] text-[#888] font-medium mt-1",children:"Connect, share, and whisper in style."}),K[16]=j):j=K[16],K[17]!==w?(v=(0,t.jsxs)("div",{className:"px-[20px] pt-[10px] pb-[15px]",children:[w,j]}),K[17]=w,K[18]=v):v=K[18],K[19]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)(P.Search,{className:"w-5 h-5 text-[#666]"}),K[19]=y):y=K[19],K[20]===Symbol.for("react.memo_cache_sentinel")?(N=(0,t.jsx)("div",{className:"px-[20px] mb-[15px]",children:(0,t.jsxs)("div",{className:"bg-[#111] h-[48px] rounded-[24px] flex items-center px-[15px] gap-3 border border-[#222]",children:[y,(0,t.jsx)("input",{placeholder:"Search friends or gossip...",className:"bg-transparent border-none outline-none text-[15px] w-full placeholder-[#666] text-white font-normal",readOnly:!0,onClick:()=>ec(!0)})]})}),K[20]=N):N=K[20],K[21]===Symbol.for("react.memo_cache_sentinel")?(k=(0,t.jsx)("h3",{className:"text-[11px] font-[800] tracking-[1.5px] text-[#444] mb-4 uppercase ml-1",children:"VIBES"}),K[21]=k):k=K[21],K[22]!==ej||K[23]!==eb||K[24]!==J.email?.[0]||K[25]!==J.id||K[26]!==J.user_metadata?.avatar_url){let e;K[31]!==J.id?(e=e=>e.user_id===J?.id,K[31]=J.id,K[32]=e):e=K[32],_=eb.find(e),K[33]!==ej?(S=()=>ej.push("/chat/status"),K[33]=ej,K[34]=S):S=K[34],C="flex flex-col items-center gap-3 min-w-[58px]",A=_?(0,t.jsx)("div",{className:"relative p-[2px] rounded-full bg-gradient-to-tr from-[#00BFFF] to-[#FFB6C1] animate-in zoom-in duration-300",children:(0,t.jsx)("div",{className:"p-[2px] bg-black rounded-full",children:(0,t.jsx)("div",{className:"w-[50px] h-[50px] rounded-full overflow-hidden relative bg-zinc-900 border border-white/10",children:function(e){return["mp4","webm","mov","ogg"].includes(e.split(".").pop()?.toLowerCase()||"")}(_.media_url)?(0,t.jsx)("video",{src:_.media_url,className:"w-full h-full object-cover",muted:!0,loop:!0,autoPlay:!0,playsInline:!0}):(0,t.jsx)("img",{src:_.media_url,alt:"My Vibe",className:"w-full h-full object-cover"})})})}):(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.Avatar,{src:J?.user_metadata?.avatar_url,fallback:J?.email?.[0]||"?",className:"w-[58px] h-[58px] rounded-full border-2 border-[#333] opacity-50"}),(0,t.jsx)("div",{className:"absolute bottom-0 right-0 w-[20px] h-[20px] bg-[#00BFFF] rounded-full flex items-center justify-center border-2 border-black",children:(0,t.jsx)(U.Plus,{className:"w-[12px] h-[12px] text-black",strokeWidth:3})})]}),K[22]=ej,K[23]=eb,K[24]=J.email?.[0],K[25]=J.id,K[26]=J.user_metadata?.avatar_url,K[27]=_,K[28]=S,K[29]=C,K[30]=A}else _=K[27],S=K[28],C=K[29],A=K[30];let ey=_?"text-white":"text-white/60";K[35]!==ey?(q=(0,g.cn)("text-[11px] font-bold",ey),K[35]=ey,K[36]=q):q=K[36],K[37]!==q?(F=(0,t.jsx)("span",{className:q,children:"Your Vibe"}),K[37]=q,K[38]=F):F=K[38],K[39]!==S||K[40]!==C||K[41]!==A||K[42]!==F?(z=(0,t.jsxs)("button",{onClick:S,className:C,children:[A,F]}),K[39]=S,K[40]=C,K[41]=A,K[42]=F,K[43]=z):z=K[43];let eN=z;if(K[44]!==eb||K[45]!==J.id){let e;K[47]!==J.id?(e=e=>e.user_id!==J.id,K[47]=J.id,K[48]=e):e=K[48],L=Array.from(new Set(eb.filter(e).map(er))),K[44]=eb,K[45]=J.id,K[46]=L}else L=K[46];if(K[49]!==ej||K[50]!==eb||K[51]!==L?(T=L.map(e=>{let a=eb.find(t=>t.user_id===e);if(!a||!a.profiles)return null;let s=a.profiles;return(0,t.jsxs)("button",{onClick:()=>ej.push("/chat/status"),className:"flex flex-col items-center gap-3 min-w-[58px]",children:[(0,t.jsx)("div",{className:"relative p-[2px] rounded-full bg-gradient-to-tr from-[#00BFFF] to-[#FFB6C1]",children:(0,t.jsx)("div",{className:"p-[2px] bg-black rounded-full",children:(0,t.jsx)(i.Avatar,{src:s.avatar_url,fallback:s.username?.[0]||"?",className:"w-[50px] h-[50px]"})})}),(0,t.jsx)("span",{className:"text-[11px] font-black text-center truncate w-full text-white tracking-tight uppercase",children:s.username})]},e)}),K[49]=ej,K[50]=eb,K[51]=L,K[52]=T):T=K[52],K[53]!==eN||K[54]!==T?(B=(0,t.jsx)("div",{className:"px-4 mb-4",children:(0,t.jsxs)("div",{className:"bg-[#111] border border-[#222] rounded-[35px] p-5",children:[k,(0,t.jsxs)("div",{className:"flex gap-5 overflow-x-auto pb-2 scrollbar-hide",children:[eN,T]})]})}),K[53]=eN,K[54]=T,K[55]=B):B=K[55],K[56]===Symbol.for("react.memo_cache_sentinel")?(O=(0,t.jsx)("div",{className:"px-6 pt-5 pb-2 flex items-center gap-[10px]",children:(0,t.jsx)("h3",{className:"text-[11px] font-[800] tracking-[1.5px] text-[#444] uppercase",children:"RECENT GOSSIPS"})}),K[56]=O):O=K[56],K[57]!==ep||K[58]!==ev||K[59]!==Z||K[60]!==J.id){let e,a;K[62]!==ep||K[63]!==J.id?(e=e=>{let t=e.room_participants?.find(e=>e.user_id!==J?.id);return!(t&&ep.has(t.user_id))},K[62]=ep,K[63]=J.id,K[64]=e):e=K[64],K[65]!==ev||K[66]!==J.id?(a=e=>{let a,s,r=e.name||"UNNAMED CHAT",l=!1;if(e.room_participants){let t=e.room_participants.find(e=>e.user_id!==J?.id);t&&t.profiles&&(r=(t.profiles.full_name||t.profiles.username||"Unknown User").toUpperCase(),a=t.profiles.avatar_url,l=!0,s=t.profiles.gender)}let n=ev===e.id;return(0,t.jsx)(M.default,{href:`/chat?roomId=${e.id}`,className:"block group",children:(0,t.jsxs)("div",{className:(0,g.cn)("px-6 py-3 transition-all cursor-pointer flex items-center gap-4",n?"bg-primary/10":"hover:bg-white/[0.03]"),children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(i.Avatar,{src:a,fallback:r[0]||"?",className:"w-[58px] h-[58px] rounded-full ring-2 ring-white/5"}),l&&(0,t.jsx)("span",{className:"absolute bottom-0 right-1 w-4 h-4 bg-online border-[3px] border-black rounded-full"})]}),(0,t.jsxs)("div",{className:"overflow-hidden flex-1 border-b border-white/5 pb-3 group-last:border-none",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,t.jsx)("p",{className:"text-[16px] font-black tracking-tight truncate",style:{color:function(e){switch(e?.toLowerCase()){case"male":return"#00BFFF";case"female":return"#FFB6C1";case"other":return"#FFD700";default:return"#FFF"}}(s)},children:r}),(0,t.jsx)("p",{className:"text-[11px] font-bold text-white/20",children:function(e){if(!e)return"";let t=new Date(e),a=Math.floor((new Date().getTime()-t.getTime())/6e4);if(a<1)return"Just now";if(a<60)return`${a}m`;let s=Math.floor(a/60);return s<24?`${s}h`:t.toLocaleDateString([],{month:"short",day:"numeric"})}(e.updated_at)})]}),(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsx)("p",{className:(0,g.cn)("text-xs truncate flex-1 pr-2 font-medium",n?"text-primary/70":"text-white/30"),children:e.last_message||"Started a gossip..."})})]})]})},e.id)},K[65]=ev,K[66]=J.id,K[67]=a):a=K[67],$=Z.filter(e).map(a),K[57]=ep,K[58]=ev,K[59]=Z,K[60]=J.id,K[61]=$}else $=K[61];return K[68]!==Z.length?(G=0===Z.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[(0,t.jsx)(E.MessageSquare,{className:"w-12 h-12 text-white/10 mb-4"}),(0,t.jsx)("p",{className:"text-xs text-white/30 font-bold uppercase tracking-widest italic",children:"No gossips yet"})]}),K[68]=Z.length,K[69]=G):G=K[69],K[70]!==$||K[71]!==G?(V=(0,t.jsx)("div",{className:"flex-1 px-4 mb-4 min-h-0 flex flex-col",children:(0,t.jsxs)("div",{className:"bg-[#111] border border-[#222] rounded-[35px] flex-1 flex flex-col overflow-hidden",children:[O,(0,t.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:(0,t.jsxs)("div",{className:"space-y-1",children:[$,G]})})]})}),K[70]=$,K[71]=G,K[72]=V):V=K[72],K[73]!==v||K[74]!==B||K[75]!==V?(D=(0,t.jsxs)("aside",{className:"w-full h-full bg-black text-foreground flex flex-col font-sans overflow-hidden",children:[v,N,B,V]}),K[73]=v,K[74]=B,K[75]=V,K[76]=D):D=K[76],K[77]!==en||K[78]!==J.id?(H=en&&(0,t.jsx)(I,{onClose:()=>ec(!1),currentUserId:J?.id}),K[77]=en,K[78]=J.id,K[79]=H):H=K[79],K[80]!==eo||K[81]!==J.id?(W=eo&&(0,t.jsx)(R,{onClose:()=>ed(!1),currentUserId:J?.id}),K[80]=eo,K[81]=J.id,K[82]=W):W=K[82],K[83]!==em||K[84]!==J?(X=em&&(0,t.jsx)(ee,{onClose:()=>ex(!1),user:J}),K[83]=em,K[84]=J,K[85]=X):X=K[85],K[86]!==D||K[87]!==H||K[88]!==W||K[89]!==X?(Y=(0,t.jsxs)(t.Fragment,{children:[D,H,W,X]}),K[86]=D,K[87]=H,K[88]=W,K[89]=X,K[90]=Y):Y=K[90],Y}function er(e){return e.user_id}function el(e){return e.blocked_id}function ei(){let e,i,n,c,o,d=(0,a.c)(10),m=(0,s.useSearchParams)();d[0]!==m?(e=m.get("roomId"),d[0]=m,d[1]=e):e=d[1];let x=e,[h,u]=(0,r.useState)(null);d[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.createClient)(),d[2]=i):i=d[2];let p=i;if(d[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{p.auth.getUser().then(e=>{let{data:t}=e,{user:a}=t;return u(a)})},c=[p.auth],d[3]=n,d[4]=c):(n=d[3],c=d[4]),(0,r.useEffect)(n,c),!h)return null;if(!x){let e;return d[5]!==h?(e=(0,t.jsx)(es,{user:h}),d[5]=h,d[6]=e):e=d[6],e}return d[7]!==x||d[8]!==h?(o=(0,t.jsx)(F,{roomId:x,user:h}),d[7]=x,d[8]=h,d[9]=o):o=d[9],o}function en(){let e,s=(0,a.c)(1);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(ei,{})}),s[0]=e):e=s[0],e}e.s(["default",()=>en],83904)}]);