{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\nimport { SupabaseClient } from '@supabase/supabase-js'\n\nlet clientInstance: SupabaseClient | null = null;\n\nexport function createClient() {\n    if (!clientInstance) {\n        clientInstance = createBrowserClient(\n            process.env.NEXT_PUBLIC_SUPABASE_URL!,\n            process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n        )\n    }\n    return clientInstance;\n}\n\nexport const safeSupabaseOperation = async <T>(\n    operation: (client: SupabaseClient) => Promise<T>\n): Promise<T> => {\n    const client = createClient();\n    return await operation(client);\n};\n"],"names":[],"mappings":";;;;;;AAQY;AARZ;AAAA;;AAGA,IAAI,iBAAwC;AAErC,SAAS;IACZ,IAAI,CAAC,gBAAgB;QACjB,iBAAiB,IAAA,yNAAmB;IAIxC;IACA,OAAO;AACX;AAEO,MAAM,wBAAwB,OACjC;IAEA,MAAM,SAAS;IACf,OAAO,MAAM,UAAU;AAC3B"}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/contexts/auth-context.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { createClient } from '@/lib/supabase/client';\nimport { User } from '@supabase/supabase-js';\n\nexport interface AuthUser {\n    id: string;\n    email: string;\n    username: string;\n    full_name?: string;\n    avatar_url?: string;\n    age?: number;\n    phone?: string;\n    bio?: string;\n    gender?: string;\n    created_at: string;\n    updated_at: string;\n}\n\ninterface AuthContextType {\n    user: AuthUser | null;\n    loading: boolean;\n    operationLoading: boolean;\n    signInWithPassword: (email: string, pass: string) => Promise<{ error?: string }>;\n    signUpWithPassword: (email: string, pass: string, metadata: any) => Promise<{ error?: string; needsEmailConfirmation?: boolean }>;\n    logout: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n    const [user, setUser] = useState<AuthUser | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [operationLoading, setOperationLoading] = useState(false);\n    const supabase = createClient();\n\n    const mapUser = (supabaseUser: User, profile?: any): AuthUser => ({\n        id: supabaseUser.id,\n        email: supabaseUser.email || '',\n        username: profile?.username || supabaseUser.user_metadata?.username || supabaseUser.email?.split('@')[0],\n        full_name: profile?.full_name || supabaseUser.user_metadata?.full_name,\n        avatar_url: profile?.avatar_url || supabaseUser.user_metadata?.avatar_url,\n        age: profile?.age,\n        phone: profile?.phone,\n        bio: profile?.bio,\n        gender: profile?.gender,\n        created_at: supabaseUser.created_at,\n        updated_at: supabaseUser.updated_at || supabaseUser.created_at,\n    });\n\n    const fetchUser = async (supabaseUser: User) => {\n        const { data: profile } = await supabase\n            .from('profiles')\n            .select('*')\n            .eq('id', supabaseUser.id)\n            .single();\n\n        setUser(mapUser(supabaseUser, profile));\n    };\n\n    useEffect(() => {\n        const initialize = async () => {\n            const { data: { session } } = await supabase.auth.getSession();\n            if (session?.user) {\n                await fetchUser(session.user);\n            }\n            setLoading(false);\n\n            const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {\n                if (session?.user) {\n                    await fetchUser(session.user);\n                } else {\n                    setUser(null);\n                }\n                setLoading(false);\n            });\n\n            return () => subscription.unsubscribe();\n        };\n\n        initialize();\n    }, []);\n\n    const signInWithPassword = async (email: string, pass: string) => {\n        setOperationLoading(true);\n        const { error } = await supabase.auth.signInWithPassword({ email, password: pass });\n        setOperationLoading(false);\n        return { error: error?.message };\n    };\n\n    const signUpWithPassword = async (email: string, pass: string, metadata: any) => {\n        setOperationLoading(true);\n        const { data, error } = await supabase.auth.signUp({\n            email,\n            password: pass,\n            options: { data: metadata }\n        });\n        setOperationLoading(false);\n        return {\n            error: error?.message,\n            needsEmailConfirmation: !!(data.user && !data.session)\n        };\n    };\n\n    const logout = async () => {\n        await supabase.auth.signOut();\n        setUser(null);\n    };\n\n    return (\n        <AuthContext.Provider value={{\n            user,\n            loading,\n            operationLoading,\n            signInWithPassword,\n            signUpWithPassword,\n            logout\n        }}>\n            {children}\n        </AuthContext.Provider>\n    );\n}\n\nexport const useAuth = () => {\n    const context = useContext(AuthContext);\n    if (!context) throw new Error('useAuth must be used within AuthProvider');\n    return context;\n};\n"],"names":["c","_c","React","createContext","useContext","useState","useEffect","ReactNode","createClient","User","AuthUser","id","email","username","full_name","avatar_url","age","phone","bio","gender","created_at","updated_at","AuthContextType","user","loading","operationLoading","signInWithPassword","pass","Promise","error","signUpWithPassword","metadata","needsEmailConfirmation","logout","AuthContext","undefined","AuthProvider","t0","$","$i","Symbol","for","children","setUser","setLoading","setOperationLoading","t1","supabase","mapUser","_AuthProviderMapUser","t2","supabaseUser_0","data","profile_0","from","select","eq","supabaseUser","single","profile","fetchUser","t3","t4","AuthProvider[useEffect()]","initialize","AuthProvider[useEffect() > initialize]","t5","auth","getSession","session","t6","onAuthStateChange","AuthProvider[useEffect() > initialize > supabase.auth.onAuthStateChange()]","event","session_0","subscription","unsubscribe","AuthProvider[signInWithPassword]","password","message","AuthProvider[signUpWithPassword]","email_0","pass_0","error_0","signUp","options","t7","AuthProvider[logout]","signOut","t8","t9","user_metadata","split","useAuth","context","Error"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/services/notification-service.ts"],"sourcesContent":["export const sendPushNotification = async (token: string, title: string, body: string, data?: any) => {\n    console.log('[NotificationService] Web Push Stub:', { token, title, body, data });\n    // In a real web app, you'd use the Web Push API or a service like Firebase Cloud Messaging for Web\n    return true;\n};\n\nexport const registerForPushNotificationsAsync = async () => {\n    console.log('[NotificationService] Register for Push Stub');\n    return null;\n};\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,uBAAuB,OAAO,OAAe,OAAe,MAAc;IACnF,QAAQ,GAAG,CAAC,wCAAwC;QAAE;QAAO;QAAO;QAAM;IAAK;IAC/E,mGAAmG;IACnG,OAAO;AACX;AAEO,MAAM,oCAAoC;IAC7C,QAAQ,GAAG,CAAC;IACZ,OAAO;AACX"}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/services/chat-service.ts"],"sourcesContent":["import { safeSupabaseOperation } from '@/lib/supabase/client';\nimport { sendPushNotification } from '@/services/notification-service';\n\nexport interface Room {\n    id: string;\n    name: string | null;\n    description: string | null;\n    type: 'direct' | 'group';\n    created_by: string;\n    created_at: string;\n    avatar_url: string | null;\n}\n\nexport interface MessageData {\n    id: string;\n    room_id: string;\n    user_id: string;\n    content: string;\n    message_type: 'text' | 'image' | 'video' | 'audio' | 'document';\n    media_url?: string;\n    status: 'sent' | 'delivered' | 'read';\n    created_at: string;\n}\n\nexport const ChatService = {\n    async getMyRooms(): Promise<{ data: any[]; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) throw new Error('Not authenticated');\n\n                console.log('[ChatService] Fetching rooms for user:', user.id);\n\n                // Step 1: Get My Room IDs\n                const { data: myParticipations, error: partError } = await client\n                    .from('room_participants')\n                    .select('room_id')\n                    .eq('user_id', user.id);\n\n                if (partError) {\n                    console.error('[ChatService] Error fetching participations:', partError);\n                    return { data: [], error: partError.message };\n                }\n\n                if (!myParticipations || myParticipations.length === 0) {\n                    console.log('[ChatService] No participations found.');\n                    return { data: [], error: null };\n                }\n\n                const roomIds = myParticipations.map(p => p.room_id);\n\n                // Step 2: Fetch Rooms with Full Details\n                const { data: roomsData, error: roomsError } = await client\n                    .from('rooms')\n                    .select(`\n                        *,\n                        participants:room_participants(\n                            user_id,\n                            profiles(username, full_name, avatar_url, gender, is_online, last_seen)\n                        )\n                    `)\n                    .in('id', roomIds)\n                    .order('created_at', { ascending: false });\n\n                if (roomsError) {\n                    console.error('[ChatService] Error fetching rooms:', roomsError);\n                    return { data: [], error: roomsError.message };\n                }\n\n                // Get Blocked Users\n                const { data: blockedData } = await client\n                    .from('blocked_users')\n                    .select('blocked_id')\n                    .eq('blocker_id', user.id);\n                const blockedIds = new Set((blockedData || []).map((b: any) => b.blocked_id));\n\n                // Transform and Filter\n                const seenPartners = new Set<string>();\n\n                const finalRooms = roomsData.map((room: any) => ({\n                    ...room,\n                    room_participants: room.participants // Map to expected structure for Sidebar\n                })).filter((room: any) => {\n                    if (room.type === 'direct') {\n                        const other = room.participants.find((p: any) => p.user_id !== user.id);\n                        // Check blocked\n                        if (other && blockedIds.has(other.user_id)) return false;\n\n                        // Check duplicates\n                        if (other) {\n                            if (seenPartners.has(other.user_id)) return false;\n                            seenPartners.add(other.user_id);\n                        }\n                    }\n                    return true;\n                });\n\n                console.log('[ChatService] Returning rooms:', finalRooms.length);\n                return { data: finalRooms, error: null };\n            });\n        } catch (err: any) {\n            console.error('[ChatService] getMyRooms exception:', err);\n            return { data: [], error: err.message };\n        }\n    },\n\n    async getRoomParticipants(roomId: string): Promise<{ data: any[]; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data, error } = await client\n                    .from('room_participants')\n                    .select(`\n            user_id,\n            profiles (\n              id,\n              username,\n              full_name,\n              avatar_url,\n              is_online,\n              last_seen,\n              gender,\n              age\n            )\n          `)\n                    .eq('room_id', roomId);\n\n                if (error) return { data: [], error: error.message };\n                return { data: data.map((p: any) => p.profiles), error: null };\n            });\n        } catch (err: any) {\n            return { data: [], error: err.message };\n        }\n    },\n\n    async getMessages(roomId: string, limit = 50, ascending = true): Promise<{ data: MessageData[]; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data, error } = await client\n                    .from('messages')\n                    .select(`\n                        *,\n                        profiles:user_id (\n                            id, username, full_name, avatar_url, gender\n                        )\n                    `)\n                    .eq('room_id', roomId)\n                    .order('created_at', { ascending })\n                    .limit(limit);\n\n                if (error) return { data: [], error: error.message };\n                return { data: (data as MessageData[]) || [], error: null };\n            });\n        } catch (err: any) {\n            return { data: [], error: err.message };\n        }\n    },\n\n    async sendMessage(roomId: string, content: string, type: string = 'text', mediaUrl?: string): Promise<{ data: MessageData | null; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) throw new Error('Not authenticated');\n\n                // Check if anyone in the room has blocked the sender\n                const { data: participants } = await client\n                    .from('room_participants')\n                    .select('user_id')\n                    .eq('room_id', roomId)\n                    .neq('user_id', user.id);\n\n                if (participants && participants.length > 0) {\n                    const participantIds = participants.map(p => p.user_id);\n                    // Check if sender is blocked by any participant OR sender has blocked any participant\n                    const { data: blocks } = await client\n                        .from('blocked_users')\n                        .select('id')\n                        .or(`and(blocker_id.eq.${user.id},blocked_id.in.(${participantIds.join(',')})),and(blocker_id.in.(${participantIds.join(',')}),blocked_id.eq.${user.id})`)\n                        .maybeSingle();\n\n                    if (blocks) {\n                        throw new Error('Cannot send message: Blocked connection');\n                    }\n                }\n\n                const { data, error } = await client\n                    .from('messages')\n                    .insert({\n                        room_id: roomId,\n                        user_id: user.id,\n                        content,\n                        message_type: type,\n                        media_url: mediaUrl,\n                        status: 'sent'\n                    })\n                    .select()\n                    .single();\n\n                if (error) {\n                    console.error('[ChatService] sendMessage error:', error);\n                    return { data: null, error: error.message };\n                }\n\n                // Send Push Notifications asynchronously\n                (async () => {\n                    try {\n                        // Get all participants except sender\n                        const { data: recipients } = await client\n                            .from('room_participants')\n                            .select('user_id, profiles(push_token, full_name, username)')\n                            .eq('room_id', roomId)\n                            .neq('user_id', user.id);\n\n                        if (recipients) {\n                            const senderName = user.user_metadata?.username || 'Gossiper';\n                            const title = `New Gossip from ${senderName}`;\n                            const body = type === 'text' ? content : `Sent a ${type}`;\n\n                            for (const r of recipients) {\n                                const profile = r.profiles as any;\n                                if (profile && profile.push_token) {\n                                    sendPushNotification(profile.push_token, title, body, {\n                                        chatId: roomId,\n                                        senderId: user.id\n                                    });\n                                }\n                            }\n                        }\n                    } catch (pushErr) {\n                        console.error('[ChatService] Failed to send push:', pushErr);\n                    }\n                })();\n\n                return { data: data as MessageData, error: null };\n            });\n        } catch (err: any) {\n            return { data: null, error: err.message };\n        }\n    },\n\n    async deleteMessage(messageId: string): Promise<{ error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { error } = await client\n                .from('messages')\n                .update({ is_deleted: true, content: 'deleted' })\n                .eq('id', messageId);\n            return { error: error?.message || null };\n        });\n    },\n\n    async createDirectChat(otherUserId: string): Promise<{ data: string | null; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) throw new Error('Not authenticated');\n\n                const { data: existing } = await client.rpc('get_direct_room', {\n                    user1: user.id,\n                    user2: otherUserId\n                });\n\n                if (existing) return { data: existing, error: null };\n\n                const { data: room, error: roomError } = await client\n                    .from('rooms')\n                    .insert({ type: 'direct', created_by: user.id })\n                    .select()\n                    .single();\n\n                if (roomError) return { data: null, error: roomError.message };\n\n                const participants = [\n                    { room_id: room.id, user_id: user.id, role: 'owner' },\n                    { room_id: room.id, user_id: otherUserId, role: 'member' }\n                ];\n\n                const { error: partError } = await client\n                    .from('room_participants')\n                    .insert(participants);\n\n                if (partError) return { data: null, error: partError.message };\n\n                return { data: room.id, error: null };\n            });\n        } catch (err: any) {\n            return { data: null, error: err.message };\n        }\n    },\n\n    async createGroupChat(name: string, participantIds: string[]): Promise<{ data: string | null; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) throw new Error('Not authenticated');\n\n                const { data: room, error: roomError } = await client\n                    .from('rooms')\n                    .insert({ name, type: 'group', created_by: user.id })\n                    .select()\n                    .single();\n\n                if (roomError) return { data: null, error: roomError.message };\n\n                const participants = [\n                    { room_id: room.id, user_id: user.id, role: 'owner' },\n                    ...participantIds.map(id => ({ room_id: room.id, user_id: id, role: 'member' }))\n                ];\n\n                const { error: partError } = await client\n                    .from('room_participants')\n                    .insert(participants);\n\n                if (partError) return { data: null, error: partError.message };\n\n                return { data: room.id, error: null };\n            });\n        } catch (err: any) {\n            return { data: null, error: err.message };\n        }\n    },\n\n    async updateRoom(roomId: string, updates: { name?: string; description?: string; avatar_url?: string }): Promise<{ error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { error } = await client\n                .from('rooms')\n                .update(updates)\n                .eq('id', roomId);\n            return { error: error?.message || null };\n        });\n    },\n\n    async uploadGroupAvatar(roomId: string, file: File): Promise<{ data: string | null; error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            try {\n                const fileExt = file.name.split('.').pop() || 'jpg';\n                const fileName = `group_${roomId}_${Date.now()}.${fileExt}`;\n                const filePath = `groups/${fileName}`;\n\n                const { error: uploadError } = await client.storage\n                    .from('gossip-avatars')\n                    .upload(filePath, file, {\n                        contentType: file.type,\n                        upsert: false\n                    });\n\n                if (uploadError) throw uploadError;\n\n                const { data } = client.storage\n                    .from('gossip-avatars')\n                    .getPublicUrl(filePath);\n\n                return { data: data.publicUrl, error: null };\n            } catch (err: any) {\n                return { data: null, error: err.message };\n            }\n        });\n    },\n\n    async uploadChatAttachment(roomId: string, file: File, type: 'image' | 'video' | 'audio' | 'document'): Promise<{ data: string | null; error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            try {\n                const fileExt = file.name.split('.').pop() || 'dat';\n                const folder = type === 'image' ? 'images' : type === 'video' ? 'videos' : 'docs';\n                const fileName = `${folder}/${roomId}_${Date.now()}.${fileExt}`;\n\n                const { error: uploadError } = await client.storage\n                    .from('chat-attachments')\n                    .upload(fileName, file, {\n                        contentType: file.type,\n                        upsert: false\n                    });\n\n                if (uploadError) throw uploadError;\n\n                const { data } = client.storage\n                    .from('chat-attachments')\n                    .getPublicUrl(fileName);\n\n                return { data: data.publicUrl, error: null };\n            } catch (err: any) {\n                return { data: null, error: err.message };\n            }\n        });\n    },\n\n    async updateOnlineStatus(userId: string, isOnline: boolean): Promise<{ error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { error } = await client\n                .from('profiles')\n                .update({ is_online: isOnline, last_seen: new Date().toISOString() })\n                .eq('id', userId);\n            return { error: error?.message || null };\n        });\n    },\n\n    async getRoomParticipantsProfiles(roomId: string): Promise<{ data: any[]; error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { data, error } = await client\n                .from('room_participants')\n                .select('profiles (*)')\n                .eq('room_id', roomId);\n            if (error) return { data: [], error: error.message };\n            return { data: data.map((p: any) => p.profiles), error: null };\n        });\n    },\n\n    async sendConnectionRequest(targetUserId: string): Promise<{ error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { data: { user } } = await client.auth.getUser();\n            if (!user) return { error: 'Not authenticated' };\n\n            const { error } = await client\n                .from('connections')\n                .insert({\n                    requester_id: user.id,\n                    addressee_id: targetUserId,\n                    status: 'pending'\n                });\n\n            return { error: error?.message || null };\n        });\n    },\n\n    async getPendingRequests(): Promise<{ data: any[]; error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { data: { user } } = await client.auth.getUser();\n            if (!user) return { data: [], error: 'Not authenticated' };\n\n            const { data, error } = await client\n                .from('connections')\n                .select(`\n                    id,\n                    requester_id,\n                    created_at,\n                    profiles:requester_id (\n                        id,\n                        username,\n                        full_name,\n                        avatar_url\n                    )\n                `)\n                .eq('addressee_id', user.id)\n                .eq('status', 'pending');\n\n            if (error) return { data: [], error: error.message };\n            return { data: data || [], error: null };\n        });\n    },\n\n    async getAcceptedConnections(): Promise<{ data: any[]; error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { data: { user } } = await client.auth.getUser();\n            if (!user) return { data: [], error: 'Not authenticated' };\n\n            // Get connections where I am requester OR addressee\n            const { data, error } = await client\n                .from('connections')\n                .select(`\n                    id,\n                    requester_id,\n                    addressee_id,\n                    status,\n                    created_at,\n                    requester:requester_id (id, username, full_name, avatar_url, is_online, last_seen, gender, age),\n                    addressee:addressee_id (id, username, full_name, avatar_url, is_online, last_seen, gender, age)\n                `)\n                .or(`requester_id.eq.${user.id},addressee_id.eq.${user.id}`)\n                .eq('status', 'accepted');\n\n            if (error) return { data: [], error: error.message };\n\n            // Transform to just return the OTHER user's profile\n            const connections = data.map((conn: any) => {\n                const isRequester = conn.requester_id === user.id;\n                const profile = isRequester ? conn.addressee : conn.requester;\n                return {\n                    connection_id: conn.id,\n                    ...profile\n                };\n            });\n\n            return { data: connections, error: null };\n        });\n    },\n\n    async respondToConnection(connectionId: string, status: 'accepted' | 'rejected'): Promise<{ data: string | null; error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { error } = await client\n                .from('connections')\n                .update({ status })\n                .eq('id', connectionId);\n\n            if (error) return { data: null, error: error.message };\n\n            let roomId = null;\n            // If accepted, create a direct chat room\n            if (status === 'accepted') {\n                const { data: connection } = await client\n                    .from('connections')\n                    .select('requester_id, addressee_id')\n                    .eq('id', connectionId)\n                    .single();\n\n                if (connection) {\n                    const { data: id, error: chatError } = await this.createDirectChat(connection.requester_id);\n                    if (chatError) return { data: null, error: chatError };\n                    roomId = id;\n                }\n            }\n\n            return { data: roomId, error: null };\n        });\n    },\n\n    async deleteRoom(roomId: string): Promise<{ error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { error } = await client.from('rooms').delete().eq('id', roomId);\n            return { error: error?.message || null };\n        });\n    },\n\n    async updateMessageStatus(messageId: string, status: 'delivered' | 'read'): Promise<{ error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const updateObj: any = { status };\n            if (status === 'delivered') updateObj.delivered_at = new Date().toISOString();\n            if (status === 'read') updateObj.read_at = new Date().toISOString();\n\n            const { error } = await client\n                .from('messages')\n                .update(updateObj)\n                .eq('id', messageId);\n            return { error: error?.message || null };\n        });\n    },\n\n    async markRoomAsRead(roomId: string, userId: string): Promise<{ error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { error } = await client\n                .from('messages')\n                .update({ status: 'read', read_at: new Date().toISOString() })\n                .eq('room_id', roomId)\n                .neq('user_id', userId)\n                .neq('status', 'read');\n            return { error: error?.message || null };\n        });\n    },\n\n    async blockUser(targetUserId: string): Promise<{ error: string | null }> {\n        console.log('[ChatService] Blocking user:', targetUserId);\n        return await safeSupabaseOperation(async (client) => {\n            const { data: { user } } = await client.auth.getUser();\n            if (!user) return { error: 'Not authenticated' };\n\n            const { error } = await client\n                .from('blocked_users')\n                .insert({ blocker_id: user.id, blocked_id: targetUserId });\n\n            if (error) {\n                console.error('[ChatService] blockUser error:', error);\n                return { error: error.message };\n            }\n            return { error: null };\n        });\n    },\n\n    async unblockUser(targetUserId: string): Promise<{ error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { data: { user } } = await client.auth.getUser();\n            if (!user) return { error: 'Not authenticated' };\n\n            const { error } = await client\n                .from('blocked_users')\n                .delete()\n                .eq('blocker_id', user.id)\n                .eq('blocked_id', targetUserId);\n            return { error: error?.message || null };\n        });\n    },\n\n    async isBlocked(targetUserId: string): Promise<boolean> {\n        const { data } = await safeSupabaseOperation(async (client) => {\n            const { data: { user } } = await client.auth.getUser();\n            if (!user) return { data: null };\n\n            return await client\n                .from('blocked_users')\n                .select('id')\n                .or(`and(blocker_id.eq.${user.id},blocked_id.eq.${targetUserId}),and(blocker_id.eq.${targetUserId},blocked_id.eq.${user.id})`)\n                .maybeSingle();\n        });\n        return !!data;\n    },\n\n    async getBlockedUsers(): Promise<{ data: any[]; error: string | null }> {\n        console.log('[ChatService] Fetching blocked users...');\n        return await safeSupabaseOperation(async (client) => {\n            const { data: { user } } = await client.auth.getUser();\n            if (!user) return { data: [], error: 'Not authenticated' };\n\n            const { data, error } = await client\n                .from('blocked_users')\n                .select(`\n                    id,\n                    blocked_id,\n                    profiles:blocked_id (*)\n                `)\n                .eq('blocker_id', user.id);\n\n            if (error) {\n                console.error('[ChatService] getBlockedUsers error:', error);\n                return { data: [], error: error.message };\n            }\n\n            const blockedUsers = (data || []).map((item: any) => ({\n                id: item.blocked_id,\n                username: item.profiles?.username || 'Unknown',\n                full_name: item.profiles?.full_name || 'Unknown Gossiper',\n                avatar_url: item.profiles?.avatar_url\n            }));\n\n            console.log(`[ChatService] Found ${blockedUsers.length} blocked users`);\n            return { data: blockedUsers, error: null };\n        });\n    }\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 900, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/contexts/chat-context.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useState, ReactNode, useEffect, useRef, useContext } from 'react';\nimport { useAuth } from './auth-context';\nimport { createClient } from '@/lib/supabase/client';\nimport { ChatService, MessageData } from '@/services/chat-service';\n\nexport interface Message {\n    id: string;\n    chatId: string;\n    senderId: string;\n    content: string;\n    type: 'text' | 'image' | 'video' | 'audio' | 'document';\n    timestamp: Date;\n    status: 'sent' | 'delivered' | 'read';\n    mediaUrl?: string;\n}\n\nexport interface Chat {\n    id: string;\n    userId: string;\n    userName: string;\n    userAvatar: string;\n    lastMessage: string;\n    lastMessageTime: Date;\n    unreadCount: number;\n    online: boolean;\n    typing: boolean;\n    type: 'direct' | 'group';\n    age?: number;\n    gender?: string;\n    onlineCount?: number;\n    memberCount?: number;\n    description?: string;\n    createdBy?: string;\n}\n\nexport interface ConnectionRequest {\n    id: string;\n    requester_id: string;\n    created_at: string;\n    profiles: {\n        id: string;\n        username: string;\n        full_name: string;\n        avatar_url: string;\n    };\n}\n\ninterface ChatContextType {\n    chats: Chat[];\n    messages: Record<string, Message[]>;\n    pendingRequests: ConnectionRequest[];\n    loading: boolean;\n    sendMessage: (chatId: string, content: string, type?: string, mediaUrl?: string) => Promise<void>;\n    markAsRead: (chatId: string) => void;\n    setTyping: (chatId: string, isTyping: boolean) => void;\n    createChat: (userId: string, userName: string, userAvatar: string) => Promise<string>;\n    sendRequest: (userId: string) => Promise<void>;\n    respondToRequest: (requestId: string, status: 'accepted' | 'rejected') => Promise<string | null>;\n    refreshChats: () => Promise<void>;\n    blockUser: (userId: string) => Promise<void>;\n    unblockUser: (userId: string) => Promise<void>;\n    deleteGroup: (roomId: string) => Promise<void>;\n    fetchMessages: (chatId: string) => Promise<void>;\n    updateGroup: (roomId: string, updates: { name?: string; description?: string; avatar_url?: string }) => Promise<void>;\n    getParticipants: (roomId: string) => Promise<any[]>;\n    lockedChats: Record<string, string>; // Map chatId -> PIN\n    lockChat: (chatId: string, pin: string) => Promise<void>;\n    unlockChat: (chatId: string) => Promise<void>;\n}\n\nexport const ChatContext = createContext<ChatContextType | undefined>(undefined);\n\nexport function ChatProvider({ children }: { children: ReactNode }) {\n    const { user } = useAuth();\n    const [chats, setChats] = useState<Chat[]>([]);\n    const [messages, setMessages] = useState<Record<string, Message[]>>({});\n    const [pendingRequests, setPendingRequests] = useState<ConnectionRequest[]>([]);\n    const [lockedChats, setLockedChats] = useState<Record<string, string>>({});\n    const [loading, setLoading] = useState(false);\n    const supabase = createClient();\n    const channelRef = useRef<any>(null);\n    const isFetchingRef = useRef(false);\n    const hasInitialLoaded = useRef(false);\n\n    useEffect(() => {\n        if (user?.id) {\n            if (!hasInitialLoaded.current) {\n                setLoading(true);\n                loadInitialData().finally(() => {\n                    setLoading(false);\n                    hasInitialLoaded.current = true;\n                });\n            }\n\n            setupRealtime();\n            ChatService.updateOnlineStatus(user.id, true);\n\n            const pollInterval = setInterval(() => {\n                refreshChats();\n            }, 30000);\n\n            return () => {\n                clearInterval(pollInterval);\n                ChatService.updateOnlineStatus(user.id, false);\n                cleanupRealtime();\n            };\n        } else {\n            setChats([]);\n            setMessages({});\n            setPendingRequests([]);\n            setLockedChats({});\n            setLoading(false);\n            hasInitialLoaded.current = false;\n            cleanupRealtime();\n        }\n    }, [user?.id]);\n\n    useEffect(() => {\n        const stored = localStorage.getItem('LOCKED_CHATS');\n        if (stored) setLockedChats(JSON.parse(stored));\n    }, []);\n\n    const cleanupRealtime = () => {\n        if (channelRef.current) {\n            supabase.removeChannel(channelRef.current);\n            channelRef.current = null;\n        }\n    };\n\n    const loadInitialData = async () => {\n        if (isFetchingRef.current) return;\n        isFetchingRef.current = true;\n        try {\n            const [roomsResponse, requestsResponse, connectionsResponse] = await Promise.all([\n                ChatService.getMyRooms(),\n                ChatService.getPendingRequests(),\n                ChatService.getAcceptedConnections()\n            ]);\n\n            if (requestsResponse.data) {\n                setPendingRequests(requestsResponse.data);\n            }\n\n            const formattedChats: Chat[] = [];\n            const existingUserIds = new Set<string>();\n\n            if (roomsResponse.data) {\n                const chatPromises = roomsResponse.data.map(room => formatRoomToChat(room));\n                const results = await Promise.all(chatPromises);\n                results.forEach(chat => {\n                    if (chat) {\n                        formattedChats.push(chat);\n                        if (chat.type === 'direct') existingUserIds.add(chat.userId);\n                    }\n                });\n            }\n\n            if (connectionsResponse.data) {\n                connectionsResponse.data.forEach((conn: any) => {\n                    if (!existingUserIds.has(conn.id)) {\n                        formattedChats.push({\n                            id: `temp_${conn.id}`,\n                            userId: conn.id,\n                            userName: conn.username || conn.full_name || 'User',\n                            userAvatar: conn.avatar_url || `https://i.pravatar.cc/150?u=${conn.id}`,\n                            lastMessage: 'Tap to start chatting',\n                            lastMessageTime: new Date(conn.created_at || Date.now()),\n                            unreadCount: 0,\n                            online: conn.is_online || false,\n                            typing: false,\n                            type: 'direct',\n                            age: conn.age,\n                            gender: conn.gender,\n                        });\n                    }\n                });\n            }\n\n            setChats(prev => {\n                const sorted = [...formattedChats].sort((a, b) => b.lastMessageTime.getTime() - a.lastMessageTime.getTime());\n                if (JSON.stringify(prev) === JSON.stringify(sorted)) return prev;\n                return sorted;\n            });\n        } catch (error) {\n            console.error('[ChatContext] Load error:', error);\n        } finally {\n            isFetchingRef.current = false;\n        }\n    };\n\n    const formatRoomToChat = async (room: any): Promise<Chat | null> => {\n        const participants = await ChatService.getRoomParticipants(room.id);\n        const { data: msgs } = await ChatService.getMessages(room.id, 1, false);\n        const lastMsg = msgs?.[0];\n\n        if (room.type === 'direct') {\n            const otherUser = participants.data?.find(p => p.id !== user?.id);\n            if (otherUser) {\n                const { count } = await supabase\n                    .from('messages')\n                    .select('*', { count: 'exact', head: true })\n                    .eq('room_id', room.id)\n                    .neq('user_id', user?.id)\n                    .neq('status', 'read');\n\n                return {\n                    id: room.id,\n                    userId: otherUser.id,\n                    userName: otherUser.username || otherUser.full_name || 'User',\n                    userAvatar: otherUser.avatar_url || `https://i.pravatar.cc/150?u=${otherUser.id}`,\n                    lastMessage: lastMsg?.content || 'Started a gossip...',\n                    lastMessageTime: lastMsg ? new Date(lastMsg.created_at) : new Date(room.created_at),\n                    unreadCount: count || 0,\n                    online: otherUser.is_online || false,\n                    typing: false,\n                    type: 'direct',\n                    age: otherUser.age,\n                    gender: otherUser.gender,\n                };\n            }\n        } else {\n            const { count } = await supabase\n                .from('messages')\n                .select('*', { count: 'exact', head: true })\n                .eq('room_id', room.id)\n                .neq('user_id', user?.id)\n                .neq('status', 'read');\n\n            const onlineCount = participants.data?.filter(p => p.is_online).length || 0;\n            const memberCount = participants.data?.length || 0;\n\n            return {\n                id: room.id,\n                userId: room.id,\n                userName: room.name || 'Gossip Group',\n                userAvatar: room.avatar_url || `https://ui-avatars.com/api/?name=${encodeURIComponent(room.name || 'G')}&background=FFB6C1&color=000`,\n                lastMessage: lastMsg?.content || 'New gossip group created!',\n                lastMessageTime: lastMsg ? new Date(lastMsg.created_at) : new Date(room.created_at),\n                unreadCount: count || 0,\n                online: onlineCount > 0,\n                onlineCount,\n                memberCount,\n                description: room.description || 'Welcome to the gossip group!',\n                createdBy: room.created_by,\n                typing: false,\n                type: 'group',\n            };\n        }\n        return null;\n    };\n\n    const setupRealtime = () => {\n        cleanupRealtime();\n        if (!user?.id) return;\n\n        const channel = supabase\n            .channel('gossip-main', {\n                config: {\n                    broadcast: { self: false },\n                    presence: { key: user.id }\n                }\n            })\n            .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'messages' }, async (payload) => {\n                const newMessage = payload.new as MessageData;\n\n                if (newMessage.user_id !== user?.id && newMessage.status === 'sent') {\n                    ChatService.updateMessageStatus(newMessage.id, 'delivered');\n                }\n\n                const formattedMsg: Message = {\n                    id: newMessage.id,\n                    chatId: newMessage.room_id,\n                    senderId: newMessage.user_id,\n                    content: newMessage.content,\n                    type: newMessage.message_type as any,\n                    timestamp: new Date(newMessage.created_at),\n                    status: newMessage.status,\n                    mediaUrl: newMessage.media_url,\n                };\n\n                setMessages(prev => {\n                    const currentMsgs = prev[newMessage.room_id] || [];\n                    if (currentMsgs.some(m => m.id === formattedMsg.id)) return prev;\n                    return { ...prev, [newMessage.room_id]: [...currentMsgs, formattedMsg] };\n                });\n\n                refreshChats();\n            })\n            .on('postgres_changes', { event: 'UPDATE', schema: 'public', table: 'messages' }, (payload) => {\n                const updatedMsg = payload.new as MessageData;\n                setMessages(prev => {\n                    const roomMsgs = prev[updatedMsg.room_id] || [];\n                    return {\n                        ...prev,\n                        [updatedMsg.room_id]: roomMsgs.map(m => m.id === updatedMsg.id ? { ...m, status: updatedMsg.status } : m)\n                    };\n                });\n            })\n            .on('postgres_changes', { event: 'UPDATE', schema: 'public', table: 'profiles' }, (payload) => {\n                const updatedProfile = payload.new;\n                setChats(prev => prev.map(chat => chat.userId === updatedProfile.id ? { ...chat, online: updatedProfile.is_online } : chat));\n            })\n            .on('postgres_changes', { event: '*', schema: 'public', table: 'connections', filter: `addressee_id=eq.${user.id}` }, async () => {\n                const { data: requests } = await ChatService.getPendingRequests();\n                if (requests) setPendingRequests(requests);\n            })\n            .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'room_participants', filter: `user_id=eq.${user.id}` }, () => {\n                refreshChats();\n            })\n            .on('broadcast', { event: 'typing' }, (payload) => {\n                const { chatId, userId, isTyping } = payload.payload;\n                if (userId === user?.id) return;\n                setChats(prev => prev.map(chat => chat.id === chatId ? { ...chat, typing: isTyping } : chat));\n            })\n            .subscribe();\n\n        channelRef.current = channel;\n    };\n\n    const sendMessage = async (chatId: string, content: string, type: string = 'text', mediaUrl?: string) => {\n        const { data: sentMsg, error } = await ChatService.sendMessage(chatId, content, type, mediaUrl);\n        if (error) throw new Error(error);\n\n        if (sentMsg) {\n            const formattedMsg: Message = {\n                id: sentMsg.id,\n                chatId: sentMsg.room_id,\n                senderId: sentMsg.user_id,\n                content: sentMsg.content,\n                type: sentMsg.message_type as any,\n                timestamp: new Date(sentMsg.created_at),\n                status: sentMsg.status,\n                mediaUrl: sentMsg.media_url,\n            };\n\n            setMessages(prev => {\n                const currentMsgs = prev[chatId] || [];\n                if (currentMsgs.some(m => m.id === formattedMsg.id)) return prev;\n                return { ...prev, [chatId]: [...currentMsgs, formattedMsg] };\n            });\n        }\n    };\n\n    const markAsRead = async (chatId: string) => {\n        if (!user?.id) return;\n        await ChatService.markRoomAsRead(chatId, user.id);\n        setChats(prev => prev.map(chat => chat.id === chatId ? { ...chat, unreadCount: 0 } : chat));\n        setMessages(prev => {\n            const roomMsgs = prev[chatId];\n            if (!roomMsgs) return prev;\n            return { ...prev, [chatId]: roomMsgs.map(m => m.senderId !== user.id ? { ...m, status: 'read' } : m) };\n        });\n    };\n\n    const setTyping = async (chatId: string, isTyping: boolean) => {\n        if (channelRef.current) {\n            await channelRef.current.send({\n                type: 'broadcast',\n                event: 'typing',\n                payload: { chatId, userId: user?.id, isTyping },\n            });\n        }\n    };\n\n    const createChat = async (userId: string, userName: string, userAvatar: string): Promise<string> => {\n        const { data: roomId, error } = await ChatService.createDirectChat(userId);\n        if (error) throw new Error(error);\n        await loadInitialData();\n        return roomId!;\n    };\n\n    const sendRequest = async (userId: string) => {\n        const { error } = await ChatService.sendConnectionRequest(userId);\n        if (error) throw new Error(error);\n    };\n\n    const respondToRequest = async (requestId: string, status: 'accepted' | 'rejected'): Promise<string | null> => {\n        setLoading(true);\n        const { data: roomId, error } = await ChatService.respondToConnection(requestId, status);\n        if (error) {\n            setLoading(false);\n            return null;\n        }\n        setPendingRequests(prev => prev.filter(r => r.id !== requestId));\n        await loadInitialData();\n        setLoading(false);\n        return roomId;\n    };\n\n    const fetchMessages = async (chatId: string) => {\n        const { data, error } = await ChatService.getMessages(chatId);\n        if (!error && data) {\n            const formattedMsgs: Message[] = data.map(m => ({\n                id: m.id,\n                chatId: m.room_id,\n                senderId: m.user_id,\n                content: m.content,\n                type: m.message_type as any,\n                timestamp: new Date(m.created_at),\n                status: m.status,\n                mediaUrl: m.media_url,\n            }));\n            setMessages(prev => ({ ...prev, [chatId]: formattedMsgs }));\n        }\n    };\n\n    const refreshChats = async () => {\n        await loadInitialData();\n    };\n\n    const blockUser = async (userId: string) => {\n        const { error } = await ChatService.blockUser(userId);\n        if (error) throw new Error(error);\n        await refreshChats();\n    };\n\n    const unblockUser = async (userId: string) => {\n        const { error } = await ChatService.unblockUser(userId);\n        if (error) throw new Error(error);\n        await refreshChats();\n    };\n\n    const deleteGroup = async (roomId: string) => {\n        const { error } = await ChatService.deleteRoom(roomId);\n        if (error) throw new Error(error);\n        await refreshChats();\n    };\n\n    const updateGroup = async (roomId: string, updates: { name?: string; description?: string; avatar_url?: string }) => {\n        const { error } = await ChatService.updateRoom(roomId, updates);\n        if (error) throw new Error(error);\n        await refreshChats();\n    };\n\n    const getParticipants = async (roomId: string) => {\n        const { data, error } = await ChatService.getRoomParticipantsProfiles(roomId);\n        if (error) throw new Error(error);\n        return data || [];\n    };\n\n    const lockChat = async (chatId: string, pin: string) => {\n        const updated = { ...lockedChats, [chatId]: pin };\n        setLockedChats(updated);\n        localStorage.setItem('LOCKED_CHATS', JSON.stringify(updated));\n    };\n\n    const unlockChat = async (chatId: string) => {\n        const updated = { ...lockedChats };\n        delete updated[chatId];\n        setLockedChats(updated);\n        localStorage.setItem('LOCKED_CHATS', JSON.stringify(updated));\n    };\n\n    return (\n        <ChatContext.Provider value={{\n            chats, messages, pendingRequests, loading, sendMessage, markAsRead, setTyping, createChat, sendRequest, respondToRequest, refreshChats, blockUser, unblockUser, deleteGroup, fetchMessages, updateGroup, getParticipants,\n            lockedChats, lockChat, unlockChat\n        }}>\n            {children}\n        </ChatContext.Provider>\n    );\n}\n\nexport function useChat() {\n    const context = useContext(ChatContext);\n    if (!context) throw new Error('useChat must be used within ChatProvider');\n    return context;\n}\n"],"names":["c","_c","React","createContext","useState","ReactNode","useEffect","useRef","useContext","useAuth","createClient","ChatService","MessageData","Message","id","chatId","senderId","content","type","timestamp","Date","status","mediaUrl","Chat","userId","userName","userAvatar","lastMessage","lastMessageTime","unreadCount","online","typing","age","gender","onlineCount","memberCount","description","createdBy","ConnectionRequest","requester_id","created_at","profiles","username","full_name","avatar_url","ChatContextType","chats","messages","Record","pendingRequests","loading","sendMessage","Promise","markAsRead","setTyping","isTyping","createChat","sendRequest","respondToRequest","requestId","refreshChats","blockUser","unblockUser","deleteGroup","roomId","fetchMessages","updateGroup","updates","name","getParticipants","lockedChats","lockChat","pin","unlockChat","ChatContext","undefined","ChatProvider","children","user","setChats","setMessages","setPendingRequests","setLockedChats","setLoading","supabase","channelRef","isFetchingRef","hasInitialLoaded","current","loadInitialData","finally","setupRealtime","updateOnlineStatus","pollInterval","setInterval","clearInterval","cleanupRealtime","stored","localStorage","getItem","JSON","parse","removeChannel","roomsResponse","requestsResponse","connectionsResponse","all","getMyRooms","getPendingRequests","getAcceptedConnections","data","formattedChats","existingUserIds","Set","chatPromises","map","room","formatRoomToChat","results","forEach","chat","push","add","conn","has","now","is_online","prev","sorted","sort","a","b","getTime","stringify","error","console","participants","getRoomParticipants","msgs","getMessages","lastMsg","otherUser","find","p","count","from","select","head","eq","neq","filter","length","encodeURIComponent","created_by","channel","config","broadcast","self","presence","key","on","event","schema","table","payload","newMessage","new","user_id","updateMessageStatus","formattedMsg","room_id","message_type","media_url","currentMsgs","some","m","updatedMsg","roomMsgs","updatedProfile","requests","subscribe","sentMsg","Error","markRoomAsRead","send","createDirectChat","sendConnectionRequest","respondToConnection","r","formattedMsgs","deleteRoom","updateRoom","getRoomParticipantsProfiles","updated","setItem","useChat","$","$i","Symbol","for","context"],"mappings":";;;;;;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,OAAOC,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,SAAS,EAAEC,MAAM,EAAEC,UAAU,QAAQ,OAAO;AAChG,SAASC,OAAO,QAAQ,gBAAgB;AACxC,SAASC,YAAY,QAAQ,uBAAuB;AACpD,SAASC,WAAW,EAAEC,WAAW,QAAQ,yBAAyB;;;AALlE,YAAY;;;;;;AAwEL,MAAM8D,WAAW,qBAAGvE,mMAAa,CAAC0C,CAA6B8B,SAAS,CAAC,IAAxB,GAAG,SAAS,CAAC;AAE9D,sBAAsB,EAAEE,QAAAA,EAAmC,EAAE;;IAChE,MAAM,EAAEC,IAAAA,EAAM;IACd,MAAM,CAAChC,KAAK,EAAEiC,QAAQ,CAAC,GAAG3E,kMAAQ,CAACmB,CAAQ,EAAE,CAAN,AAAO,EAAL,CAAC;IAC1C,MAAM,CAACwB,QAAQ,EAAEiC,WAAW,CAAC,OAAG5E,8LAAQ,CAAC4C,CAA2B,CAAC,CAAC,CAAC,EAAxB,CAAC,MAAM,EAAEnC,OAAO,EAAE,CAAC,CAAC;IACnE,MAAM,CAACoC,eAAe,EAAEgC,kBAAkB,CAAC,OAAG7E,8LAAQ,CAACkC,CAAqB,EAAE,CAAC,aAAP,EAAE,CAAC;IAC3E,MAAM,CAACgC,WAAW,EAAEY,cAAc,CAAC,OAAG9E,8LAAQ,CAAC4C,CAAwB,CAAC,CAAC,CAAC,EAArB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IACtE,MAAM,CAACE,OAAO,EAAEiC,UAAU,CAAC,OAAG/E,8LAAQ,EAAC,KAAK,CAAC;IAC7C,MAAMgF,QAAQ,OAAG1E,wKAAY,CAAC,CAAC;IAC/B,MAAM2E,UAAU,OAAG9E,4LAAM,CAAC,CAAK,EAAF,CAAC,CAAK,CAAC;IACpC,MAAM+E,aAAa,OAAG/E,4LAAM,EAAC,KAAK,CAAC;IACnC,MAAMgF,gBAAgB,GAAGhF,gMAAM,EAAC,KAAK,CAAC;QAEtCD,+LAAS;kCAAC,MAAM;YACZ,IAAIwE,IAAI,EAAEhE,EAAE,EAAE;gBACV,IAAI,CAACyE,gBAAgB,CAACC,OAAO,EAAE;oBAC3BL,UAAU,CAAC,IAAI,CAAC;oBAChBM,eAAe,CAAC,CAAC,CAACC,OAAO;kDAAC,MAAM;4BAC5BP,UAAU,CAAC,KAAK,CAAC;4BACjBI,gBAAgB,CAACC,OAAO,GAAG,IAAI;wBACnC,CAAC,CAAC;;gBACN;gBAEAG,aAAa,CAAC,CAAC;gBACfhF,yKAAW,CAACiF,kBAAkB,CAACd,IAAI,CAAChE,EAAE,EAAE,IAAI,CAAC;gBAE7C,MAAM+E,YAAY,GAAGC,WAAW;2DAAC,MAAM;wBACnClC,YAAY,CAAC,CAAC;oBAClB,CAAC;0DAAE,KAAK,CAAC;gBAET;8CAAO,MAAM;wBACTmC,aAAa,CAACF,YAAY,CAAC;wBAC3BlF,yKAAW,CAACiF,kBAAkB,CAACd,IAAI,CAAChE,EAAE,EAAE,KAAK,CAAC;wBAC9CkF,eAAe,CAAC,CAAC;oBACrB,CAAC;;YACL,CAAC,MAAM;gBACHjB,QAAQ,CAAC,EAAE,CAAC;gBACZC,WAAW,CAAC,CAAC,CAAC,CAAC;gBACfC,kBAAkB,CAAC,EAAE,CAAC;gBACtBC,cAAc,CAAC,CAAC,CAAC,CAAC;gBAClBC,UAAU,CAAC,KAAK,CAAC;gBACjBI,gBAAgB,CAACC,OAAO,GAAG,KAAK;gBAChCQ,eAAe,CAAC,CAAC;YACrB;QACJ,CAAC;iCAAE;QAAClB,IAAI,EAAEhE,EAAE;KAAC,CAAC;QAEdR,+LAAS;kCAAC,MAAM;YACZ,MAAM2F,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;YACnD,IAAIF,MAAM,EAAEf,cAAc,CAACkB,IAAI,CAACC,KAAK,CAACJ,MAAM,CAAC,CAAC;QAClD,CAAC;iCAAE,EAAE,CAAC;IAEN,MAAMD,eAAe,GAAGA,CAAA,KAAM;QAC1B,IAAIX,UAAU,CAACG,OAAO,EAAE;YACpBJ,QAAQ,CAACkB,aAAa,CAACjB,UAAU,CAACG,OAAO,CAAC;YAC1CH,UAAU,CAACG,OAAO,GAAG,IAAI;QAC7B;IACJ,CAAC;IAED,MAAMC,eAAe,GAAG,MAAAA,CAAA,KAAY;QAChC,IAAIH,aAAa,CAACE,OAAO,EAAE;QAC3BF,aAAa,CAACE,OAAO,GAAG,IAAI;QAC5B,IAAI;YACA,MAAM,CAACe,aAAa,EAAEC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG,MAAMrD,OAAO,CAACsD,GAAG,CAAC;gBAC7E/F,yKAAW,CAACgG,UAAU,CAAC,CAAC;gBACxBhG,yKAAW,CAACiG,kBAAkB,CAAC,CAAC;gBAChCjG,yKAAW,CAACkG,sBAAsB,CAAC,CAAC;aACvC,CAAC;YAEF,IAAIL,gBAAgB,CAACM,IAAI,EAAE;gBACvB7B,kBAAkB,CAACuB,gBAAgB,CAACM,IAAI,CAAC;YAC7C;YAEA,MAAMC,cAAc,EAAExF,CAAS,EAAE,CAAP,EAAE;YAC5B,MAAMyF,eAAe,GAAG,IAAIC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC;YAEzC,IAAIV,aAAa,CAACO,IAAI,EAAE;gBACpB,MAAMI,YAAY,GAAGX,aAAa,CAACO,IAAI,CAACK,GAAG,EAACC,IAAI,GAAIC,gBAAgB,CAACD,IAAI,CAAC,CAAC;gBAC3E,MAAME,OAAO,GAAG,MAAMlE,OAAO,CAACsD,GAAG,CAACQ,YAAY,CAAC;gBAC/CI,OAAO,CAACC,OAAO,EAACC,IAAI,IAAI;oBACpB,IAAIA,IAAI,EAAE;wBACNT,cAAc,CAACU,IAAI,CAACD,IAAI,CAAC;wBACzB,IAAIA,IAAI,CAACtG,IAAI,KAAK,QAAQ,EAAE8F,eAAe,CAACU,GAAG,CAACF,IAAI,CAAChG,MAAM,CAAC;oBAChE;gBACJ,CAAC,CAAC;YACN;YAEA,IAAIiF,mBAAmB,CAACK,IAAI,EAAE;gBAC1BL,mBAAmB,CAACK,IAAI,CAACS,OAAO,CAAC,CAACI,IAAI,EAAE,GAAG,KAAK;oBAC5C,IAAI,CAACX,eAAe,CAACY,GAAG,CAACD,IAAI,CAAC7G,EAAE,CAAC,EAAE;wBAC/BiG,cAAc,CAACU,IAAI,CAAC;4BAChB3G,EAAE,EAAE,CAAA,KAAA,EAAQ6G,IAAI,CAAC7G,EAAE,EAAE;4BACrBU,MAAM,EAAEmG,IAAI,CAAC7G,EAAE;4BACfW,QAAQ,EAAEkG,IAAI,CAACjF,QAAQ,IAAIiF,IAAI,CAAChF,SAAS,IAAI,MAAM;4BACnDjB,UAAU,EAAEiG,IAAI,CAAC/E,UAAU,IAAI,CAAA,4BAAA,EAA+B+E,IAAI,CAAC7G,EAAE,EAAE;4BACvEa,WAAW,EAAE,uBAAuB;4BACpCC,eAAe,EAAE,IAAIR,IAAI,CAACuG,IAAI,CAACnF,UAAU,IAAIpB,IAAI,CAACyG,GAAG,CAAC,CAAC,CAAC;4BACxDhG,WAAW,EAAE,CAAC;4BACdC,MAAM,EAAE6F,IAAI,CAACG,SAAS,IAAI,KAAK;4BAC/B/F,MAAM,EAAE,KAAK;4BACbb,IAAI,EAAE,QAAQ;4BACdc,GAAG,EAAE2F,IAAI,CAAC3F,GAAG;4BACbC,MAAM,EAAE0F,IAAI,CAAC1F,MAAAA;wBACjB,CAAC,CAAC;oBACN;gBACJ,CAAC,CAAC;YACN;YAEA8C,QAAQ,EAACgD,IAAI,IAAI;gBACb,MAAMC,MAAM,GAAG,CAAC;uBAAGjB,cAAc;iBAAC,CAACkB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,GAAKA,CAAC,CAACvG,eAAe,CAACwG,OAAO,CAAC,CAAC,GAAGF,CAAC,CAACtG,eAAe,CAACwG,OAAO,CAAC,CAAC,CAAC;gBAC5G,IAAIhC,IAAI,CAACiC,SAAS,CAACN,IAAI,CAAC,KAAK3B,IAAI,CAACiC,SAAS,CAACL,MAAM,CAAC,EAAE,OAAOD,IAAI;gBAChE,OAAOC,MAAM;YACjB,CAAC,CAAC;QACN,CAAC,CAAC,OAAOM,KAAK,EAAE;YACZC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;QACrD,CAAC,QAAS;YACNhD,aAAa,CAACE,OAAO,GAAG,KAAK;QACjC;IACJ,CAAC;IAED,MAAM6B,gBAAgB,GAAG,MAAAA,CAAOD,MAAI,EAAE,GAAG,CAAC,EAAEhE,OAAO,CAAC7B,IAAI,GAAG,IAAI,CAAC,IAAI;QAChE,MAAMiH,YAAY,GAAG,MAAM7H,yKAAW,CAAC8H,mBAAmB,CAACrB,MAAI,CAACtG,EAAE,CAAC;QACnE,MAAM,EAAEgG,IAAI,EAAE4B,IAAAA,EAAM,GAAG,MAAM/H,yKAAW,CAACgI,WAAW,CAACvB,MAAI,CAACtG,EAAE,EAAE,CAAC,EAAE,KAAK,CAAC;QACvE,MAAM8H,OAAO,GAAGF,IAAI,EAAA,CAAG,CAAC,CAAC;QAEzB,IAAItB,MAAI,CAAClG,IAAI,KAAK,QAAQ,EAAE;YACxB,MAAM2H,SAAS,GAAGL,YAAY,CAAC1B,IAAI,EAAEgC,IAAI,EAACC,CAAC,GAAIA,CAAC,CAACjI,EAAE,KAAKgE,IAAI,EAAEhE,EAAE,CAAC;YACjE,IAAI+H,SAAS,EAAE;gBACX,MAAM,EAAEG,KAAAA,EAAO,GAAG,MAAM5D,QAAQ,CAC3B6D,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC,GAAG,EAAE;oBAAEF,KAAK,EAAE,OAAO;oBAAEG,IAAI,EAAE;gBAAK,CAAC,CAAC,CAC3CC,EAAE,CAAC,SAAS,EAAEhC,MAAI,CAACtG,EAAE,CAAC,CACtBuI,GAAG,CAAC,SAAS,EAAEvE,IAAI,EAAEhE,EAAE,CAAC,CACxBuI,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC;gBAE1B,OAAO;oBACHvI,EAAE,EAAEsG,MAAI,CAACtG,EAAE;oBACXU,MAAM,EAAEqH,SAAS,CAAC/H,EAAE;oBACpBW,QAAQ,EAAEoH,SAAS,CAACnG,QAAQ,IAAImG,SAAS,CAAClG,SAAS,IAAI,MAAM;oBAC7DjB,UAAU,EAAEmH,SAAS,CAACjG,UAAU,IAAI,CAAA,4BAAA,EAA+BiG,SAAS,CAAC/H,EAAE,EAAE;oBACjFa,WAAW,EAAEiH,OAAO,EAAE3H,OAAO,IAAI,qBAAqB;oBACtDW,eAAe,EAAEgH,OAAO,GAAG,IAAIxH,IAAI,CAACwH,OAAO,CAACpG,UAAU,CAAC,GAAG,IAAIpB,IAAI,CAACgG,MAAI,CAAC5E,UAAU,CAAC;oBACnFX,WAAW,EAAEmH,KAAK,IAAI,CAAC;oBACvBlH,MAAM,EAAE+G,SAAS,CAACf,SAAS,IAAI,KAAK;oBACpC/F,MAAM,EAAE,KAAK;oBACbb,IAAI,EAAE,QAAQ;oBACdc,GAAG,EAAE6G,SAAS,CAAC7G,GAAG;oBAClBC,MAAM,EAAE4G,SAAS,CAAC5G,MAAAA;gBACtB,CAAC;YACL;QACJ,CAAC,MAAM;YACH,MAAM,EAAE+G,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM5D,QAAQ,CAC3B6D,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC,GAAG,EAAE;gBAAEF,KAAK,EAAE,OAAO;gBAAEG,IAAI,EAAE;YAAK,CAAC,CAAC,CAC3CC,EAAE,CAAC,SAAS,EAAEhC,MAAI,CAACtG,EAAE,CAAC,CACtBuI,GAAG,CAAC,SAAS,EAAEvE,IAAI,EAAEhE,EAAE,CAAC,CACxBuI,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC;YAE1B,MAAMnH,WAAW,GAAGsG,YAAY,CAAC1B,IAAI,EAAEwC,MAAM,EAACP,GAAC,GAAIA,GAAC,CAACjB,SAAS,CAAC,CAACyB,MAAM,IAAI,CAAC;YAC3E,MAAMpH,WAAW,GAAGqG,YAAY,CAAC1B,IAAI,EAAEyC,MAAM,IAAI,CAAC;YAElD,OAAO;gBACHzI,EAAE,EAAEsG,MAAI,CAACtG,EAAE;gBACXU,MAAM,EAAE4F,MAAI,CAACtG,EAAE;gBACfW,QAAQ,EAAE2F,MAAI,CAAChD,IAAI,IAAI,cAAc;gBACrC1C,UAAU,EAAE0F,MAAI,CAACxE,UAAU,IAAI,CAAA,iCAAA,EAAoC4G,kBAAkB,CAACpC,MAAI,CAAChD,IAAI,IAAI,GAAG,CAAC,CAAA,4BAAA,CAA8B;gBACrIzC,WAAW,EAAEiH,OAAO,EAAE3H,OAAO,IAAI,2BAA2B;gBAC5DW,eAAe,EAAEgH,OAAO,GAAG,IAAIxH,IAAI,CAACwH,OAAO,CAACpG,UAAU,CAAC,GAAG,IAAIpB,IAAI,CAACgG,MAAI,CAAC5E,UAAU,CAAC;gBACnFX,WAAW,EAAEmH,OAAK,IAAI,CAAC;gBACvBlH,MAAM,EAAEI,WAAW,GAAG,CAAC;gBACvBA,WAAW;gBACXC,WAAW;gBACXC,WAAW,EAAEgF,MAAI,CAAChF,WAAW,IAAI,8BAA8B;gBAC/DC,SAAS,EAAE+E,MAAI,CAACqC,UAAU;gBAC1B1H,MAAM,EAAE,KAAK;gBACbb,IAAI,EAAE;YACV,CAAC;QACL;QACA,OAAO,IAAI;IACf,CAAC;IAED,MAAMyE,aAAa,GAAGA,CAAA,KAAM;QACxBK,eAAe,CAAC,CAAC;QACjB,IAAI,CAAClB,IAAI,EAAEhE,EAAE,EAAE;QAEf,MAAM4I,OAAO,GAAGtE,QAAQ,CACnBsE,OAAO,CAAC,aAAa,EAAE;YACpBC,MAAM,EAAE;gBACJC,SAAS,EAAE;oBAAEC,IAAI,EAAE;gBAAM,CAAC;gBAC1BC,QAAQ,EAAE;oBAAEC,GAAG,EAAEjF,IAAI,CAAChE,EAAAA;gBAAG;YAC7B;QACJ,CAAC,CAAC,CACDkJ,EAAE,CAAC,kBAAkB,EAAE;YAAEC,KAAK,EAAE,QAAQ;YAAEC,MAAM,EAAE,QAAQ;YAAEC,KAAK,EAAE;QAAW,CAAC,EAAE,OAAOC,OAAO,IAAK;YACjG,MAAMC,UAAU,GAAGD,OAAO,CAACE,GAAG,IAAI1J,WAAW;YAE7C,IAAIyJ,UAAU,CAACE,OAAO,KAAKzF,IAAI,EAAEhE,EAAE,IAAIuJ,UAAU,CAAChJ,MAAM,KAAK,MAAM,EAAE;gBACjEV,yKAAW,CAAC6J,mBAAmB,CAACH,UAAU,CAACvJ,EAAE,EAAE,WAAW,CAAC;YAC/D;YAEA,MAAM2J,YAAY,EAAE5J,CAAU,MAAH;gBACvBC,EAAE,EAAEuJ,UAAU,CAACvJ,EAAE;gBACjBC,MAAM,EAAEsJ,UAAU,CAACK,OAAO;gBAC1B1J,QAAQ,EAAEqJ,UAAU,CAACE,OAAO;gBAC5BtJ,OAAO,EAAEoJ,UAAU,CAACpJ,OAAO;gBAC3BC,IAAI,EAAEmJ,UAAU,CAACM,YAAY,IAAI,GAAG;gBACpCxJ,SAAS,EAAE,IAAIC,IAAI,CAACiJ,UAAU,CAAC7H,UAAU,CAAC;gBAC1CnB,MAAM,EAAEgJ,UAAU,CAAChJ,MAAM;gBACzBC,QAAQ,EAAE+I,UAAU,CAACO,SAAAA;YACzB,CAAC;YAED5F,WAAW,EAAC+C,MAAI,IAAI;gBAChB,MAAM8C,WAAW,GAAG9C,MAAI,CAACsC,UAAU,CAACK,OAAO,CAAC,IAAI,EAAE;gBAClD,IAAIG,WAAW,CAACC,IAAI,EAACC,CAAC,GAAIA,CAAC,CAACjK,EAAE,KAAK2J,YAAY,CAAC3J,EAAE,CAAC,EAAE,OAAOiH,MAAI;gBAChE,OAAO;oBAAE,GAAGA,MAAI;oBAAE,CAACsC,UAAU,CAACK,OAAO,CAAA,EAAG,CAAC;2BAAGG,WAAW;wBAAEJ,YAAY;qBAAA;gBAAE,CAAC;YAC5E,CAAC,CAAC;YAEF7G,YAAY,CAAC,CAAC;QAClB,CAAC,CAAC,CACDoG,EAAE,CAAC,kBAAkB,EAAE;YAAEC,KAAK,EAAE,QAAQ;YAAEC,MAAM,EAAE,QAAQ;YAAEC,KAAK,EAAE;QAAW,CAAC,GAAGC,SAAO,IAAK;YAC3F,MAAMY,UAAU,GAAGZ,SAAO,CAACE,GAAG,IAAI1J,WAAW;YAC7CoE,WAAW,EAAC+C,MAAI,IAAI;gBAChB,MAAMkD,QAAQ,GAAGlD,MAAI,CAACiD,UAAU,CAACN,OAAO,CAAC,IAAI,EAAE;gBAC/C,OAAO;oBACH,GAAG3C,MAAI;oBACP,CAACiD,UAAU,CAACN,OAAO,CAAA,EAAGO,QAAQ,CAAC9D,GAAG,EAAC4D,GAAC,GAAIA,GAAC,CAACjK,EAAE,KAAKkK,UAAU,CAAClK,EAAE,GAAG;4BAAE,GAAGiK,GAAC;4BAAE1J,MAAM,EAAE2J,UAAU,CAAC3J,MAAAA;wBAAO,CAAC,GAAG0J,GAAC;gBAC5G,CAAC;YACL,CAAC,CAAC;QACN,CAAC,CAAC,CACDf,EAAE,CAAC,kBAAkB,EAAE;YAAEC,KAAK,EAAE,QAAQ;YAAEC,MAAM,EAAE,QAAQ;YAAEC,KAAK,EAAE;QAAW,CAAC,GAAGC,SAAO,IAAK;YAC3F,MAAMc,cAAc,GAAGd,SAAO,CAACE,GAAG;YAClCvF,QAAQ,EAACgD,MAAI,GAAIA,MAAI,CAACZ,GAAG,EAACK,MAAI,GAAIA,MAAI,CAAChG,MAAM,KAAK0J,cAAc,CAACpK,EAAE,GAAG;wBAAE,GAAG0G,MAAI;wBAAE1F,MAAM,EAAEoJ,cAAc,CAACpD,SAAAA;oBAAU,CAAC,GAAGN,MAAI,CAAC,CAAC;QAChI,CAAC,CAAC,CACDwC,EAAE,CAAC,kBAAkB,EAAE;YAAEC,KAAK,EAAE,GAAG;YAAEC,MAAM,EAAE,QAAQ;YAAEC,KAAK,EAAE,aAAa;YAAEb,MAAM,EAAE,CAAA,gBAAA,EAAmBxE,IAAI,CAAChE,EAAE,EAAA;QAAG,CAAC,EAAE,YAAY;YAC9H,MAAM,EAAEgG,IAAI,EAAEqE,QAAAA,EAAU,GAAG,MAAMxK,yKAAW,CAACiG,kBAAkB,CAAC,CAAC;YACjE,IAAIuE,QAAQ,EAAElG,kBAAkB,CAACkG,QAAQ,CAAC;QAC9C,CAAC,CAAC,CACDnB,EAAE,CAAC,kBAAkB,EAAE;YAAEC,KAAK,EAAE,QAAQ;YAAEC,MAAM,EAAE,QAAQ;YAAEC,KAAK,EAAE,mBAAmB;YAAEb,MAAM,EAAE,CAAA,WAAA,EAAcxE,IAAI,CAAChE,EAAE,EAAA;QAAG,CAAC,EAAE,MAAM;YAC9H8C,YAAY,CAAC,CAAC;QAClB,CAAC,CAAC,CACDoG,EAAE,CAAC,WAAW,EAAE;YAAEC,KAAK,EAAE;QAAS,CAAC,GAAGG,SAAO,IAAK;YAC/C,MAAM,EAAErJ,MAAM,EAAES,MAAM,EAAE+B,QAAAA,EAAU,GAAG6G,SAAO,CAACA,OAAO;YACpD,IAAI5I,MAAM,KAAKsD,IAAI,EAAEhE,EAAE,EAAE;YACzBiE,QAAQ,EAACgD,MAAI,GAAIA,MAAI,CAACZ,GAAG,CAACK,MAAI,IAAIA,MAAI,CAAC1G,EAAE,KAAKC,MAAM,GAAG;wBAAE,GAAGyG,MAAI;wBAAEzF,MAAM,EAAEwB;oBAAS,CAAC,GAAGiE,MAAI,CAAC,CAAC;QACjG,CAAC,CAAC,CACD4D,SAAS,CAAC,CAAC;QAEhB/F,UAAU,CAACG,OAAO,GAAGkE,OAAO;IAChC,CAAC;IAED,MAAMvG,WAAW,GAAG,MAAAA,CAAOpC,QAAM,EAAE,AAAQE,MAAF,CAAS,EAAE,AAAQC,IAAI,EAAE,AAAR,CAAiB,KAAH,CAAS,EAAEI,QAAiB,CAAR,EAAE,MAAM,KAAK;QACrG,MAAM,EAAEwF,IAAI,EAAEuE,OAAO,EAAE/C,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM3H,yKAAW,CAACwC,WAAW,CAACpC,QAAM,EAAEE,OAAO,EAAEC,IAAI,EAAEI,QAAQ,CAAC;QAC/F,IAAIgH,OAAK,EAAE,MAAM,IAAIgD,KAAK,CAAChD,OAAK,CAAC;QAEjC,IAAI+C,OAAO,EAAE;YACT,MAAMZ,cAAY,EAAE5J,CAAU,MAAH;gBACvBC,EAAE,EAAEuK,OAAO,CAACvK,EAAE;gBACdC,MAAM,EAAEsK,OAAO,CAACX,OAAO;gBACvB1J,QAAQ,EAAEqK,OAAO,CAACd,OAAO;gBACzBtJ,OAAO,EAAEoK,OAAO,CAACpK,OAAO;gBACxBC,IAAI,EAAEmK,OAAO,CAACV,YAAY,IAAI,GAAG;gBACjCxJ,SAAS,EAAE,IAAIC,IAAI,CAACiK,OAAO,CAAC7I,UAAU,CAAC;gBACvCnB,MAAM,EAAEgK,OAAO,CAAChK,MAAM;gBACtBC,QAAQ,EAAE+J,OAAO,CAACT,SAAAA;YACtB,CAAC;YAED5F,WAAW,EAAC+C,MAAI,IAAI;gBAChB,MAAM8C,aAAW,GAAG9C,MAAI,CAAChH,QAAM,CAAC,IAAI,EAAE;gBACtC,IAAI8J,aAAW,CAACC,IAAI,EAACC,GAAC,GAAIA,GAAC,CAACjK,EAAE,KAAK2J,cAAY,CAAC3J,EAAE,CAAC,EAAE,OAAOiH,MAAI;gBAChE,OAAO;oBAAE,GAAGA,MAAI;oBAAE,CAAChH,QAAM,CAAA,EAAG,CAAC;2BAAG8J,aAAW;wBAAEJ,cAAY;qBAAA;gBAAE,CAAC;YAChE,CAAC,CAAC;QACN;IACJ,CAAC;IAED,MAAMpH,UAAU,GAAG,MAAAA,CAAOtC,QAAM,EAAE,MAAM,KAAK;QACzC,IAAI,CAAC+D,IAAI,EAAEhE,EAAE,EAAE;QACf,MAAMH,yKAAW,CAAC4K,cAAc,CAACxK,QAAM,EAAE+D,IAAI,CAAChE,EAAE,CAAC;QACjDiE,QAAQ,EAACgD,MAAI,GAAIA,MAAI,CAACZ,GAAG,EAACK,MAAI,GAAIA,MAAI,CAAC1G,EAAE,KAAKC,QAAM,GAAG;oBAAE,GAAGyG,MAAI;oBAAE3F,WAAW,EAAE;gBAAE,CAAC,GAAG2F,MAAI,CAAC,CAAC;QAC3FxC,WAAW,CAAC+C,MAAI,IAAI;YAChB,MAAMkD,UAAQ,GAAGlD,MAAI,CAAChH,QAAM,CAAC;YAC7B,IAAI,CAACkK,UAAQ,EAAE,OAAOlD,MAAI;YAC1B,OAAO;gBAAE,GAAGA,MAAI;gBAAE,CAAChH,QAAM,CAAA,EAAGkK,UAAQ,CAAC9D,GAAG,EAAC4D,GAAC,GAAIA,GAAC,CAAC/J,QAAQ,KAAK8D,IAAI,CAAChE,EAAE,GAAG;wBAAE,GAAGiK,GAAC;wBAAE1J,MAAM,EAAE;oBAAO,CAAC,GAAG0J,GAAC;YAAE,CAAC;QAC1G,CAAC,CAAC;IACN,CAAC;IAED,MAAMzH,SAAS,GAAG,MAAAA,CAAOvC,QAAM,EAAE,AAAQwC,MAAF,IAAU,EAAE,OAAO,KAAK;QAC3D,IAAI8B,UAAU,CAACG,OAAO,EAAE;YACpB,MAAMH,UAAU,CAACG,OAAO,CAACgG,IAAI,CAAC;gBAC1BtK,IAAI,EAAE,WAAW;gBACjB+I,KAAK,EAAE,QAAQ;gBACfG,OAAO,EAAE;oBAAErJ,MAAM,EAANA,QAAM;oBAAES,MAAM,EAAEsD,IAAI,EAAEhE,EAAE;oBAAEyC,QAAQ,EAARA;gBAAS;YAClD,CAAC,CAAC;QACN;IACJ,CAAC;IAED,MAAMC,UAAU,GAAG,MAAAA,CAAOhC,QAAM,EAAE,AAAQC,MAAF,EAAU,EAAE,AAAQC,MAAF,IAAY,EAAE,MAAM,CAAC,EAAE0B,OAAO,CAAC,MAAM,CAAC,IAAI;QAChG,MAAM,EAAE0D,IAAI,EAAE9C,MAAM,EAAEsE,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM3H,yKAAW,CAAC8K,gBAAgB,CAACjK,QAAM,CAAC;QAC1E,IAAI8G,OAAK,EAAE,MAAM,IAAIgD,KAAK,CAAChD,OAAK,CAAC;QACjC,MAAM7C,eAAe,CAAC,CAAC;QACvB,OAAOzB,MAAM,CAAC;IAClB,CAAC;IAED,MAAMP,WAAW,GAAG,MAAAA,CAAOjC,QAAM,EAAE,MAAM,KAAK;QAC1C,MAAM,EAAE8G,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM3H,yKAAW,CAAC+K,qBAAqB,CAAClK,QAAM,CAAC;QACjE,IAAI8G,OAAK,EAAE,MAAM,IAAIgD,KAAK,CAAChD,OAAK,CAAC;IACrC,CAAC;IAED,MAAM5E,gBAAgB,GAAG,MAAAA,CAAOC,SAAS,EAAE,AAAQtC,MAAF,AAAQ,EAAE,UAAU,GAAG,UAAU,CAAC,EAAE+B,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI;QAC3G+B,UAAU,CAAC,IAAI,CAAC;QAChB,MAAM,EAAE2B,IAAI,EAAE9C,QAAM,EAAEsE,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM3H,yKAAW,CAACgL,mBAAmB,CAAChI,SAAS,EAAEtC,MAAM,CAAC;QACxF,IAAIiH,OAAK,EAAE;YACPnD,UAAU,CAAC,KAAK,CAAC;YACjB,OAAO,IAAI;QACf;QACAF,kBAAkB,EAAC8C,MAAI,GAAIA,MAAI,CAACuB,MAAM,EAACsC,CAAC,GAAIA,CAAC,CAAC9K,EAAE,KAAK6C,SAAS,CAAC,CAAC;QAChE,MAAM8B,eAAe,CAAC,CAAC;QACvBN,UAAU,CAAC,KAAK,CAAC;QACjB,OAAOnB,QAAM;IACjB,CAAC;IAED,MAAMC,aAAa,GAAG,MAAAA,CAAOlD,QAAM,EAAE,MAAM,KAAK;QAC5C,MAAM,EAAE+F,IAAI,EAAEwB,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM3H,yKAAW,CAACgI,WAAW,CAAC5H,QAAM,CAAC;QAC7D,IAAI,CAACuH,OAAK,IAAIxB,IAAI,EAAE;YAChB,MAAM+E,aAAa,EAAEhL,CAAYiG,IAAI,CAACK,CAAV,EAAE,AAAW,CAAC4D,GAAC,IAAA,CAAK;oBAC5CjK,EAAE,EAAEiK,GAAC,CAACjK,EAAE;oBACRC,MAAM,EAAEgK,GAAC,CAACL,OAAO;oBACjB1J,QAAQ,EAAE+J,GAAC,CAACR,OAAO;oBACnBtJ,OAAO,EAAE8J,GAAC,CAAC9J,OAAO;oBAClBC,IAAI,EAAE6J,GAAC,CAACJ,YAAY,IAAI,GAAG;oBAC3BxJ,SAAS,EAAE,IAAIC,IAAI,CAAC2J,GAAC,CAACvI,UAAU,CAAC;oBACjCnB,MAAM,EAAE0J,GAAC,CAAC1J,MAAM;oBAChBC,QAAQ,EAAEyJ,GAAC,CAACH,SAAAA;gBAChB,CAAC,CAAC,CAAC;YACH5F,WAAW,EAAC+C,MAAI,GAAA,CAAK;oBAAE,GAAGA,MAAI;oBAAE,CAAChH,QAAM,CAAA,EAAG8K;gBAAc,CAAC,CAAC,CAAC;QAC/D;IACJ,CAAC;IAED,MAAMjI,YAAY,GAAG,MAAAA,CAAA,KAAY;QAC7B,MAAM6B,eAAe,CAAC,CAAC;IAC3B,CAAC;IAED,MAAM5B,SAAS,GAAG,MAAAA,CAAOrC,QAAM,EAAE,MAAM,KAAK;QACxC,MAAM,EAAE8G,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM3H,yKAAW,CAACkD,SAAS,CAACrC,QAAM,CAAC;QACrD,IAAI8G,OAAK,EAAE,MAAM,IAAIgD,KAAK,CAAChD,OAAK,CAAC;QACjC,MAAM1E,YAAY,CAAC,CAAC;IACxB,CAAC;IAED,MAAME,WAAW,GAAG,MAAAA,CAAOtC,QAAM,EAAE,MAAM,KAAK;QAC1C,MAAM,EAAE8G,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM3H,yKAAW,CAACmD,WAAW,CAACtC,QAAM,CAAC;QACvD,IAAI8G,OAAK,EAAE,MAAM,IAAIgD,KAAK,CAAChD,OAAK,CAAC;QACjC,MAAM1E,YAAY,CAAC,CAAC;IACxB,CAAC;IAED,MAAMG,WAAW,GAAG,MAAAA,CAAOC,QAAM,EAAE,MAAM,KAAK;QAC1C,MAAM,EAAEsE,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM3H,yKAAW,CAACmL,UAAU,CAAC9H,QAAM,CAAC;QACtD,IAAIsE,OAAK,EAAE,MAAM,IAAIgD,KAAK,CAAChD,OAAK,CAAC;QACjC,MAAM1E,YAAY,CAAC,CAAC;IACxB,CAAC;IAED,MAAMM,WAAW,GAAG,MAAAA,CAAOF,QAAM,EAAE,AAAQG,MAAF,CAAS,EAAE;QAChD,MAAM,EAAEmE,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM3H,yKAAW,CAACoL,UAAU,CAAC/H,QAAM,EAAEG,OAAO,CAAC;QAC/D,IAAImE,OAAK,EAAE,MAAM,IAAIgD,KAAK,CAAChD,OAAK,CAAC;QACjC,MAAM1E,YAAY,CAAC,CAAC;IACxB,CAAC;IAED,MAAMS,eAAe,GAAG,MAAAA,CAAOL,QAAM,EAAE,MAAM,KAAK;QAC9C,MAAM,EAAE8C,IAAI,EAAJA,MAAI,EAAEwB,KAAK,EAALA,OAAAA,EAAO,GAAG,MAAM3H,yKAAW,CAACqL,2BAA2B,CAAChI,QAAM,CAAC;QAC7E,IAAIsE,OAAK,EAAE,MAAM,IAAIgD,KAAK,CAAChD,OAAK,CAAC;QACjC,OAAOxB,MAAI,IAAI,EAAE;IACrB,CAAC;IAED,MAAMvC,QAAQ,GAAG,MAAAA,CAAOxD,QAAM,EAAE,AAAQyD,GAAG,EAAE,CAAP,KAAa,KAAK;QACpD,MAAMyH,OAAO,GAAG;YAAE,GAAG3H,WAAW;YAAE,CAACvD,QAAM,CAAA,EAAGyD;QAAI,CAAC;QACjDU,cAAc,CAAC+G,OAAO,CAAC;QACvB/F,YAAY,CAACgG,OAAO,CAAC,cAAc,EAAE9F,IAAI,CAACiC,SAAS,CAAC4D,OAAO,CAAC,CAAC;IACjE,CAAC;IAED,MAAMxH,UAAU,GAAG,MAAAA,CAAO1D,QAAM,EAAE,MAAM,KAAK;QACzC,MAAMkL,SAAO,GAAG;YAAE,GAAG3H,WAAAA;QAAY,CAAC;QAClC,OAAO2H,SAAO,CAAClL,QAAM,CAAC;QACtBmE,cAAc,CAAC+G,SAAO,CAAC;QACvB/F,YAAY,CAACgG,OAAO,CAAC,cAAc,EAAE9F,IAAI,CAACiC,SAAS,CAAC4D,SAAO,CAAC,CAAC;IACjE,CAAC;IAED,qBACI,kNAAC,WAAW,CAAC,QAAQ;QAAC,KAAK,CAAC,CAAC;YACzBnJ,KAAK;YAAEC,QAAQ;YAAEE,eAAe;YAAEC,OAAO;YAAEC,WAAW;YAAEE,UAAU;YAAEC,SAAS;YAAEE,UAAU;YAAEC,WAAW;YAAEC,gBAAgB;YAAEE,YAAY;YAAEC,SAAS;YAAEC,WAAW;YAAEC,WAAW;YAAEE,aAAa;YAAEC,WAAW;YAAEG,eAAe;YACxNC,WAAW;YAAEC,QAAQ;YAAEE;QAC3B,CAAC,CAAC;kBACGI,QAAQ;;;;;;AAGrB;GArYgBD,YAAYA;;QACPnE,sKAAO,CAAC,CAAC;;;;AAsYvB;;IAAA,MAAA2L,CAAA,OAAAnM,qMAAA,EAAA;IAAA,IAAAmM,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IACH,MAAAI,OAAA,OAAgBhM,gMAAU,EAACkE,WAAW,CAAC;IACvC,IAAI,CAAC8H,OAAO,EAAA;QAAE,MAAM,IAAIlB,KAAK,CAAC,0CAA0C,CAAC;IAAC;IAAA,OACnEkB,OAAO;AAAA;IAHXL,QAAA","ignoreList":[]}},
    {"offset": {"line": 1396, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/services/status-service.ts"],"sourcesContent":["import { safeSupabaseOperation } from '@/lib/supabase/client';\n\nexport interface StatusUpdate {\n    id: string;\n    user_id: string;\n    media_url: string;\n    caption: string | null;\n    created_at: string;\n    profiles?: any;\n}\n\nexport const StatusService = {\n    async getStatuses(): Promise<{ data: StatusUpdate[]; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                // Fetch statuses from the last 24 hours\n                const twentyFourHoursAgo = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString();\n\n                const { data, error } = await client\n                    .from('statuses')\n                    .select(`\n            *,\n            profiles (\n              id,\n              username,\n              full_name,\n              avatar_url\n            )\n          `)\n                    .gt('created_at', twentyFourHoursAgo)\n                    .order('created_at', { ascending: false });\n\n                if (error) return { data: [], error: error.message };\n                return { data: (data as StatusUpdate[]) || [], error: null };\n            });\n        } catch (err: any) {\n            return { data: [], error: err.message };\n        }\n    },\n\n    async uploadStatus(mediaUrl: string, caption?: string): Promise<{ error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) throw new Error('Not authenticated');\n\n                const { error } = await client\n                    .from('statuses')\n                    .insert({\n                        user_id: user.id,\n                        media_url: mediaUrl,\n                        caption\n                    });\n\n                if (error) return { error: error.message };\n                return { error: null };\n            });\n        } catch (err: any) {\n            return { error: err.message };\n        }\n    },\n\n    async uploadMedia(file: File): Promise<{ data: string | null; error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            try {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) throw new Error('Not authenticated');\n\n                console.log('[StatusService] Starting upload for file:', file.name);\n\n                const fileExt = file.name.split('.').pop();\n                const fileName = `${user.id}_${Date.now()}.${fileExt}`;\n                const filePath = `${fileName}`;\n\n                const { error: uploadError } = await client.storage\n                    .from('status-uploads')\n                    .upload(filePath, file, {\n                        contentType: file.type,\n                        upsert: false\n                    });\n\n                if (uploadError) {\n                    console.error('[StatusService] Upload error:', uploadError);\n                    throw uploadError;\n                }\n\n                const { data } = client.storage\n                    .from('status-uploads')\n                    .getPublicUrl(filePath);\n\n                console.log('[StatusService] Upload successful, URL:', data.publicUrl);\n                return { data: data.publicUrl, error: null };\n            } catch (err: any) {\n                console.error('[StatusService] Upload failed:', err);\n                return { data: null, error: err.message };\n            }\n        });\n    }\n};\n"],"names":[],"mappings":";;;;AAAA;;AAWO,MAAM,gBAAgB;IACzB,MAAM;QACF,IAAI;YACA,OAAO,MAAM,IAAA,iLAAqB,EAAC,OAAO;gBACtC,wCAAwC;gBACxC,MAAM,qBAAqB,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK,KAAK,MAAM,WAAW;gBAEjF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,OACzB,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;;;;;;UAQnB,CAAC,EACU,EAAE,CAAC,cAAc,oBACjB,KAAK,CAAC,cAAc;oBAAE,WAAW;gBAAM;gBAE5C,IAAI,OAAO,OAAO;oBAAE,MAAM,EAAE;oBAAE,OAAO,MAAM,OAAO;gBAAC;gBACnD,OAAO;oBAAE,MAAM,AAAC,QAA2B,EAAE;oBAAE,OAAO;gBAAK;YAC/D;QACJ,EAAE,OAAO,KAAU;YACf,OAAO;gBAAE,MAAM,EAAE;gBAAE,OAAO,IAAI,OAAO;YAAC;QAC1C;IACJ;IAEA,MAAM,cAAa,QAAgB,EAAE,OAAgB;QACjD,IAAI;YACA,OAAO,MAAM,IAAA,iLAAqB,EAAC,OAAO;gBACtC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,OAAO,IAAI,CAAC,OAAO;gBACpD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;gBAE3B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,OACnB,IAAI,CAAC,YACL,MAAM,CAAC;oBACJ,SAAS,KAAK,EAAE;oBAChB,WAAW;oBACX;gBACJ;gBAEJ,IAAI,OAAO,OAAO;oBAAE,OAAO,MAAM,OAAO;gBAAC;gBACzC,OAAO;oBAAE,OAAO;gBAAK;YACzB;QACJ,EAAE,OAAO,KAAU;YACf,OAAO;gBAAE,OAAO,IAAI,OAAO;YAAC;QAChC;IACJ;IAEA,MAAM,aAAY,IAAU;QACxB,OAAO,MAAM,IAAA,iLAAqB,EAAC,OAAO;YACtC,IAAI;gBACA,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,OAAO,IAAI,CAAC,OAAO;gBACpD,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;gBAE3B,QAAQ,GAAG,CAAC,6CAA6C,KAAK,IAAI;gBAElE,MAAM,UAAU,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;gBACxC,MAAM,WAAW,GAAG,KAAK,EAAE,CAAC,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,SAAS;gBACtD,MAAM,WAAW,GAAG,UAAU;gBAE9B,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,OAAO,OAAO,CAC9C,IAAI,CAAC,kBACL,MAAM,CAAC,UAAU,MAAM;oBACpB,aAAa,KAAK,IAAI;oBACtB,QAAQ;gBACZ;gBAEJ,IAAI,aAAa;oBACb,QAAQ,KAAK,CAAC,iCAAiC;oBAC/C,MAAM;gBACV;gBAEA,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,OAAO,CAC1B,IAAI,CAAC,kBACL,YAAY,CAAC;gBAElB,QAAQ,GAAG,CAAC,2CAA2C,KAAK,SAAS;gBACrE,OAAO;oBAAE,MAAM,KAAK,SAAS;oBAAE,OAAO;gBAAK;YAC/C,EAAE,OAAO,KAAU;gBACf,QAAQ,KAAK,CAAC,kCAAkC;gBAChD,OAAO;oBAAE,MAAM;oBAAM,OAAO,IAAI,OAAO;gBAAC;YAC5C;QACJ;IACJ;AACJ"}},
    {"offset": {"line": 1498, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/contexts/status-context.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useState, useContext, useEffect, ReactNode } from 'react';\nimport { useAuth } from './auth-context';\nimport { StatusService, StatusUpdate } from '@/services/status-service';\nimport { createClient } from '@/lib/supabase/client';\n\ninterface StatusContextType {\n    statuses: StatusUpdate[];\n    loading: boolean;\n    uploadStatus: (mediaUrl: string, caption?: string) => Promise<void>;\n    refreshStatuses: () => Promise<void>;\n}\n\nconst StatusContext = createContext<StatusContextType | undefined>(undefined);\n\nexport function StatusProvider({ children }: { children: ReactNode }) {\n    const [statuses, setStatuses] = useState<StatusUpdate[]>([]);\n    const [loading, setLoading] = useState(true);\n    const { user } = useAuth();\n    const supabase = createClient();\n\n    const loadStatuses = async () => {\n        setLoading(true);\n        const { data } = await StatusService.getStatuses();\n        if (data) setStatuses(data);\n        setLoading(false);\n    };\n\n    useEffect(() => {\n        if (user) {\n            loadStatuses();\n\n            const channel = supabase\n                .channel('public-statuses')\n                .on('postgres_changes', { event: '*', schema: 'public', table: 'statuses' }, () => {\n                    loadStatuses();\n                })\n                .subscribe();\n\n            return () => {\n                supabase.removeChannel(channel);\n            };\n        }\n    }, [user?.id]);\n\n    const uploadStatus = async (mediaUrl: string, caption?: string) => {\n        const { error } = await StatusService.uploadStatus(mediaUrl, caption);\n        if (error) throw new Error(error);\n    };\n\n    return (\n        <StatusContext.Provider value={{\n            statuses,\n            loading,\n            uploadStatus,\n            refreshStatuses: loadStatuses\n        }}>\n            {children}\n        </StatusContext.Provider>\n    );\n}\n\nexport function useStatus() {\n    const context = useContext(StatusContext);\n    if (!context) throw new Error('useStatus must be used within StatusProvider');\n    return context;\n}\n"],"names":["c","_c","React","createContext","useState","useContext","useEffect","ReactNode","useAuth","StatusService","StatusUpdate","createClient","StatusContextType","statuses","loading","uploadStatus","mediaUrl","caption","Promise","refreshStatuses","StatusContext","undefined","StatusProvider","t0","$","$i","Symbol","for","children","t1","setStatuses","setLoading","user","t2","supabase","t3","StatusProvider[loadStatuses]","data","getStatuses","loadStatuses","t4","StatusProvider[useEffect()]","channel","on","event","schema","table","StatusProvider[useEffect() > (anonymous)()]","subscribe","removeChannel","t5","id","t6","_StatusProviderUploadStatus","t7","t8","error","Error","useStatus","context"],"mappings":";;;;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,OAAOC,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,EAAEC,SAAS,QAAQ,OAAO;AACxF,SAASC,OAAO,QAAQ,gBAAgB;AACxC,SAASC,aAAa,EAAEC,YAAY,QAAQ,2BAA2B;AACvE,SAASC,YAAY,QAAQ,uBAAuB;;;AALpD,YAAY;;;;;;AAcZ,MAAMS,aAAa,qBAAGjB,mMAAa,CAACS,CAA+BS,SAAS,CAAC,MAAxB,GAAG,SAAS,CAAC;AAE3D,wBAAAE,EAAA;;IAAA,MAAAC,CAAA,OAAAvB,qMAAA,EAAA;IAAA,IAAAuB,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,IAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAwB,MAAA,EAAAI,QAAAA,EAAA,GAAAL,EAAqC;IAAA,IAAAM,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QACPE,EAAA,GAAA,EAAE;QAAAL,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IAA3D,MAAA,CAAAX,QAAA,EAAAiB,WAAA,CAAA,OAAgC1B,8LAAQ,EAAiByB,EAAE,CAAC;IAC5D,MAAA,CAAAf,OAAA,EAAAiB,UAAA,CAAA,OAA8B3B,8LAAQ,EAAC,IAAI,CAAC;IAC5C,MAAA,EAAA4B,IAAAA,EAAA;IAA2B,IAAAC,EAAA;IAAA,IAAAT,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QACVM,EAAA,OAAAtB,wKAAY,CAAC,CAAC;QAAAa,CAAA,CAAA,EAAA,GAAAS,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAT,CAAA,CAAA,EAAA;IAAA;IAA/B,MAAAU,QAAA,GAAiBD,EAAc;IAAC,IAAAE,EAAA;IAAA,IAAAX,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAEXQ,EAAA,GAAA,CAAA;YAAA,gCAAA,MAAAC,CAAA;gBACjBL,UAAU,CAAC,IAAI,CAAC;gBAChB,MAAA,EAAAM,IAAAA,EAAA,GAAiB,MAAM5B,6KAAa,CAAA6B,WAAY,CAAC,CAAC;gBAClD,IAAID,IAAI,EAAA;oBAAEP,WAAW,CAACO,IAAI,CAAC;gBAAA;gBAC3BN,UAAU,CAAC,KAAK,CAAC;YAAA;SAAA,CAAA,CAAA,+BACpB;QAAAP,CAAA,CAAA,EAAA,GAAAW,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAX,CAAA,CAAA,EAAA;IAAA;IALD,MAAAe,YAAA,GAAqBJ,EAKpB;IAAC,IAAAK,EAAA;IAAA,IAAAhB,CAAA,CAAA,EAAA,KAAAQ,IAAA,EAAA;QAEQQ,EAAA,GAAA,CAAA;YAAA,+BAAAC,CAAA;gBACN,IAAIT,IAAI,EAAA;oBACJO,YAAY,CAAC,CAAC;oBAEd,MAAAG,OAAA,GAAgBR,QAAQ,CAAAQ,OACZ,CAAC,iBAAiB,CAAC,CAAAC,EACxB,CAAC,kBAAkB,EAAE;wBAAAC,KAAA,EAAS,GAAG;wBAAAC,MAAA,EAAU,QAAQ;wBAAAC,KAAA,EAAS;oBAAW,CAAC,EAAE;wBAAA,+CAAAC,CAAA;4BACzER,YAAY,CAAC,CAAC;wBAAA;oBAAA,CAAA,CAAA,8CACjB,CAAC,CAAAS,SACQ,CAAC,CAAC;oBAAC,OAEV;wBACHd,QAAQ,CAAAe,aAAc,CAACP,OAAO,CAAC;oBAAA,CAClC;gBAAA;YACJ;SAAA,CAAA,CAAA,8BACJ;QAAAlB,CAAA,CAAA,EAAA,GAAAQ,IAAA;QAAAR,CAAA,CAAA,EAAA,GAAAgB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAhB,CAAA,CAAA,EAAA;IAAA;IAAG,MAAA0B,EAAA,GAAAlB,IAAI,EAAAmB,EAAI;IAAA,IAAAC,EAAA;IAAA,IAAA5B,CAAA,CAAA,EAAA,KAAA0B,EAAA,EAAA;QAATE,EAAA,GAAA;YAACF,EAAQ;SAAC;QAAA1B,CAAA,CAAA,EAAA,GAAA0B,EAAA;QAAA1B,CAAA,CAAA,EAAA,GAAA4B,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAA5B,CAAA,CAAA,EAAA;IAAA;QAfblB,+LAAS,EAACkC,EAeT,EAAEY,EAAU,CAAC;IAEd,MAAArC,YAAA,GAAqBsC,2BAGpB;IAAC,IAAAC,EAAA;IAAA,IAAA9B,CAAA,CAAA,EAAA,KAAAV,OAAA,IAAAU,CAAA,CAAA,EAAA,KAAAX,QAAA,EAAA;QAGiCyC,EAAA,GAAA;YAAAzC,QAAA;YAAAC,OAAA;YAAAC,YAAA;YAAAI,eAAA,EAIVoB;QACrB,CAAC;QAAAf,CAAA,CAAA,EAAA,GAAAV,OAAA;QAAAU,CAAA,CAAA,EAAA,GAAAX,QAAA;QAAAW,CAAA,CAAA,GAAA,GAAA8B,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAA9B,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA+B,EAAA;IAAA,IAAA/B,CAAA,CAAA,GAAA,KAAAI,QAAA,IAAAJ,CAAA,CAAA,GAAA,KAAA8B,EAAA,EAAA;QALDC,EAAA,iBAAA,kNAAA,cAAA,QAAA;YAA+B,KAK9B,CAL8B,CAAAD,EAK/B,CAAC,CACI1B;sBAAAA,QAAO,CACZ,yBAAyB;;;;;;QAAAJ,CAAA,CAAA,GAAA,GAAAI,QAAA;QAAAJ,CAAA,CAAA,GAAA,GAAA8B,EAAA;QAAA9B,CAAA,CAAA,GAAA,GAAA+B,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAA/B,CAAA,CAAA,GAAA;IAAA;IAAA,OAPzB+B,EAOyB;AAAA;;;QAxCZ/C,sKAAO,CAAC,CAAC;;;KAHvBc;AAAA,eAAA+B,4BAAArC,QAAA,EAAAC,OAAA;IA+BC,MAAA,EAAAuC,KAAAA,EAAA,GAAkB,MAAM/C,6KAAa,CAAAM,YAAa,CAACC,QAAQ,EAAEC,OAAO,CAAC;IACrE,IAAIuC,KAAK,EAAA;QAAE,MAAM,IAAIC,KAAK,CAACD,KAAK,CAAC;IAAC;AAAA;AAenC;;IAAA,MAAAhC,CAAA,OAAAvB,qMAAA,EAAA;IAAA,IAAAuB,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IACH,MAAAmC,OAAA,OAAgBtD,gMAAU,EAACe,aAAa,CAAC;IACzC,IAAI,CAACuC,OAAO,EAAA;QAAE,MAAM,IAAIF,KAAK,CAAC,8CAA8C,CAAC;IAAC;IAAA,OACvEE,OAAO;AAAA;IAHXD,UAAA","ignoreList":[]}},
    {"offset": {"line": 1672, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,8LAAO,EAAC,IAAA,qKAAI,EAAC;AACtB"}},
    {"offset": {"line": 1690, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/ui/avatar.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\";\n\ninterface AvatarProps {\n    src?: string | null;\n    fallback: string;\n    className?: string;\n}\n\nexport function Avatar({ src, fallback, className }: AvatarProps) {\n    return (\n        <div className={cn(\"relative w-10 h-10 rounded-full overflow-hidden bg-muted flex items-center justify-center\", className)}>\n            {src ? (\n                <img src={src} alt={fallback} className=\"w-full h-full object-cover\" />\n            ) : (\n                <span className=\"font-medium text-muted-foreground uppercase\">{fallback.slice(0, 2)}</span>\n            )}\n        </div>\n    );\n}\n"],"names":["cn","AvatarProps","src","fallback","className","Avatar","t0","$","_c","$i","Symbol","for","t1","t2","slice","t3"],"mappings":";;;;;;AAAA,SAASA,EAAE,QAAQ,aAAa;;;;AAQzB,gBAAAM,EAAA;IAAA,MAAAC,CAAA,OAAAC,qMAAA,EAAA;IAAA,IAAAD,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAE,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAF,CAAA,CAAAE,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAJ,CAAA,CAAA,EAAA,GAAA;IAAA;IAAgB,MAAA,EAAAL,GAAA,EAAAC,QAAA,EAAAC,SAAAA,EAAA,GAAAE,EAAyC;IAAA,IAAAM,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAH,SAAA,EAAA;QAExCQ,EAAA,OAAAZ,iJAAE,EAAC,2FAA2F,EAAEI,SAAS,CAAC;QAAAG,CAAA,CAAA,EAAA,GAAAH,SAAA;QAAAG,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAM,EAAA;IAAA,IAAAN,CAAA,CAAA,EAAA,KAAAJ,QAAA,IAAAI,CAAA,CAAA,EAAA,KAAAL,GAAA,EAAA;QACrHW,EAAA,GAAAX,GAAG,iBACA,kNAAA,GAAuE;YAA7DA,GAAG,CAAHA,CAAAA,GAAE,CAAC;YAAOC,GAAQ,CAARA,CAAAA,QAAO,CAAC;YAAY,SAA4B,EAA5B,4BAA4B,GAGvE;;;;;iCADG,kNAAA,IAA2F;YAA3E,SAA6C,EAA7C,6CAA6C,CAAE;sBAAAA,QAAQ,CAAAW,KAAM,CAAC,CAAC,EAAE,CAAC,EAAE,EAApF,IAA2F,CAC9F;;;;;;QAAAP,CAAA,CAAA,EAAA,GAAAJ,QAAA;QAAAI,CAAA,CAAA,EAAA,GAAAL,GAAA;QAAAK,CAAA,CAAA,EAAA,GAAAM,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAN,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAQ,EAAA;IAAA,IAAAR,CAAA,CAAA,EAAA,KAAAK,EAAA,IAAAL,CAAA,CAAA,EAAA,KAAAM,EAAA,EAAA;QALLE,EAAA,iBAAA,kNAAA,GAMM;YANU,SAA0G,CAA1G,CAAAH,EAAyG,CAAC,CACrH;sBAAAC,EAID,CACJ,EANA,GAMM;;;;;;QAAAN,CAAA,CAAA,EAAA,GAAAK,EAAA;QAAAL,CAAA,CAAA,EAAA,GAAAM,EAAA;QAAAN,CAAA,CAAA,EAAA,GAAAQ,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAR,CAAA,CAAA,EAAA;IAAA;IAAA,OANNQ,EAMM;AAAA;KARPV","ignoreList":[]}},
    {"offset": {"line": 1769, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/call-overlay.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { Mic, MicOff, Video, VideoOff, PhoneOff, Maximize2, Minimize2 } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Avatar } from \"./ui/avatar\";\nimport { useCall } from \"@/contexts/call-context\";\n\ninterface CallOverlayProps {\n    roomId: string;\n    currentUser: any;\n    minimize?: boolean;\n    onClose?: () => void;\n}\n\nexport function CallOverlay({ roomId, currentUser, minimize = false, onClose }: CallOverlayProps) {\n    const { localStream, remoteStream, callType, connectionState, signalingStatus, iceCandidateCount } = useCall();\n    const [isMinimized, setIsMinimized] = useState(minimize);\n    const [isMuted, setIsMuted] = useState(false);\n    const [isVideoOff, setIsVideoOff] = useState(false);\n\n    // Refs for media elements\n    const localVideoRef = useRef<HTMLVideoElement>(null);\n    const remoteVideoRef = useRef<HTMLVideoElement>(null);\n\n    useEffect(() => {\n        if (localVideoRef.current && localStream) {\n            localVideoRef.current.srcObject = localStream;\n        }\n    }, [localStream]);\n\n    useEffect(() => {\n        if (remoteVideoRef.current && remoteStream) {\n            remoteVideoRef.current.srcObject = remoteStream;\n            remoteVideoRef.current.play().catch(e => console.error(\"Error auto-playing video:\", e));\n        }\n    }, [remoteStream]);\n\n\n    const toggleMinimize = () => setIsMinimized(!isMinimized);\n\n    const toggleMute = () => {\n        if (localStream) {\n            localStream.getAudioTracks().forEach(track => track.enabled = !track.enabled);\n            setIsMuted(!isMuted);\n        }\n    }\n\n    const toggleVideo = () => {\n        if (localStream) {\n            localStream.getVideoTracks().forEach(track => track.enabled = !track.enabled);\n            setIsVideoOff(!isVideoOff);\n        }\n    }\n\n    const isAudioOnly = callType === 'audio';\n\n    return (\n        <div className={cn(\n            \"fixed transition-all duration-500 ease-in-out bg-black/90 backdrop-blur-md shadow-2xl border border-white/10 overflow-hidden z-50\",\n            isMinimized\n                ? \"bottom-4 right-4 w-72 h-48 rounded-2xl\"\n                : \"inset-4 rounded-3xl\"\n        )}>\n            {/* DEBUG OVERLAY */}\n            <div className=\"absolute top-4 left-4 z-50 bg-black/50 p-2 rounded text-xs text-white/70 font-mono pointer-events-none\">\n                <div>Signal: {signalingStatus}</div>\n                <div>WebRTC: {connectionState}</div>\n                <div>Candidates: {iceCandidateCount}</div>\n                <div>Type: {callType}</div>\n                <div>L-Tracks: {localStream?.getTracks().length || 0}</div>\n                <div>R-Tracks: {remoteStream?.getTracks().length || 0}</div>\n            </div>\n\n            {/* Main Video Area */}\n            <div className=\"relative w-full h-full flex items-center justify-center\">\n                {/* Remote Video or Audio Avatar */}\n                <div className=\"w-full h-full bg-zinc-900 flex items-center justify-center relative\">\n                    {/* Show Avatar if Audio Only OR No Remote Stream yet */}\n                    {(isAudioOnly || !remoteStream) && (\n                        <div className=\"flex flex-col items-center animate-pulse\">\n                            <Avatar fallback=\"Remote\" className=\"w-32 h-32 bg-zinc-800 text-zinc-500 mb-6 text-4xl\" />\n                            <p className=\"text-zinc-400 text-lg font-medium\">\n                                {connectionState === 'connected' ? 'Connected' : 'Connecting...'}\n                            </p>\n                        </div>\n                    )}\n\n                    {/* Video Element - Hidden if Audio Only */}\n                    <video\n                        ref={remoteVideoRef}\n                        autoPlay\n                        playsInline\n                        className={cn(\"absolute inset-0 w-full h-full object-cover\", (isAudioOnly || !remoteStream) && \"opacity-0 pointer-events-none\")}\n                    />\n                </div>\n\n                {/* Local Video (PIP) - Only show if Video Call */}\n                {!isAudioOnly && (\n                    <div className={cn(\n                        \"absolute transition-all duration-300 bg-zinc-800 rounded-xl overflow-hidden shadow-lg border border-white/10 z-10\",\n                        isMinimized ? \"hidden\" : \"top-4 right-4 w-48 h-36\"\n                    )}>\n                        <div className=\"w-full h-full flex items-center justify-center relative bg-black\">\n                            {!localStream && <span className=\"text-xs text-muted-foreground\">You</span>}\n                            <video ref={localVideoRef} autoPlay muted playsInline className=\"w-full h-full object-cover transform -scale-x-100\" />\n                        </div>\n                    </div>\n                )}\n\n                {/* Controls Overlay */}\n                <div className={cn(\n                    \"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/80 to-transparent flex flex-col items-center justify-end transition-opacity z-20\",\n                    isMinimized ? \"opacity-0 hover:opacity-100\" : \"opacity-100\"\n                )}>\n                    {!isMinimized && (\n                        <div className=\"mb-8 text-center\">\n                            <h3 className=\"text-2xl font-bold text-white\">\n                                {isAudioOnly ? \"Voice Call\" : \"Video Call\"}\n                            </h3>\n                            <div className=\"flex items-center justify-center gap-2\">\n                                <span className={cn(\"w-2 h-2 rounded-full\", connectionState === 'connected' ? \"bg-green-500\" : \"bg-yellow-500\")}></span>\n                                <p className=\"text-white/60 capitalize\">{connectionState}</p>\n                            </div>\n                        </div>\n                    )}\n\n                    <div className=\"flex items-center gap-4\">\n                        <button onClick={toggleMute} className={cn(\"p-4 rounded-full transition-all\", isMuted ? \"bg-white text-black\" : \"bg-white/10 text-white hover:bg-white/20\")}>\n                            {isMuted ? <MicOff className=\"w-6 h-6\" /> : <Mic className=\"w-6 h-6\" />}\n                        </button>\n\n                        <button onClick={toggleVideo} className={cn(\"p-4 rounded-full transition-all\", isVideoOff ? \"bg-white text-black\" : \"bg-white/10 text-white hover:bg-white/20\")}>\n                            {isVideoOff ? <VideoOff className=\"w-6 h-6\" /> : <Video className=\"w-6 h-6\" />}\n                        </button>\n\n                        <button\n                            onClick={onClose}\n                            className=\"p-4 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all shadow-lg hover:shadow-red-500/30 scale-100 hover:scale-110\"\n                        >\n                            <PhoneOff className=\"w-8 h-8\" />\n                        </button>\n\n                        <button onClick={toggleMinimize} className=\"p-4 rounded-full bg-white/10 text-white hover:bg-white/20 transition-all\">\n                            {isMinimized ? <Maximize2 className=\"w-6 h-6\" /> : <Minimize2 className=\"w-6 h-6\" />}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":["c","_c","useEffect","useRef","useState","Mic","MicOff","Video","VideoOff","PhoneOff","Maximize2","Minimize2","cn","Avatar","useCall","CallOverlayProps","roomId","currentUser","minimize","onClose","CallOverlay","t0","$","$i","Symbol","for","t1","undefined","localStream","remoteStream","callType","connectionState","signalingStatus","iceCandidateCount","isMinimized","setIsMinimized","isMuted","setIsMuted","isVideoOff","setIsVideoOff","localVideoRef","remoteVideoRef","t2","t3","CallOverlay[useEffect()]","current","srcObject","t4","t5","play","catch","_CallOverlayUseEffectAnonymous","t6","CallOverlay[toggleMinimize]","toggleMinimize","t7","CallOverlay[toggleMute]","getAudioTracks","forEach","_CallOverlayToggleMuteAnonymous","toggleMute","t8","CallOverlay[toggleVideo]","getVideoTracks","_CallOverlayToggleVideoAnonymous","toggleVideo","isAudioOnly","t9","t10","t11","t12","t13","t14","t15","getTracks","length","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","t31","t32","t33","t34","t35","t36","t37","t38","t39","t40","t41","t42","t43","t44","track_0","track","enabled","e","console","error"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2507, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/services/call-service.ts"],"sourcesContent":["import { safeSupabaseOperation } from '@/lib/supabase/client';\n\nexport interface Call {\n    id: string;\n    room_id: string | null;\n    caller_id: string;\n    type: 'audio' | 'video';\n    status: 'ringing' | 'accepted' | 'rejected' | 'missed' | 'ended';\n    duration: number;\n    created_at: string;\n    ended_at: string | null;\n    profiles?: {\n        id: string;\n        username: string;\n        full_name: string;\n        avatar_url: string;\n    };\n    offer_sdp?: any;\n    answer_sdp?: any;\n    receiver_id?: string;\n}\n\nexport const CallService = {\n    async initiateCall(receiverId: string, type: 'audio' | 'video', offerSdp: any, roomId?: string): Promise<{ data: Call | null; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) throw new Error('Not authenticated');\n\n                // Check if blocked\n                const { data: blocked } = await client\n                    .from('blocked_users')\n                    .select('id')\n                    .or(`and(blocker_id.eq.${user.id},blocked_id.eq.${receiverId}),and(blocker_id.eq.${receiverId},blocked_id.eq.${user.id})`)\n                    .maybeSingle();\n\n                if (blocked) {\n                    throw new Error('User is blocked');\n                }\n\n                const { data, error } = await client\n                    .from('calls')\n                    .insert({\n                        caller_id: user.id,\n                        receiver_id: receiverId || null,\n                        room_id: roomId || null,\n                        type,\n                        status: 'ringing',\n                        offer_sdp: offerSdp\n                    })\n                    .select()\n                    .single();\n\n                if (error) return { data: null, error: error.message };\n                return { data: data as Call, error: null };\n            });\n        } catch (err: any) {\n            return { data: null, error: err.message };\n        }\n    },\n\n    async updateCallStatus(callId: string, status: Call['status'], answerSdp?: any): Promise<{ error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const updateData: any = { status };\n                if (answerSdp) updateData.answer_sdp = answerSdp;\n\n                if (status === 'ended' || status === 'rejected' || status === 'missed') {\n                    updateData.ended_at = new Date().toISOString();\n\n                    // Calculate duration if it's ending\n                    if (status === 'ended') {\n                        const { data: call } = await client.from('calls').select('created_at').eq('id', callId).single();\n                        if (call) {\n                            const start = new Date(call.created_at).getTime();\n                            const end = new Date().getTime();\n                            updateData.duration = Math.floor((end - start) / 1000);\n                        }\n                    }\n                }\n\n                const { error } = await client\n                    .from('calls')\n                    .update(updateData)\n                    .eq('id', callId);\n\n                return { error: error?.message || null };\n            });\n        } catch (err: any) {\n            return { error: err.message };\n        }\n    },\n\n    async sendIceCandidate(callId: string, candidate: any): Promise<{ error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) return { error: 'Not authenticated' };\n\n                const { error } = await client\n                    .from('ice_candidates')\n                    .insert({\n                        call_id: callId,\n                        sender_id: user.id,\n                        candidate: candidate // Should be object\n                    });\n                return { error: error?.message || null };\n            });\n        } catch (err: any) {\n            return { error: err.message };\n        }\n    },\n\n    async getIceCandidates(callId: string): Promise<{ data: any[]; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data, error } = await client\n                    .from('ice_candidates')\n                    .select('*')\n                    .eq('call_id', callId)\n                    .order('created_at', { ascending: true });\n\n                return { data: data || [], error: error?.message || null };\n            });\n        } catch (err: any) {\n            return { data: [], error: err.message };\n        }\n    },\n\n    async getMessages(roomId: string, limit: number = 50, ascending: boolean = false): Promise<{ data: any[]; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data, error } = await client\n                    .from('messages')\n                    .select(`\n                        *,\n                        profiles:user_id (\n                            id, username, full_name, avatar_url, gender\n                        )\n                    `)\n                    .eq('room_id', roomId)\n                    .order('created_at', { ascending })\n                    .limit(limit);\n                return { data: data || [], error: error?.message || null };\n            });\n        } catch (err: any) {\n            return { data: [], error: err.message };\n        }\n    },\n\n    async getCallHistory(): Promise<{ data: Call[]; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) throw new Error('Not authenticated');\n\n                const { data, error } = await client\n                    .from('calls')\n                    .select(`\n                        *,\n                        caller:caller_id (id, username, full_name, avatar_url, gender),\n                        receiver:receiver_id (id, username, full_name, avatar_url, gender)\n                    `)\n                    .or(`caller_id.eq.${user.id},receiver_id.eq.${user.id}`)\n                    .neq('status', 'ringing')\n                    .order('created_at', { ascending: false });\n\n                if (error) return { data: [], error: error.message };\n                return { data: data as Call[] || [], error: null };\n            });\n        } catch (err: any) {\n            return { data: [], error: err.message };\n        }\n    }\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2677, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/contexts/call-context.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useEffect, useRef, useState } from \"react\";\n\nimport { createClient } from \"@/lib/supabase/client\";\nimport { RealtimeChannel } from \"@supabase/supabase-js\";\nimport { CallOverlay } from \"@/components/call-overlay\";\nimport { CallService } from \"@/services/call-service\";\n\ndeclare global {\n    interface Window {\n        iceErrorShown: boolean;\n    }\n}\n\ninterface CallContextType {\n    isInCall: boolean;\n    isIncomingCall: boolean;\n    callDetails: any;\n    startCall: (roomId: string, isVideo?: boolean) => Promise<void>;\n    acceptCall: () => Promise<void>;\n    endCall: () => Promise<void>;\n    localStream: MediaStream | null;\n    remoteStream: MediaStream | null;\n    callType: \"video\" | \"audio\";\n    connectionState: string;\n    signalingStatus: string;\n    iceCandidateCount: number;\n    callHistory: any[];\n    loading: boolean;\n    initiateCall: (receiverId: string, type: 'audio' | 'video') => Promise<void>;\n}\n\nconst CallContext = createContext<CallContextType | null>(null);\n\nexport function useCall() {\n    const context = useContext(CallContext);\n    if (!context) throw new Error(\"useCall must be used within a CallProvider\");\n    return context;\n}\n\nimport { useAuth } from \"./auth-context\";\n\nexport function CallProvider({ children }: { children: React.ReactNode }) {\n    const { user } = useAuth();\n    const [callDetails, setCallDetails] = useState<any>(null);\n    const [localStream, setLocalStream] = useState<MediaStream | null>(null);\n    const [remoteStream, setRemoteStream] = useState<MediaStream | null>(null);\n    const [incomingCall, setIncomingCall] = useState<any>(null);\n    const [callType, setCallType] = useState<\"video\" | \"audio\">(\"video\");\n    const [connectionState, setConnectionState] = useState<string>(\"new\");\n    const [signalingStatus, setSignalingStatus] = useState<string>(\"disconnected\");\n    const [iceCandidateCount, setIceCandidateCount] = useState<number>(0);\n    const [callHistory, setCallHistory] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    // WebRTC refs\n    const peerConnection = useRef<RTCPeerConnection | null>(null);\n    const supabase = createClient();\n    const signalingChannel = useRef<RealtimeChannel | null>(null);\n\n\n\n    const candidateQueue = useRef<any[]>([]); // Queue for early candidates\n\n    // ICE servers (STUN) - Expanded list for better connectivity\n    const pcConfig = {\n        iceServers: [\n            { urls: 'stun:stun.l.google.com:19302' },\n            { urls: 'stun:stun1.l.google.com:19302' },\n            { urls: 'stun:stun2.l.google.com:19302' },\n            { urls: 'stun:global.stun.twilio.com:3478' }\n        ]\n    };\n\n    // 1. Listen for incoming calls\n    useEffect(() => {\n        if (!user) return;\n\n        console.log(\"Listening for calls on user channel:\", user.id);\n        const channel = supabase\n            .channel(`calls:${user.id}`)\n            .on(\n                'postgres_changes',\n                { event: 'INSERT', schema: 'public', table: 'calls', filter: `caller_id=neq.${user.id}` }, // Simply listening for ANY insert might be too broad if not filtering by recipients, but schema is simple. \n                // Wait, the schema 'calls' table has 'room_id'. It doesn't explicitly have 'recipient_id'. \n                // We should probably listen to \"calls\" where I am in the \"room_participants\". \n                // For simplicity/MVP, I'll listen to ALL INSERTs on 'calls' and then check if I'm in the room (client-side filtering) or if it's meant for me.\n                // Actually, a better query would be filtering by my user ID if I had a 'recipient_id' column.\n                // Given current schema, I will subscribe to the global 'calls' table but in a real app this is bad. \n                // Let's rely on the fact that we can subscribe to changes on the Calls table.\n                async (payload) => {\n                    console.log(\"New call detected:\", payload);\n                    // Check if I am a participant in this room?\n                    // For now, let's just show it if it's NOT my own call.\n                    if (payload.new.caller_id !== user.id && payload.new.status === 'active') {\n                        // TODO: Verify if user belongs to payload.new.room_id\n                        setIncomingCall(payload.new);\n                    }\n                }\n            )\n            .subscribe();\n\n        return () => {\n            supabase.removeChannel(channel);\n        };\n    }, [user, supabase]);\n\n    // 2. Fetch call history\n    useEffect(() => {\n        const fetchHistory = async () => {\n            setLoading(true);\n            const { data } = await CallService.getCallHistory();\n            if (data) setCallHistory(data);\n            setLoading(false);\n        };\n\n        if (user) {\n            fetchHistory();\n\n            // Subscribe to call changes to refresh history\n            const channel = supabase\n                .channel('call_history_updates')\n                .on('postgres_changes', { event: '*', schema: 'public', table: 'calls' }, () => {\n                    fetchHistory();\n                })\n                .subscribe();\n\n            return () => {\n                supabase.removeChannel(channel);\n            };\n        }\n    }, [user, supabase]);\n\n    // Cleanup on unmount\n    useEffect(() => {\n        return () => {\n            localStream?.getTracks().forEach(track => track.stop());\n            peerConnection.current?.close();\n        };\n    }, []);\n\n    // We need a ref to store the current call ID for the callback\n    const currentCallIdRef = useRef<string | null>(null);\n    const remoteCandidateQueue = useRef<RTCIceCandidateInit[]>([]); // Buffer for incoming candidates\n\n    const startCall = async (roomId: string, isVideo = true) => {\n        try {\n            setIceCandidateCount(0);\n            const type = isVideo ? 'video' : 'audio';\n            setCallType(type);\n\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n                alert(\"Browser not supported (getUserMedia missing).\");\n                return;\n            }\n\n            const stream = await navigator.mediaDevices.getUserMedia({ video: isVideo, audio: true });\n            setLocalStream(stream);\n\n            // Create PC first\n            const pc = new RTCPeerConnection(pcConfig);\n            peerConnection.current = pc;\n            remoteCandidateQueue.current = []; // Reset queue\n\n            // Standard \"Add Track\" pattern\n            stream.getTracks().forEach(track => {\n                pc.addTrack(track, stream);\n            });\n\n            // Force ALL transceivers to sendrecv (ensure bidirectional)\n            pc.getTransceivers().forEach(t => {\n                if (t.direction !== 'stopped') {\n                    t.direction = 'sendrecv';\n                }\n            });\n\n            // Queue for local candidates generated before Call ID is ready\n            const localQueuedCandidates: RTCIceCandidate[] = [];\n\n            // Bind ICE handler IMMEDIATELY\n            pc.onicecandidate = async (event) => {\n                if (event.candidate) {\n                    setIceCandidateCount(prev => prev + 1);\n\n                    if (currentCallIdRef.current) {\n                        // Call ID ready, send immediately\n                        const { error } = await supabase.from('ice_candidates').insert({\n                            call_id: currentCallIdRef.current,\n                            candidate: event.candidate,\n                            sender_id: user?.id\n                        });\n                        if (error) console.error(\"ICE Insert Error:\", error);\n                    } else {\n                        // Call ID not ready, queue it\n                        console.log(\"Queueing local candidate (Call ID not ready)\");\n                        localQueuedCandidates.push(event.candidate);\n                    }\n                }\n            };\n\n            // Bind other events\n            pc.ontrack = (event) => {\n                console.log(\"Track received:\", event.track.kind, event.streams[0]);\n                setRemoteStream(new MediaStream(event.streams[0].getTracks()));\n            };\n            pc.onconnectionstatechange = () => {\n                console.log(\"Connection state changes:\", pc.connectionState);\n                setConnectionState(pc.connectionState);\n            };\n\n\n\n            // Create Offer\n            const offer = await pc.createOffer();\n            await pc.setLocalDescription(offer);\n\n            // Create Call in DB\n            const { data: call, error } = await supabase.from('calls').insert({\n                room_id: roomId,\n                caller_id: user?.id,\n                status: 'active',\n                offer: offer,\n                type: type\n            }).select().single();\n\n            if (error) throw error;\n\n            setCallDetails(call);\n            currentCallIdRef.current = call.id; // Set ref for ICE callback\n\n            // FLUSH QUEUED CANDIDATES\n            if (localQueuedCandidates.length > 0) {\n                console.log(`Flushing ${localQueuedCandidates.length} queued local candidates`);\n                const inserts = localQueuedCandidates.map(c => ({\n                    call_id: call.id,\n                    candidate: c,\n                    sender_id: user?.id\n                }));\n                const { error: flushError } = await supabase.from('ice_candidates').insert(inserts);\n                if (flushError) console.error(\"Error flushing local candidates:\", flushError);\n            }\n\n            // Setup DB handlers\n            setupSignaling(call.id);\n\n\n\n        } catch (err: any) {\n            console.error(\"Error starting call:\", err);\n            alert(`Call failed: ${err.message}`);\n        }\n    };\n\n    const acceptCall = async () => {\n        if (!incomingCall) return;\n\n        try {\n            setIceCandidateCount(0);\n            // ... getUserMedia logic ...\n            const isVideo = incomingCall.type === 'video';\n            setCallType(incomingCall.type || 'video');\n\n            const stream = await navigator.mediaDevices.getUserMedia({ video: isVideo, audio: true });\n            setLocalStream(stream);\n\n            const pc = new RTCPeerConnection(pcConfig);\n            peerConnection.current = pc;\n            currentCallIdRef.current = incomingCall.id;\n            remoteCandidateQueue.current = []; // Reset queue\n\n            // Bind events IMMEDIATELY\n            pc.onicecandidate = async (event) => {\n                if (event.candidate) {\n                    setIceCandidateCount(prev => prev + 1);\n                    const { error } = await supabase.from('ice_candidates').insert({\n                        call_id: incomingCall.id,\n                        candidate: event.candidate,\n                        sender_id: user?.id\n                    });\n                    if (error) console.error(\"ICE Insert Error:\", error);\n                }\n            };\n\n            pc.ontrack = (event) => {\n                console.log(\"Track received:\", event.track.kind, event.streams[0]);\n                setRemoteStream(new MediaStream(event.streams[0].getTracks()));\n            };\n\n            pc.onconnectionstatechange = () => {\n                console.log(\"Connection state changes:\", pc.connectionState);\n                setConnectionState(pc.connectionState);\n            };\n\n            // 1. Set Offer FIRST (This creates the receivers/transceivers from the caller)\n            await pc.setRemoteDescription(new RTCSessionDescription(incomingCall.offer));\n\n            // 2. Add our tracks to the existing transceivers\n            stream.getTracks().forEach(track => {\n                try {\n                    pc.addTrack(track, stream);\n                } catch (e) {\n                    console.error(\"Error adding track:\", e);\n                }\n            });\n\n            // Force ALL transceivers to sendrecv (crucial for Receiver to send back)\n            pc.getTransceivers().forEach(t => {\n                if (t.direction !== 'stopped') {\n                    t.direction = 'sendrecv';\n                }\n            });\n\n\n\n\n\n            // Create Answer\n            const answer = await pc.createAnswer();\n            await pc.setLocalDescription(answer);\n\n            // Update DB - Answer\n            const { error: updateError } = await supabase.from('calls').update({\n                answer: answer,\n                status: 'active'\n            }).eq('id', incomingCall.id);\n\n            if (updateError) throw updateError;\n\n            setCallDetails(incomingCall);\n            setIncomingCall(null);\n\n            setupSignaling(incomingCall.id);\n\n            // Fetch existing candidates!\n            const { data: existingCandidates, error: fetchError } = await supabase\n                .from('ice_candidates')\n                .select('*')\n                .eq('call_id', incomingCall.id)\n                .neq('sender_id', user?.id || '');\n\n            if (fetchError) console.error(\"Error fetching candidates:\", fetchError);\n\n            if (existingCandidates) {\n                console.log(`Found ${existingCandidates.length} existing candidates`);\n                // If we are accepting, we have already set RemoteDescription (Offer) above.\n                // So we can add them safely.\n                existingCandidates.forEach(async (c) => {\n                    await pc.addIceCandidate(new RTCIceCandidate(c.candidate));\n                });\n            }\n\n        } catch (err: any) {\n            console.error(\"Error accepting call:\", err);\n            alert(`Accept call failed: ${err.message}`);\n        }\n    };\n\n    const endCall = async () => {\n        // Close connections\n        localStream?.getTracks().forEach(track => track.stop());\n        peerConnection.current?.close();\n\n        // Update DB\n        if (callDetails) {\n            await supabase.from('calls').update({ status: 'ended' }).eq('id', callDetails.id);\n        }\n\n        // Reset state\n        setLocalStream(null);\n        setRemoteStream(null);\n        setCallDetails(null);\n        setIncomingCall(null);\n        setConnectionState(\"new\"); // Reset connection state\n        if (signalingChannel.current) {\n            await supabase.removeChannel(signalingChannel.current);\n            signalingChannel.current = null;\n        }\n        currentCallIdRef.current = null;\n    };\n\n    const processCandidateQueue = async () => {\n        if (!peerConnection.current || !remoteCandidateQueue.current.length) return;\n\n        console.log(`Processing ${remoteCandidateQueue.current.length} queued remote candidates.`);\n        for (const candidate of remoteCandidateQueue.current) {\n            try {\n                await peerConnection.current.addIceCandidate(new RTCIceCandidate(candidate));\n            } catch (e) {\n                console.error(\"Error flushing candidate from queue:\", e);\n            }\n        }\n        remoteCandidateQueue.current = [];\n    };\n\n    const setupSignaling = (callId: string) => {\n        // Cleanup existing channel if any\n        if (signalingChannel.current) {\n            supabase.removeChannel(signalingChannel.current);\n            signalingChannel.current = null;\n        }\n\n        // Subscribe to Call Updates (Answer/Status) AND ICE Candidates\n        const channel = supabase.channel(`call_signaling:${callId}`);\n        setSignalingStatus(\"initializing\");\n\n        channel\n            // Listen for ICE Candidates inserted into DB\n            .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'ice_candidates', filter: `call_id=eq.${callId}` }, async (payload) => {\n                // Ignore my own candidates\n                if (payload.new.sender_id === user?.id) return;\n\n                if (peerConnection.current && peerConnection.current.signalingState !== 'closed') {\n                    console.log(\"Received new ICE candidate from DB via Realtime\");\n\n                    // Attempt to add, with fallback to queue\n                    const pc = peerConnection.current;\n                    const candidate = new RTCIceCandidate(payload.new.candidate);\n\n                    if (pc.remoteDescription && pc.signalingState !== 'have-local-offer') { // Extra check for stability\n                        try {\n                            await pc.addIceCandidate(candidate);\n                            console.log(\"Successfully added ICE candidate\");\n                        } catch (e: any) {\n                            console.error(\"Error adding live candidate:\", e);\n                            // Self-healing: If it failed due to remote description or state, QUEUE IT\n                            if (e.message?.includes(\"remote description\") || e.name === 'InvalidStateError') {\n                                console.log(\"Add failed (remote desc missing/invalid state). Re-queueing candidate.\");\n                                remoteCandidateQueue.current.push(payload.new.candidate);\n                            }\n                        }\n                    } else {\n                        console.log(\"Remote description not set (or unstable). Queueing candidate.\");\n                        remoteCandidateQueue.current.push(payload.new.candidate);\n                    }\n                }\n            })\n            // Listen for Call Updates (Answer, End)\n            .on('postgres_changes', { event: 'UPDATE', schema: 'public', table: 'calls', filter: `id=eq.${callId}` }, async (payload) => {\n                if (payload.new.answer && !peerConnection.current?.currentRemoteDescription) {\n                    console.log(\"Received Answer via Realtime\");\n                    const answer = payload.new.answer;\n                    await peerConnection.current?.setRemoteDescription(new RTCSessionDescription(answer));\n\n                    // Now that remote description is set, process any queued candidates\n                    await processCandidateQueue();\n                }\n\n                if (payload.new.status === 'ended') {\n                    endCall();\n                }\n            })\n            .subscribe((status) => {\n                console.log(\"Signaling Channel Status:\", status);\n                setSignalingStatus(status);\n            });\n\n        signalingChannel.current = channel;\n    };\n\n    const initiateCall = async (receiverId: string, type: 'audio' | 'video') => {\n        if (!user) return;\n\n        // Find existing DM room or create one\n        const { data: rooms } = await supabase\n            .from('room_participants')\n            .select('room_id')\n            .eq('user_id', user.id);\n\n        let roomId: string | null = null;\n\n        if (rooms && rooms.length > 0) {\n            const myRoomIds = rooms.map(r => r.room_id);\n            const { data: sharedRooms } = await supabase\n                .from('room_participants')\n                .select('room_id')\n                .eq('user_id', receiverId)\n                .in('room_id', myRoomIds);\n\n            if (sharedRooms && sharedRooms.length > 0) {\n                // Check if any of these is a DM\n                const { data: dmRoom } = await supabase\n                    .from('rooms')\n                    .select('id')\n                    .eq('is_group', false)\n                    .in('id', sharedRooms.map(r => r.room_id))\n                    .maybeSingle();\n\n                if (dmRoom) roomId = dmRoom.id;\n            }\n        }\n\n        if (!roomId) {\n            const { data: newRoom } = await supabase\n                .from('rooms')\n                .insert({ is_group: false, updated_at: new Date().toISOString() })\n                .select()\n                .single();\n\n            if (newRoom) {\n                roomId = newRoom.id;\n                await supabase.from('room_participants').insert([\n                    { room_id: roomId, user_id: user.id },\n                    { room_id: roomId, user_id: receiverId }\n                ]);\n            }\n        }\n\n        if (roomId) {\n            await startCall(roomId, type === 'video');\n        }\n    };\n\n    return (\n        <CallContext.Provider value={{\n            isInCall: !!callDetails,\n            isIncomingCall: !!incomingCall,\n            callDetails: callDetails || incomingCall,\n            startCall,\n            acceptCall,\n            endCall,\n            localStream,\n            remoteStream,\n            callType,\n            connectionState,\n            signalingStatus,\n            iceCandidateCount,\n            callHistory,\n            loading,\n            initiateCall\n        }}>\n            {children}\n            {/* Global Call Overlay */}\n            {incomingCall && !callDetails && (\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n                    <div className=\"glass-card p-8 rounded-2xl flex flex-col items-center gap-4 animate-float\">\n                        <div className=\"w-20 h-20 rounded-full bg-primary/20 flex items-center justify-center animate-pulse\">\n                            <div className=\"w-16 h-16 rounded-full bg-primary flex items-center justify-center text-white\">\n                                {incomingCall.type === 'audio' ? '' : ''}\n                            </div>\n                        </div>\n                        <h3 className=\"text-xl font-bold\">Incoming {incomingCall.type === 'audio' ? 'Voice' : 'Video'} Call...</h3>\n                        <div className=\"flex gap-4\">\n                            <button onClick={acceptCall} className=\"px-6 py-2 bg-green-500 rounded-full text-white font-medium hover:bg-green-600 transition-colors\">Accept</button>\n                            <button onClick={() => setIncomingCall(null)} className=\"px-6 py-2 bg-red-500 rounded-full text-white font-medium hover:bg-red-600 transition-colors\">Decline</button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {callDetails && (\n                <CallOverlay roomId={callDetails.room_id} currentUser={user} onClose={endCall} />\n            )}\n        </CallContext.Provider>\n    );\n}\n"],"names":["c","_c","createContext","useContext","useEffect","useRef","useState","createClient","RealtimeChannel","CallOverlay","CallService","global","Window","iceErrorShown","CallContextType","isInCall","isIncomingCall","callDetails","startCall","roomId","isVideo","Promise","acceptCall","endCall","localStream","MediaStream","remoteStream","callType","connectionState","signalingStatus","iceCandidateCount","callHistory","loading","initiateCall","receiverId","type","CallContext","useCall","$","$i","Symbol","for","context","Error","useAuth","CallProvider","children","React","ReactNode","user","setCallDetails","setLocalStream","setRemoteStream","incomingCall","setIncomingCall","setCallType","setConnectionState","setSignalingStatus","setIceCandidateCount","setCallHistory","setLoading","peerConnection","RTCPeerConnection","supabase","signalingChannel","candidateQueue","pcConfig","iceServers","urls","console","log","id","channel","on","event","schema","table","filter","payload","new","caller_id","status","subscribe","removeChannel","fetchHistory","data","getCallHistory","getTracks","forEach","track","stop","current","close","currentCallIdRef","remoteCandidateQueue","RTCIceCandidateInit","navigator","mediaDevices","getUserMedia","alert","stream","video","audio","pc","addTrack","getTransceivers","t","direction","localQueuedCandidates","RTCIceCandidate","onicecandidate","candidate","prev","error","from","insert","call_id","sender_id","push","ontrack","kind","streams","onconnectionstatechange","offer","createOffer","setLocalDescription","call","room_id","select","single","length","inserts","map","flushError","setupSignaling","err","message","setRemoteDescription","RTCSessionDescription","e","answer","createAnswer","updateError","update","eq","existingCandidates","fetchError","neq","addIceCandidate","processCandidateQueue","callId","signalingState","remoteDescription","includes","name","currentRemoteDescription","rooms","myRoomIds","r","sharedRooms","in","dmRoom","maybeSingle","newRoom","is_group","updated_at","Date","toISOString","user_id"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 3265, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/contexts/toast-context.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useCallback, ReactNode } from \"react\";\nimport { X, CheckCircle, AlertCircle, Info, AlertTriangle } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ntype ToastType = \"success\" | \"error\" | \"info\" | \"warning\";\n\ninterface Toast {\n    id: string;\n    message: string;\n    type: ToastType;\n}\n\ninterface ToastContextType {\n    toasts: Toast[];\n    addToast: (message: string, type?: ToastType) => void;\n    removeToast: (id: string) => void;\n}\n\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\n\nexport function ToastProvider({ children }: { children: ReactNode }) {\n    const [toasts, setToasts] = useState<Toast[]>([]);\n\n    const addToast = useCallback((message: string, type: ToastType = \"info\") => {\n        const id = Math.random().toString(36).substring(2, 9);\n        setToasts((prev) => [...prev, { id, message, type }]);\n\n        // Auto-remove after 3 seconds\n        setTimeout(() => {\n            setToasts((prev) => prev.filter((t) => t.id !== id));\n        }, 3000);\n    }, []);\n\n    const removeToast = useCallback((id: string) => {\n        setToasts((prev) => prev.filter((t) => t.id !== id));\n    }, []);\n\n    return (\n        <ToastContext.Provider value={{ toasts, addToast, removeToast }}>\n            {children}\n            <div className=\"fixed top-4 right-4 z-[100] flex flex-col gap-2 pointer-events-none\">\n                {toasts.map((toast) => (\n                    <div\n                        key={toast.id}\n                        className={cn(\n                            \"pointer-events-auto min-w-[300px] max-w-sm p-4 rounded-xl shadow-lg border backdrop-blur-md flex items-start gap-3 animate-in slide-in-from-right-full fade-in duration-300\",\n                            toast.type === \"success\" && \"bg-green-500/10 border-green-500/20 text-green-500\",\n                            toast.type === \"error\" && \"bg-red-500/10 border-red-500/20 text-red-500\",\n                            toast.type === \"warning\" && \"bg-yellow-500/10 border-yellow-500/20 text-yellow-500\",\n                            toast.type === \"info\" && \"bg-blue-500/10 border-blue-500/20 text-blue-500\"\n                        )}\n                    >\n                        {toast.type === \"success\" && <CheckCircle className=\"w-5 h-5 shrink-0\" />}\n                        {toast.type === \"error\" && <AlertCircle className=\"w-5 h-5 shrink-0\" />}\n                        {toast.type === \"warning\" && <AlertTriangle className=\"w-5 h-5 shrink-0\" />}\n                        {toast.type === \"info\" && <Info className=\"w-5 h-5 shrink-0\" />}\n\n                        <div className=\"flex-1 text-sm font-medium\">{toast.message}</div>\n\n                        <button onClick={() => removeToast(toast.id)} className=\"opacity-70 hover:opacity-100\">\n                            <X className=\"w-4 h-4\" />\n                        </button>\n                    </div>\n                ))}\n            </div>\n        </ToastContext.Provider>\n    );\n}\n\nexport function useToast() {\n    const context = useContext(ToastContext);\n    if (!context) {\n        throw new Error(\"useToast must be used within a ToastProvider\");\n    }\n    return context;\n}\n"],"names":["c","_c","React","createContext","useContext","useState","useCallback","ReactNode","X","CheckCircle","AlertCircle","Info","AlertTriangle","cn","ToastType","Toast","id","message","type","ToastContextType","toasts","addToast","removeToast","ToastContext","undefined","ToastProvider","t0","$","$i","Symbol","for","children","t1","setToasts","t2","ToastProvider[addToast]","t3","Math","random","toString","substring","prev","setTimeout","ToastProvider[addToast > setTimeout()]","prev_0","filter","t","id_0","prev_1","t_0","t4","t5","t6","toast","ToastProvider[toasts.map() > <button>.onClick]","map","t7","useToast","context","Error"],"mappings":";;;;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,OAAOC,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;;;AAC1F,SAASC,CAAC,EAAEC,WAAW,EAAEC,WAAW,EAAEC,IAAI,EAAEC,aAAa,QAAQ,cAAc;;;AAC/E,SAASC,EAAE,QAAQ,aAAa;;;AAJhC,YAAY;;;;;AAoBZ,MAAMU,YAAY,qBAAGpB,mMAAa,CAACgB,CAA8BK,SAAS,CAAC,KAAxB,GAAG,SAAS,CAAC;AAEzD,SAAAC,cAAAC,EAAA;;IAAA,MAAAC,CAAA,OAAA1B,qMAAA,EAAA;IAAA,IAAA0B,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,IAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAuB,MAAA,EAAAI,QAAAA,EAAA,GAAAL,EAAqC;IAAA,IAAAM,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QACjBE,EAAA,GAAA,EAAE;QAAAL,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IAAhD,MAAA,CAAAP,MAAA,EAAAa,SAAA,CAAA,OAA4B5B,8LAAQ,EAAU2B,EAAE,CAAC;IAAC,IAAAE,EAAA;IAAA,IAAAP,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAErBI,EAAA,GAAA,CAAA;YAAA,2BAAAC,CAAAlB,OAAA,EAAAmB,EAAA;gBAAkB,MAAAlB,IAAA,GAAAkB,EAAwB,KAAxBZ,SAAwB,GAAxB,MAAwB,GAAxBY,EAAwB;gBACnE,MAAApB,EAAA,GAAWqB,IAAI,CAAAC,MAAO,CAAC,CAAC,CAAAC,QAAS,CAAC,EAAE,CAAC,CAAAC,SAAU,CAAC,CAAC,EAAE,CAAC,CAAC;gBACrDP,SAAS,CAAC;oBAAA,yCAAAQ,IAAA,IAAU;+BAAIA,IAAI;4BAAE;gCAAAzB,EAAA;gCAAAC,OAAA;gCAAAC;4BAAoB,CAAC;yBAAA;gBAAC,CAAA,CAAA,wCAAA,CAAC;gBAGrDwB,UAAU,CAAC;oBAAA,0CAAAC,CAAA;wBACPV,SAAS,CAAC;4BAAA,yDAAAW,MAAA,GAAUH,MAAI,CAAAI,MAAO,CAAC;oCAAA,2EAAAC,CAAA,GAAOA,CAAC,CAAA9B,EAAG,KAAKA;gCAAE,CAAA,CAAA,yEAAA;wBAAC,CAAA,CAAA,uDAAA,CAAC;oBAAA;gBAAA,CAAA,CAAA,yCACvD,EAAE,IAAI,CAAC;YAAA;SAAA,CAAA,CAAA,0BACX;QAAAW,CAAA,CAAA,EAAA,GAAAO,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAP,CAAA,CAAA,EAAA;IAAA;IARD,MAAAN,QAAA,GAAiBa,EAQX;IAAC,IAAAE,EAAA;IAAA,IAAAT,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAEyBM,EAAA,GAAA,CAAA;YAAA,+BAAAW,IAAA;gBAC5Bd,SAAS,CAAC;oBAAA,6CAAAe,MAAA,GAAUP,MAAI,CAAAI,MAAO,CAAC;4BAAA,+DAAAI,GAAA,GAAOH,GAAC,CAAA9B,EAAG,KAAKA;wBAAE,CAAA,CAAA,6DAAA;gBAAC,CAAA,CAAA,2CAAA,CAAC;YAAA;SAAA,CAAA,CAAA,6BACvD;QAAAW,CAAA,CAAA,EAAA,GAAAS,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAT,CAAA,CAAA,EAAA;IAAA;IAFD,MAAAL,WAAA,GAAoBc,EAEd;IAAC,IAAAc,EAAA;IAAA,IAAAvB,CAAA,CAAA,EAAA,KAAAP,MAAA,EAAA;QAG2B8B,EAAA,GAAA;YAAA9B,MAAA;YAAAC,QAAA;YAAAC;QAAgC,CAAC;QAAAK,CAAA,CAAA,EAAA,GAAAP,MAAA;QAAAO,CAAA,CAAA,EAAA,GAAAuB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAvB,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAwB,EAAA;IAAA,IAAAxB,CAAA,CAAA,EAAA,KAAAP,MAAA,EAAA;QAAA,IAAAgC,EAAA;QAAA,IAAAzB,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;YAG3CsB,EAAA,GAAA,CAAA;gBAAA,gCAAAC,KAAA,iBACR,kNAAA,GAoBM,CAnBG,GAAQ,CAAR;wBACM,SAMV,CANU,KAAAxC,iJAAE,EACT,6KAA6K,EAC7KwC,KAAK,CAAAnC,IAAK,KAAK,SAAiE,IAAhF,oDAAgF,EAChFmC,KAAK,CAAAnC,IAAK,KAAK,OAAyD,IAAxE,8CAAwE,EACxEmC,KAAK,CAAAnC,IAAK,KAAK,SAAoE,IAAnF,uDAAmF,EACnFmC,KAAK,CAAAnC,IAAK,KAAK,MAA2D,IAA1E,iDACJ,EAAC,CAEA;;4BAAAmC,KAAK,CAAAnC,IAAK,KAAK,SAAyD,kBAA5C,kNAAC,kQAAW;gCAAW,SAAkB,EAAlB,kBAAkB,GAAE,CACvE;;;;;;4BAAAmC,KAAK,CAAAnC,IAAK,KAAK,OAAuD,kBAA5C,kNAAC,2PAAW;gCAAW,SAAkB,EAAlB,kBAAkB,GAAE,CACrE;;;;;;4BAAAmC,KAAK,CAAAnC,IAAK,KAAK,SAA2D,kBAA9C,kNAAC,iQAAa;gCAAW,SAAkB,EAAlB,kBAAkB,GAAE,CACzE;;;;;;4BAAAmC,KAAK,CAAAnC,IAAK,KAAK,MAA+C,kBAArC,kNAAC,kOAAI;gCAAW,SAAkB,EAAlB,kBAAkB,GAAE;;;;;;0CAE9D,kNAAA,GAAiE;gCAAlD,SAA4B,EAA5B,4BAA4B,CAAE;0CAAAmC,KAAK,CAAApC,OAAO,CAAE,EAA3D,GAAiE;;;;;;0CAEjE,kNAAA,MAES;gCAFQ,OAA2B,CAA3B,CAAA;oCAAA,kDAAAqC,CAAA,GAAMhC,WAAW,CAAC+B,KAAK,CAAArC,EAAG;gCAAC,CAAA,CAAA,iDAAD,CAAC;gCAAY,SAA8B,EAA9B,8BAA8B;wDAClF,kNAAC,yNAAC;oCAAW,SAAS,EAAT,SAAS,GAC1B,EAFA,MAES,CACb,EApBA,GAoBM;;;;;;;;;;;;uBAnBGqC,KAAK,CAAArC,EAAE,CAAC;;;;;aAmBX,CAAA,CAAA,8BACT;YAAAW,CAAA,CAAA,EAAA,GAAAyB,EAAA;QAAA,OAAA;YAAAA,EAAA,GAAAzB,CAAA,CAAA,EAAA;QAAA;QAtBAwB,EAAA,GAAA/B,MAAM,CAAAmC,GAAI,CAACH,EAsBX,CAAC;QAAAzB,CAAA,CAAA,EAAA,GAAAP,MAAA;QAAAO,CAAA,CAAA,EAAA,GAAAwB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAxB,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAyB,EAAA;IAAA,IAAAzB,CAAA,CAAA,EAAA,KAAAwB,EAAA,EAAA;QAvBNC,EAAA,iBAAA,kNAAA,GAwBM;YAxBS,SAAqE,EAArE,qEAAqE,CAC/E;sBAAAD,EAsBA,CACL,EAxBA,GAwBM;;;;;;QAAAxB,CAAA,CAAA,EAAA,GAAAwB,EAAA;QAAAxB,CAAA,CAAA,GAAA,GAAAyB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAzB,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA6B,EAAA;IAAA,IAAA7B,CAAA,CAAA,GAAA,KAAAI,QAAA,IAAAJ,CAAA,CAAA,GAAA,KAAAuB,EAAA,IAAAvB,CAAA,CAAA,GAAA,KAAAyB,EAAA,EAAA;QA1BVI,EAAA,iBAAA,kNAAA,aAAA,QAAA;YAA8B,KAAiC,CAAjC,CAAAN,EAAgC,CAAC,CAC1DnB;;gBAAAA,QAAO,CACR;gBAAAqB,EAwBK,CACT,wBAAwB;;;;;;;QAAAzB,CAAA,CAAA,GAAA,GAAAI,QAAA;QAAAJ,CAAA,CAAA,GAAA,GAAAuB,EAAA;QAAAvB,CAAA,CAAA,GAAA,GAAAyB,EAAA;QAAAzB,CAAA,CAAA,GAAA,GAAA6B,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAA7B,CAAA,CAAA,GAAA;IAAA;IAAA,OA3BxB6B,EA2BwB;AAAA;;;AAIzB;;IAAA,MAAA7B,CAAA,GAAA1B,yMAAA,EAAA;IAAA,IAAA0B,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IACH,MAAA+B,OAAA,OAAgBtD,gMAAU,EAACmB,YAAY,CAAC;IACxC,IAAI,CAACmC,OAAO,EAAA;QACR,MAAM,IAAIC,KAAK,CAAC,8CAA8C,CAAC;IAAC;IACnE,OACMD,OAAO;AAAA;IALXD,SAAA","ignoreList":[]}},
    {"offset": {"line": 3508, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/providers.tsx"],"sourcesContent":["\"use client\";\n\nimport { AuthProvider } from \"@/contexts/auth-context\";\nimport { ChatProvider } from \"@/contexts/chat-context\";\nimport { StatusProvider } from \"@/contexts/status-context\";\nimport { CallProvider } from \"@/contexts/call-context\";\nimport { ToastProvider } from \"@/contexts/toast-context\";\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n    return (\n        <AuthProvider>\n            <ToastProvider>\n                <StatusProvider>\n                    <ChatProvider>\n                        <CallProvider>\n                            {children}\n                        </CallProvider>\n                    </ChatProvider>\n                </StatusProvider>\n            </ToastProvider>\n        </AuthProvider>\n    );\n}\n"],"names":["c","_c","AuthProvider","ChatProvider","StatusProvider","CallProvider","ToastProvider","Providers","t0","$","$i","Symbol","for","children","t1"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,SAASC,YAAY,QAAQ,yBAAyB;AACtD,SAASC,YAAY,QAAQ,yBAAyB;AACtD,SAASC,cAAc,QAAQ,2BAA2B;AAC1D,SAASC,YAAY,QAAQ,yBAAyB;AACtD,SAASC,aAAa,QAAQ,0BAA0B;AANxD,YAAY;;;;;;;;AAQL,mBAAAE,EAAA;IAAA,MAAAC,CAAA,OAAAR,qMAAA,EAAA;IAAA,IAAAQ,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAmB,MAAA,EAAAI,QAAAA,EAAA,GAAAL,EAA2C;IAAA,IAAAM,EAAA;IAAA,IAAAL,CAAA,CAAA,EAAA,KAAAI,QAAA,EAAA;QAE7DC,EAAA,iBAAA,kNAAC,2KAAY;oCACT,kNAAC,6KAAa;wCACV,kNAAC,+KAAc;4CACX,kNAAC,2KAAY;gDACT,kNAAC,2KAAY,CACRD;sCAAAA,QAAO,CACZ,EAFC,YAAY,CAGjB,EAJC,YAAY,CAKjB,EANC,cAAc,CAOnB,EARC,aAAa,CASlB,EAVC,YAAY,CAUE;;;;;;;;;;;;;;;;;;;;;;;;;;QAAAJ,CAAA,CAAA,EAAA,GAAAI,QAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAK,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAL,CAAA,CAAA,EAAA;IAAA;IAAA,OAVfK,EAUe;AAAA;KAZhBP","ignoreList":[]}}]
}