{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/app/chat/groups/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Search, Plus, Users, ChevronRight, X, Loader2, MessageSquare } from \"lucide-react\";\nimport { Avatar } from \"@/components/ui/avatar\";\nimport { GradientText } from \"@/components/ui/gradient-text\";\nimport { useChat } from \"@/contexts/chat-context\";\nimport { useAuth } from \"@/contexts/auth-context\";\nimport { ChatService } from \"@/services/chat-service\";\nimport { useRouter } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\n\nexport default function GroupsPage() {\n    const { chats } = useChat();\n    const { user } = useAuth();\n    const router = useRouter();\n    const [showCreateModal, setShowCreateModal] = useState(false);\n    const [selectedUsers, setSelectedUsers] = useState<string[]>([]);\n    const [groupName, setGroupName] = useState(\"\");\n    const [loading, setLoading] = useState(false);\n\n    const contacts = chats\n        .filter(c => c.type === 'direct')\n        .map(c => ({\n            id: c.userId,\n            name: c.userName,\n            avatar: c.userAvatar,\n            gender: (c as any).gender\n        }));\n\n    const toggleUser = (userId: string) => {\n        setSelectedUsers(prev =>\n            prev.includes(userId)\n                ? prev.filter(id => id !== userId)\n                : [...prev, userId]\n        );\n    };\n\n    const handleCreateGroup = async () => {\n        if (!groupName.trim() || selectedUsers.length < 1) return;\n\n        setLoading(true);\n        const { data: roomId, error } = await ChatService.createGroupChat(groupName, selectedUsers);\n\n        if (!error && roomId) {\n            setShowCreateModal(false);\n            router.push(`/chat?roomId=${roomId}`);\n        }\n        setLoading(false);\n    };\n\n    const groupChats = chats.filter(c => c.type === 'group');\n\n    const getNameColor = (gender?: string) => {\n        switch (gender?.toLowerCase()) {\n            case 'male': return '#00BFFF';\n            case 'female': return '#FFB6C1';\n            case 'other': return '#FFD700';\n            default: return '#FFF';\n        }\n    };\n\n    return (\n        <div className=\"flex-1 flex flex-col bg-black h-full relative overflow-hidden\">\n            {/* Background Decor */}\n            <div className=\"absolute top-0 right-0 w-[500px] h-[500px] bg-secondary/5 rounded-full blur-[120px] pointer-events-none\" />\n\n            {/* Header */}\n            <header className=\"p-8 pb-4 flex items-center justify-between relative z-10\">\n                <div className=\"flex items-center gap-6\">\n                    <div>\n                        <div className=\"flex items-center gap-4\">\n                            <GradientText text=\"Groups\" className=\"text-5xl font-black italic uppercase tracking-tighter\" />\n                            <div className=\"w-16 h-16 relative\">\n                                <img src=\"/groups_doodle.png\" alt=\"Groups\" className=\"w-full h-full object-contain opacity-80\" />\n                            </div>\n                        </div>\n                        <p className=\"text-white/30 text-xs font-bold uppercase tracking-[0.2em] mt-1\">Communities you belong to.</p>\n                    </div>\n                </div>\n                <button\n                    onClick={() => setShowCreateModal(true)}\n                    className=\"p-5 bg-gradient-to-br from-primary to-secondary rounded-[24px] shadow-xl shadow-primary/20 hover:scale-110 active:scale-95 transition-all text-white\"\n                >\n                    <Plus className=\"w-8 h-8\" />\n                </button>\n            </header>\n\n            {/* Content */}\n            <div className=\"flex-1 overflow-y-auto custom-scrollbar p-8 pt-4 relative z-10\">\n                {groupChats.length === 0 ? (\n                    <div className=\"flex flex-col items-center justify-center p-12 space-y-8 animate-in fade-in zoom-in duration-700\">\n                        <div className=\"w-32 h-32 rounded-[40px] bg-white/5 border border-white/10 flex items-center justify-center relative\">\n                            <div className=\"absolute inset-0 bg-secondary/10 rounded-[40px] blur-xl animate-pulse\" />\n                            <Users className=\"w-12 h-12 text-white/20\" />\n                        </div>\n                        <div className=\"text-center space-y-4\">\n                            <h3 className=\"text-2xl font-black text-white italic uppercase tracking-tight\">No group gossips yet</h3>\n                            <button\n                                onClick={() => setShowCreateModal(true)}\n                                className=\"px-8 py-4 bg-transparent border-2 border-primary/50 hover:border-primary text-primary font-black uppercase italic tracking-widest rounded-2xl transition-all\"\n                            >\n                                Create your first group\n                            </button>\n                        </div>\n                    </div>\n                ) : (\n                    <div className=\"space-y-3\">\n                        {groupChats.map(item => (\n                            <div\n                                key={item.id}\n                                onClick={() => router.push(`/chat?roomId=${item.id}`)}\n                                className=\"group flex items-center gap-4 p-5 rounded-[32px] bg-white/5 border border-white/5 hover:border-white/10 transition-all hover:bg-white/[0.08] cursor-pointer\"\n                            >\n                                <div className=\"relative\">\n                                    <Avatar src={item.userAvatar} fallback={item.userName[0]} className=\"w-14 h-14 rounded-2xl relative z-10\" />\n                                </div>\n\n                                <div className=\"flex-1 min-w-0\">\n                                    <div className=\"flex items-center justify-between\">\n                                        <h4 className=\"text-lg font-black uppercase italic tracking-tight text-white mb-1\">\n                                            {item.userName}\n                                        </h4>\n                                        <p className=\"text-[10px] font-black text-white/20 uppercase tracking-widest\">\n                                            {new Date(item.lastMessageTime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                        </p>\n                                    </div>\n                                    <p className=\"text-[11px] font-bold text-white/40 truncate uppercase tracking-widest\">\n                                        {item.lastMessage || \"Whisper something...\"}\n                                    </p>\n                                </div>\n\n                                <ChevronRight className=\"w-5 h-5 text-white/20 group-hover:translate-x-1 duration-300\" />\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n\n            {/* Create Group Modal */}\n            {showCreateModal && (\n                <div className=\"fixed inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center z-50 p-4\">\n                    <div className=\"bg-black border border-white/10 w-full max-w-lg rounded-[40px] shadow-2xl overflow-hidden animate-in slide-in-from-bottom-8 duration-500 flex flex-col max-h-[85vh]\">\n                        <div className=\"p-8 pb-4 flex items-center justify-between\">\n                            <GradientText text=\"New Group\" className=\"text-2xl font-black italic uppercase tracking-tight\" />\n                            <button onClick={() => setShowCreateModal(false)} className=\"p-2 text-white/40 hover:text-white transition-colors\">\n                                <X className=\"w-8 h-8\" />\n                            </button>\n                        </div>\n\n                        <div className=\"p-8 pt-4 flex-1 overflow-y-auto custom-scrollbar space-y-8\">\n                            <div className=\"space-y-2\">\n                                <label className=\"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4\">Group Identity</label>\n                                <input\n                                    value={groupName}\n                                    onChange={(e) => setGroupName(e.target.value)}\n                                    placeholder=\"Enter group name...\"\n                                    className=\"w-full bg-white/5 border border-white/10 rounded-2xl p-5 text-white font-bold outline-none focus:border-primary/50 transition-all shadow-inner\"\n                                />\n                            </div>\n\n                            <div className=\"space-y-4\">\n                                <div className=\"flex items-center justify-between px-4\">\n                                    <p className=\"text-[10px] font-black text-white/20 uppercase tracking-[0.3em]\">Add Gossiped Friends</p>\n                                    <p className=\"text-[10px] font-black text-primary uppercase tracking-[0.3em]\">{selectedUsers.length} Selected</p>\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    {contacts.map(contact => {\n                                        const isSelected = selectedUsers.includes(contact.id);\n                                        return (\n                                            <div\n                                                key={contact.id}\n                                                onClick={() => toggleUser(contact.id)}\n                                                className={cn(\n                                                    \"flex items-center gap-4 p-4 rounded-[24px] border transition-all cursor-pointer\",\n                                                    isSelected ? \"bg-primary/10 border-primary/20\" : \"bg-white/5 border-transparent hover:border-white/10\"\n                                                )}\n                                            >\n                                                <div className=\"relative\">\n                                                    <Avatar src={contact.avatar} fallback={contact.name[0]} className=\"w-12 h-12 rounded-xl\" />\n                                                    {isSelected && (\n                                                        <div className=\"absolute -bottom-1 -right-1 w-5 h-5 bg-secondary rounded-full border-2 border-black flex items-center justify-center\">\n                                                            <div className=\"w-1.5 h-1.5 bg-black rounded-full\" />\n                                                        </div>\n                                                    )}\n                                                </div>\n                                                <div className=\"flex-1\">\n                                                    <p className=\"text-[13px] font-black uppercase tracking-tight\" style={{ color: getNameColor(contact.gender) }}>{contact.name}</p>\n                                                    <p className=\"text-[9px] font-bold text-white/20 uppercase tracking-widest\">Active Partner</p>\n                                                </div>\n                                                <div className={cn(\n                                                    \"w-6 h-6 rounded-lg border-2 transition-all flex items-center justify-center\",\n                                                    isSelected ? \"bg-primary border-primary\" : \"border-white/10\"\n                                                )}>\n                                                    {isSelected && <div className=\"w-2 h-2 bg-black rounded-full\" />}\n                                                </div>\n                                            </div>\n                                        );\n                                    })}\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"p-8 pt-4\">\n                            <button\n                                onClick={handleCreateGroup}\n                                disabled={loading || !groupName.trim() || selectedUsers.length < 1}\n                                className=\"w-full py-5 bg-gradient-to-r from-primary to-secondary text-black font-black uppercase italic tracking-[0.2em] rounded-2xl shadow-xl shadow-primary/10 hover:scale-[1.02] transition-all flex items-center justify-center gap-3 active:scale-95 disabled:opacity-50 disabled:hover:scale-100\"\n                            >\n                                {loading ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <MessageSquare className=\"w-5 h-5\" />}\n                                Create Gossip Group\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}