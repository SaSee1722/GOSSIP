{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/chat-actions.tsx"],"sourcesContent":["\"use client\";\n\nimport { X, Phone, Video, Lock, Ban } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ChatActionsProps {\n    onClose: () => void;\n    onVoiceCall: () => void;\n    onVideoCall: () => void;\n    onBlockUser: () => void;\n    isBlocked: boolean;\n    isGroup: boolean;\n}\n\nexport function ChatActions({ onClose, onVoiceCall, onVideoCall, onBlockUser, isBlocked, isGroup }: ChatActionsProps) {\n    return (\n        <div className=\"fixed inset-0 z-[100] flex items-end justify-center bg-black/40 backdrop-blur-sm p-0 sm:p-4\">\n            <div\n                className=\"w-full max-w-2xl bg-[#0A0A0A] border-t border-x border-white/10 rounded-t-[32px] sm:rounded-b-[32px] shadow-2xl overflow-hidden animate-in slide-in-from-bottom duration-300\"\n                onClick={(e) => e.stopPropagation()}\n            >\n                {/* Header */}\n                <div className=\"p-6 flex items-center justify-between border-b border-white/5\">\n                    <h2 className=\"text-xl font-bold tracking-tighter\">\n                        <span className=\"text-primary font-black\">GOSSIP</span>{\" \"}\n                        <span className=\"text-secondary font-black\">ACTIONS</span>\n                    </h2>\n                    <button onClick={onClose} className=\"p-2 hover:bg-white/5 rounded-full transition-colors\">\n                        <X className=\"w-6 h-6 text-white\" />\n                    </button>\n                </div>\n\n                {/* Actions List */}\n                <div className=\"p-4 space-y-3 pb-12\">\n                    <button\n                        onClick={onVoiceCall}\n                        className=\"w-full flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group\"\n                    >\n                        <div className=\"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary group-hover:scale-110 transition-transform\">\n                            <Phone className=\"w-5 h-5\" />\n                        </div>\n                        <span className=\"text-white font-bold text-[15px]\">Voice Call</span>\n                    </button>\n\n                    <button\n                        onClick={onVideoCall}\n                        className=\"w-full flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group\"\n                    >\n                        <div className=\"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary group-hover:scale-110 transition-transform\">\n                            <Video className=\"w-5 h-5\" />\n                        </div>\n                        <span className=\"text-white font-bold text-[15px]\">Video Call</span>\n                    </button>\n\n                    <button\n                        className=\"w-full flex items-center gap-4 p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all group\"\n                    >\n                        <div className=\"w-10 h-10 rounded-xl bg-yellow-500/10 flex items-center justify-center text-yellow-500 group-hover:scale-110 transition-transform\">\n                            <Lock className=\"w-5 h-5\" />\n                        </div>\n                        <span className=\"text-white font-bold text-[15px]\">Lock Chat</span>\n                    </button>\n\n                    <button\n                        onClick={onBlockUser}\n                        className={cn(\n                            \"w-full flex items-center gap-4 p-4 border rounded-2xl transition-all group\",\n                            isBlocked\n                                ? \"bg-green-500/5 border-green-500/20 hover:bg-green-500/10\"\n                                : \"bg-red-500/5 border-red-500/20 hover:bg-red-500/10\"\n                        )}\n                    >\n                        <div className={cn(\n                            \"w-10 h-10 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform\",\n                            isBlocked ? \"bg-green-500/10 text-green-500\" : \"bg-red-500/10 text-red-500\"\n                        )}>\n                            <Ban className=\"w-5 h-5\" />\n                        </div>\n                        <span className={cn(\n                            \"font-bold text-[15px]\",\n                            isBlocked ? \"text-green-500\" : \"text-red-500\"\n                        )}>\n                            {isBlocked ? \"Unblock User\" : \"Block User\"}\n                        </span>\n                    </button>\n                </div>\n            </div>\n\n            {/* Click outside to close */}\n            <div className=\"absolute inset-0 -z-10\" onClick={onClose} />\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAcO,SAAS,YAAY,EAAE,OAAO,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,SAAS,EAAE,OAAO,EAAoB;IAChH,qBACI,mQAAC;QAAI,WAAU;;0BACX,mQAAC;gBACG,WAAU;gBACV,SAAS,CAAC,IAAM,EAAE,eAAe;;kCAGjC,mQAAC;wBAAI,WAAU;;0CACX,mQAAC;gCAAG,WAAU;;kDACV,mQAAC;wCAAK,WAAU;kDAA0B;;;;;;oCAAc;kDACxD,mQAAC;wCAAK,WAAU;kDAA4B;;;;;;;;;;;;0CAEhD,mQAAC;gCAAO,SAAS;gCAAS,WAAU;0CAChC,cAAA,mQAAC,sNAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAKrB,mQAAC;wBAAI,WAAU;;0CACX,mQAAC;gCACG,SAAS;gCACT,WAAU;;kDAEV,mQAAC;wCAAI,WAAU;kDACX,cAAA,mQAAC,kOAAK;4CAAC,WAAU;;;;;;;;;;;kDAErB,mQAAC;wCAAK,WAAU;kDAAmC;;;;;;;;;;;;0CAGvD,mQAAC;gCACG,SAAS;gCACT,WAAU;;kDAEV,mQAAC;wCAAI,WAAU;kDACX,cAAA,mQAAC,kOAAK;4CAAC,WAAU;;;;;;;;;;;kDAErB,mQAAC;wCAAK,WAAU;kDAAmC;;;;;;;;;;;;0CAGvD,mQAAC;gCACG,WAAU;;kDAEV,mQAAC;wCAAI,WAAU;kDACX,cAAA,mQAAC,+NAAI;4CAAC,WAAU;;;;;;;;;;;kDAEpB,mQAAC;wCAAK,WAAU;kDAAmC;;;;;;;;;;;;0CAGvD,mQAAC;gCACG,SAAS;gCACT,WAAW,IAAA,8IAAE,EACT,8EACA,YACM,6DACA;;kDAGV,mQAAC;wCAAI,WAAW,IAAA,8IAAE,EACd,oGACA,YAAY,mCAAmC;kDAE/C,cAAA,mQAAC,4NAAG;4CAAC,WAAU;;;;;;;;;;;kDAEnB,mQAAC;wCAAK,WAAW,IAAA,8IAAE,EACf,yBACA,YAAY,mBAAmB;kDAE9B,YAAY,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;;0BAO9C,mQAAC;gBAAI,WAAU;gBAAyB,SAAS;;;;;;;;;;;;AAG7D"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/group-info.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { Avatar } from \"@/components/ui/avatar\";\nimport { X, UserPlus, Trash2, Shield, ShieldAlert, LogOut, Users } from \"lucide-react\";\nimport { Profile } from \"@/lib/types\";\nimport { cn } from \"@/lib/utils\";\n\ninterface GroupInfoProps {\n    roomId: string;\n    onClose: () => void;\n    currentUserId: string;\n}\n\ninterface Participant extends Profile {\n    role: 'owner' | 'admin' | 'member';\n}\n\nexport function GroupInfo({ roomId, onClose, currentUserId }: GroupInfoProps) {\n    const [participants, setParticipants] = useState<Participant[]>([]);\n    const [roomName, setRoomName] = useState(\"\");\n    const [roomDescription, setRoomDescription] = useState(\"ELLARUM VANGA ALWAYS WELCOME YOU\");\n    const [isGroup, setIsGroup] = useState(false);\n    const [loading, setLoading] = useState(true);\n    const [isAdmin, setIsAdmin] = useState(false);\n    const [showParticipants, setShowParticipants] = useState(false);\n\n    // For adding members\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const [searchResults, setSearchResults] = useState<Profile[]>([]);\n    const [showAdd, setShowAdd] = useState(false);\n\n    const supabase = createClient();\n\n    useEffect(() => {\n        fetchDetails();\n    }, [roomId]);\n\n    const fetchDetails = async () => {\n        // Fetch Room\n        const { data: room } = await supabase.from('rooms').select('*').eq('id', roomId).single();\n        if (room) {\n            setRoomName(room.name || \"Chat\");\n            setIsGroup(room.is_group);\n        }\n\n        // Fetch Participants\n        const { data: parts } = await supabase\n            .from('room_participants')\n            .select(`role, profiles(*)`)\n            .eq('room_id', roomId);\n\n        if (parts) {\n            const mapped = parts.map((p: any) => ({\n                ...p.profiles,\n                role: p.role\n            }));\n            setParticipants(mapped);\n\n            const me = mapped.find((p: any) => p.id === currentUserId);\n            if (me && (me.role === 'owner' || me.role === 'admin')) setIsAdmin(true);\n        }\n        setLoading(false);\n    };\n\n    const handleUpdateName = async () => {\n        if (!roomName.trim()) return;\n        await supabase.from('rooms').update({ name: roomName }).eq('id', roomId);\n    };\n\n    const handleSearch = async () => {\n        if (!searchQuery) return;\n        const { data } = await supabase.from('profiles')\n            .select('*')\n            .ilike('username', `%${searchQuery}%`)\n            .limit(5);\n        if (data) setSearchResults(data);\n    };\n\n    const addMember = async (userId: string) => {\n        const { error } = await supabase.from('room_participants').insert({\n            room_id: roomId,\n            user_id: userId,\n            role: 'member'\n        });\n        if (!error) {\n            setShowAdd(false);\n            fetchDetails();\n        }\n    };\n\n    const removeMember = async (userId: string) => {\n        await supabase.from('room_participants').delete().eq('room_id', roomId).eq('user_id', userId);\n        setParticipants(prev => prev.filter(p => p.id !== userId));\n    };\n\n    const promoteMember = async (userId: string) => {\n        await supabase.from('room_participants').update({ role: 'admin' }).eq('room_id', roomId).eq('user_id', userId);\n        fetchDetails();\n    };\n\n    const leaveGroup = async () => {\n        await supabase.from('room_participants').delete().eq('room_id', roomId).eq('user_id', currentUserId);\n        onClose();\n        window.location.href = '/chat';\n    };\n\n    if (loading) return null;\n\n    if (showParticipants) {\n        return (\n            <div className=\"fixed inset-0 z-[100] flex items-end justify-center bg-black/40 backdrop-blur-sm\">\n                <div className=\"w-full max-w-2xl bg-[#0A0A0A] border-t border-x border-white/10 rounded-t-[32px] shadow-2xl overflow-hidden animate-in slide-in-from-bottom duration-300 max-h-[80vh] flex flex-col\">\n                    <div className=\"p-6 flex items-center justify-between border-b border-white/5\">\n                        <button onClick={() => setShowParticipants(false)} className=\"text-primary font-bold\">Back</button>\n                        <h2 className=\"text-xl font-bold tracking-tighter\">\n                            <span className=\"text-primary font-black\">GROUP</span>{\" \"}\n                            <span className=\"text-secondary font-black\">MEMBERS</span>\n                        </h2>\n                        <button onClick={onClose} className=\"p-2 hover:bg-white/5 rounded-full transition-colors\">\n                            <X className=\"w-6 h-6 text-white\" />\n                        </button>\n                    </div>\n                    <div className=\"p-4 overflow-y-auto custom-scrollbar flex-1\">\n                        <div className=\"space-y-3\">\n                            {participants.map((p) => (\n                                <div key={p.id} className=\"flex items-center justify-between p-4 bg-white/5 rounded-2xl\">\n                                    <div className=\"flex items-center gap-3\">\n                                        <Avatar src={p.avatar_url || undefined} fallback={p.username || \"?\"} className=\"w-10 h-10\" />\n                                        <div>\n                                            <p className=\"font-bold text-white\">{p.full_name || p.username}</p>\n                                            <p className=\"text-[10px] text-white/40 uppercase font-black\">{p.role}</p>\n                                        </div>\n                                    </div>\n                                    {isAdmin && currentUserId !== p.id && (\n                                        <div className=\"flex gap-2\">\n                                            <button onClick={() => removeMember(p.id)} className=\"text-red-500 text-xs font-bold\">REMOVE</button>\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"fixed inset-0 z-[100] flex items-end justify-center bg-black/40 backdrop-blur-sm p-0 sm:p-4\">\n            <div\n                className=\"w-full max-w-2xl bg-[#0A0A0A] border-t border-x border-white/10 rounded-t-[32px] sm:rounded-b-[32px] shadow-2xl overflow-hidden animate-in slide-in-from-bottom duration-300\"\n                onClick={(e) => e.stopPropagation()}\n            >\n                {/* Header matches Image 3 */}\n                <div className=\"p-6 flex items-center justify-between\">\n                    <h2 className=\"text-xl font-bold tracking-tighter\">\n                        <span className=\"text-primary font-black\">GROUP</span>{\" \"}\n                        <span className=\"text-secondary font-black\">SETTINGS</span>\n                    </h2>\n                    <button onClick={onClose} className=\"p-1 px-[3px] border-2 border-primary rounded-md text-primary hover:bg-primary/10 transition-colors\">\n                        <X className=\"w-4 h-4 text-primary\" strokeWidth={4} />\n                    </button>\n                </div>\n\n                <div className=\"flex flex-col items-center p-6 pt-0 space-y-8\">\n                    {/* Centered Avatar */}\n                    <div className=\"flex flex-col items-center gap-2\">\n                        <Avatar src={participants[0]?.avatar_url} fallback={roomName[0]} className=\"w-[100px] h-[100px] rounded-full border-4 border-white/5\" />\n                        <span className=\"text-[11px] font-black text-white/40 uppercase tracking-widest\">Group Avatar</span>\n                    </div>\n\n                    {/* Inputs matches Image 3 */}\n                    <div className=\"w-full space-y-6 pb-12\">\n                        <div className=\"space-y-2\">\n                            <label className=\"text-[11px] font-black text-white/40 uppercase tracking-[0.2em] ml-2\">Group Name</label>\n                            <div className=\"p-4 bg-[#0A0A0A] border border-white/10 rounded-2xl\">\n                                <input\n                                    value={roomName}\n                                    onChange={(e) => setRoomName(e.target.value)}\n                                    onBlur={handleUpdateName}\n                                    className=\"w-full bg-transparent border-none outline-none text-white font-bold\"\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"space-y-2\">\n                            <label className=\"text-[11px] font-black text-white/40 uppercase tracking-[0.2em] ml-2\">Description</label>\n                            <div className=\"p-4 bg-[#0A0A0A] border border-white/10 rounded-2xl min-h-[80px]\">\n                                <textarea\n                                    value={roomDescription}\n                                    onChange={(e) => setRoomDescription(e.target.value)}\n                                    className=\"w-full bg-transparent border-none outline-none text-white font-bold resize-none h-full\"\n                                />\n                            </div>\n                        </div>\n\n                        <button\n                            onClick={() => setShowParticipants(true)}\n                            className=\"w-full flex items-center gap-4 p-4 bg-[#0A0A0A] border border-white/10 rounded-2xl hover:bg-white/5 transition-all group\"\n                        >\n                            <div className=\"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center text-primary group-hover:scale-110 transition-transform\">\n                                <Users className=\"w-5 h-5\" />\n                            </div>\n                            <span className=\"text-white font-bold text-[15px]\">View Members</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            {/* Click outside to close */}\n            <div className=\"absolute inset-0 -z-10\" onClick={onClose} />\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 714, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/chat-window.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { Avatar } from \"@/components/ui/avatar\";\nimport { ArrowLeft, Mic, Send, Paperclip, X, Image as ImageIcon, Check, CheckCheck, Trash2, Ban, Phone, Video, MoreVertical, Loader2, Square, Reply as ReplyIcon } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useToast } from \"@/contexts/toast-context\";\nimport { useCall } from \"@/contexts/call-context\";\nimport { Message, MessageType } from \"@/lib/types\";\nimport { ChatActions } from \"./chat-actions\";\nimport { GroupInfo } from \"./group-info\";\nimport { useParams, useRouter } from \"next/navigation\";\n\nexport default function ChatWindow({ roomId, user }: { roomId: string; user: any }) {\n    const [messages, setMessages] = useState<Message[]>([]);\n    const [newMessage, setNewMessage] = useState(\"\");\n    const [room, setRoom] = useState<any>(null);\n    const [uploading, setUploading] = useState(false);\n    const [showActions, setShowActions] = useState(false);\n    const [showGroupInfo, setShowGroupInfo] = useState(false);\n    const [recording, setRecording] = useState(false);\n    const [audioBlob, setAudioBlob] = useState<Blob | null>(null);\n    const [replyingTo, setReplyingTo] = useState<Message | null>(null);\n    const [isBlocked, setIsBlocked] = useState(false);\n    const [loading, setLoading] = useState(true);\n    const [headerName, setHeaderName] = useState(\"Chat Room\");\n    const [headerAvatar, setHeaderAvatar] = useState<string | undefined>(undefined);\n    const [headerGender, setHeaderGender] = useState<string | undefined>(undefined);\n\n    const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n    const chunksRef = useRef<Blob[]>([]);\n    const scrollRef = useRef<HTMLDivElement>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const supabase = createClient();\n    const router = useRouter();\n\n    const { startCall } = useCall();\n    const { addToast } = useToast();\n\n    useEffect(() => {\n        const fetchRoomAndMessages = async () => {\n            setLoading(true);\n            const { data: roomData } = await supabase\n                .from(\"rooms\")\n                .select(`*, room_participants(user_id, profiles(username, full_name, avatar_url, gender))`)\n                .eq(\"id\", roomId)\n                .single();\n\n            setRoom(roomData);\n\n            if (roomData) {\n                if (roomData.is_group === false && roomData.room_participants) {\n                    const other = roomData.room_participants.find((p: any) => p.user_id !== user.id);\n                    if (other && other.profiles) {\n                        const name = (other.profiles.full_name || other.profiles.username || \"Unknown User\").toUpperCase();\n                        setHeaderName(name);\n                        setHeaderAvatar(other.profiles.avatar_url);\n                        setHeaderGender(other.profiles.gender);\n\n                        const { data: blockData } = await supabase\n                            .from(\"blocked_users\")\n                            .select(\"*\")\n                            .eq(\"blocker_id\", user.id)\n                            .eq(\"blocked_id\", other.user_id)\n                            .maybeSingle();\n\n                        setIsBlocked(!!blockData);\n                    }\n                } else {\n                    setHeaderName(`${(roomData.name || \"Group Chat\").toUpperCase()}...ðŸ’–`);\n                }\n            }\n\n            const { data: msgData } = await supabase\n                .from(\"messages\")\n                .select(`*, profiles(username, avatar_url, gender), reply_item: messages!reply_to(content, message_type, profiles(username))`)\n                .eq(\"room_id\", roomId)\n                .order(\"created_at\", { ascending: true });\n\n            if (msgData) setMessages(msgData as any);\n            setLoading(false);\n        };\n\n        fetchRoomAndMessages();\n\n        const channel = supabase\n            .channel(`room:${roomId}`)\n            .on(\"postgres_changes\", { event: \"INSERT\", schema: \"public\", table: \"messages\", filter: `room_id=eq.${roomId}` },\n                async (payload) => {\n                    const { data } = await supabase.from(\"messages\").select(`*, profiles(username, avatar_url, gender), reply_item: messages!reply_to(content, message_type, profiles(username))`).eq(\"id\", payload.new.id).single();\n                    if (data) setMessages((prev) => [...prev, data as any]);\n                })\n            .subscribe();\n\n        return () => {\n            supabase.removeChannel(channel);\n        };\n    }, [roomId, user.id, supabase]);\n\n    useEffect(() => {\n        if (scrollRef.current) {\n            scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n        }\n\n        const unreadIds = messages\n            .filter(m => m.user_id !== user.id && !m.read_at)\n            .map(m => m.id);\n\n        if (unreadIds.length > 0) {\n            supabase\n                .from(\"messages\")\n                .update({ read_at: new Date().toISOString() })\n                .in(\"id\", unreadIds)\n                .then(() => { });\n        }\n    }, [messages, user.id, supabase]);\n\n    const getNameColor = (gender?: string) => {\n        switch (gender?.toLowerCase()) {\n            case 'male': return '#00BFFF';\n            case 'female': return '#FFB6C1';\n            case 'other': return '#FFD700';\n            default: return '#FFF';\n        }\n    };\n\n    const handleSendMessage = async (e?: React.FormEvent, type: MessageType = 'text', mediaUrl?: string, meta?: any) => {\n        if (e) e.preventDefault();\n        if (isBlocked) return;\n\n        let content = type === 'text' ? newMessage : null;\n        if (type === 'text' && !content?.trim()) return;\n\n        if (!content && type !== 'text') {\n            if (type === 'image') content = 'ðŸ“· Image';\n            else if (type === 'video') content = 'ðŸ“¹ Video';\n            else if (type === 'audio') content = 'ðŸŽ¤ Voice Note';\n            else content = 'ðŸ“Ž Attachment';\n        }\n\n        const { error } = await supabase.from(\"messages\").insert({\n            room_id: roomId,\n            user_id: user.id,\n            content: content,\n            message_type: type,\n            media_url: mediaUrl,\n            media_meta: meta,\n            reply_to: replyingTo?.id,\n            status: 'sent',\n            is_deleted: false\n        });\n\n        if (!error) {\n            if (type === 'text') setNewMessage(\"\");\n            setReplyingTo(null);\n\n            // Update room updated_at\n            await supabase.from(\"rooms\").update({ updated_at: new Date().toISOString() }).eq(\"id\", roomId);\n        }\n    };\n\n    const handleFileUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (!file || isBlocked) return;\n\n        setUploading(true);\n        const fileName = `${Date.now()}_${file.name}`;\n        const filePath = `${roomId}/${fileName}`;\n\n        const { error: uploadError } = await supabase.storage\n            .from('chat-media')\n            .upload(filePath, file);\n\n        if (uploadError) {\n            addToast(uploadError.message, \"error\");\n            setUploading(false);\n            return;\n        }\n\n        const { data: { publicUrl } } = supabase.storage.from('chat-media').getPublicUrl(filePath);\n\n        let type: MessageType = 'document';\n        if (file.type.startsWith('image/')) type = 'image';\n        else if (file.type.startsWith('video/')) type = 'video';\n        else if (file.type.startsWith('audio/')) type = 'audio';\n\n        await handleSendMessage(undefined, type, publicUrl, { size: file.size, name: file.name });\n        setUploading(false);\n    };\n\n    const handleDeleteMessage = async (messageId: string) => {\n        const { error } = await supabase\n            .from(\"messages\")\n            .update({ content: \"ðŸš« Message deleted\", is_deleted: true, media_url: null, media_meta: null })\n            .eq(\"id\", messageId);\n\n        if (error) addToast(\"Failed to delete message\", \"error\");\n    };\n\n    const startRecording = async () => {\n        if (isBlocked) return;\n        try {\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n            const mediaRecorder = new MediaRecorder(stream);\n            mediaRecorderRef.current = mediaRecorder;\n            chunksRef.current = [];\n\n            mediaRecorder.ondataavailable = (e) => {\n                if (e.data.size > 0) chunksRef.current.push(e.data);\n            };\n\n            mediaRecorder.onstop = () => {\n                const blob = new Blob(chunksRef.current, { type: 'audio/webm' });\n                setAudioBlob(blob);\n                stream.getTracks().forEach(track => track.stop());\n            };\n\n            mediaRecorder.start();\n            setRecording(true);\n        } catch (err) {\n            console.error(\"Error accessing microphone:\", err);\n            addToast(\"Could not access microphone\", \"error\");\n        }\n    };\n\n    const stopRecording = () => {\n        if (mediaRecorderRef.current && recording) {\n            mediaRecorderRef.current.stop();\n            setRecording(false);\n        }\n    };\n\n    const cancelRecording = () => {\n        stopRecording();\n        setAudioBlob(null);\n        chunksRef.current = [];\n    };\n\n    const sendVoiceNote = async () => {\n        if (!audioBlob || isBlocked) return;\n        setUploading(true);\n        const fileName = `${Date.now()}.webm`;\n        const filePath = `${roomId}/${fileName}`;\n\n        const { error: uploadError } = await supabase.storage\n            .from('chat-media')\n            .upload(filePath, audioBlob);\n\n        if (uploadError) {\n            addToast(uploadError.message, \"error\");\n            setUploading(false);\n            return;\n        }\n\n        const { data: { publicUrl } } = supabase.storage.from('chat-media').getPublicUrl(filePath);\n        await handleSendMessage(undefined, 'audio', publicUrl, { duration: 0 });\n        setAudioBlob(null);\n        setUploading(false);\n    };\n\n    const handleBlockUser = async () => {\n        if (!room || room.is_group) return;\n        const other = room.room_participants?.find((p: any) => p.user_id !== user?.id);\n        if (!other) return;\n\n        try {\n            if (isBlocked) {\n                await supabase.from(\"blocked_users\").delete().eq(\"blocker_id\", user?.id).eq(\"blocked_id\", other.user_id);\n                setIsBlocked(false);\n                addToast(\"User unblocked\", \"success\");\n            } else {\n                await supabase.from(\"blocked_users\").insert({ blocker_id: user?.id, blocked_id: other.user_id });\n                setIsBlocked(true);\n                addToast(\"User blocked\", \"error\");\n                router.push('/chat');\n            }\n        } catch (err: any) {\n            addToast(\"Action failed\", \"error\");\n        }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex-1 flex flex-col items-center justify-center bg-black\">\n                <Loader2 className=\"w-10 h-10 text-primary animate-spin\" />\n                <p className=\"mt-4 text-white/50 font-bold tracking-widest uppercase text-[10px]\">Establishing Secure Line...</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"flex flex-col h-full bg-black relative\">\n            {/* Background Glow */}\n            <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-primary/5 rounded-full blur-[120px] pointer-events-none\" />\n\n            {/* Chat Header */}\n            <div className=\"px-6 py-4 flex items-center justify-between bg-black/80 backdrop-blur-xl border-b border-white/5 z-20\">\n                <div className=\"flex items-center gap-4\">\n                    <button onClick={() => router.push('/chat')} className=\"p-2 -ml-2 hover:bg-white/5 rounded-xl text-white/30 hover:text-white transition-all\">\n                        <ArrowLeft className=\"w-6 h-6\" strokeWidth={3} />\n                    </button>\n                    <div className=\"relative\">\n                        <div className=\"w-11 h-11 rounded-2xl p-0.5 bg-gradient-to-br from-primary/30 to-secondary/30\">\n                            <Avatar src={headerAvatar} fallback={headerName[0] || \"?\"} className=\"w-full h-full rounded-[14px]\" />\n                        </div>\n                        <div className=\"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-online border-[3px] border-black rounded-full shadow-lg shadow-online/20\"></div>\n                    </div>\n                    <div>\n                        <h3 className=\"text-[17px] font-black tracking-tight\" style={{ color: getNameColor(headerGender) }}>{headerName}</h3>\n                        {room?.is_group ? (\n                            <p className=\"text-[11px] font-black text-online uppercase tracking-widest mt-0.5\">\n                                {room.room_participants?.length || 0} online â€¢ {room.room_participants?.length || 0} members\n                            </p>\n                        ) : (\n                            <p className=\"text-[11px] font-black text-online uppercase tracking-widest mt-0.5\">Online</p>\n                        )}\n                    </div>\n                </div>\n\n                <div className=\"flex items-center gap-1\">\n                    <button\n                        onClick={() => {\n                            if (room?.is_group) setShowGroupInfo(true);\n                            else setShowActions(true);\n                        }}\n                        className=\"p-2.5 hover:bg-white/5 rounded-xl text-white/40 hover:text-white transition-all\"\n                    >\n                        <MoreVertical className=\"w-6 h-6\" strokeWidth={2.5} />\n                    </button>\n                </div>\n            </div>\n\n            {/* Messages Area */}\n            <div className=\"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar relative z-10\" ref={scrollRef}>\n                <div className=\"flex justify-center mb-8\">\n                    <div className=\"px-4 py-1 rounded-full bg-white/5 border border-white/10\">\n                        <span className=\"text-[10px] font-black text-white/30 uppercase tracking-[0.2em]\">Today</span>\n                    </div>\n                </div>\n\n                {messages.map((msg, index) => {\n                    const isMe = msg.user_id === user.id;\n                    const prevMsg = messages[index - 1];\n                    const isSameUser = prevMsg?.user_id === msg.user_id;\n\n                    return (\n                        <div key={msg.id} className={cn(\"flex flex-col\", isMe ? \"items-end\" : \"items-start\")}>\n                            {!isMe && !isSameUser && (\n                                <span className=\"text-[10px] font-black text-white/20 mb-1.5 ml-14 uppercase tracking-wider\" style={{ color: getNameColor((msg.profiles as any)?.gender) }}>\n                                    {(msg.profiles as any)?.username}\n                                </span>\n                            )}\n                            <div className={cn(\"flex items-end gap-3 max-w-[85%]\", isMe && \"flex-row-reverse\")}>\n                                {!isMe && (\n                                    <div className=\"w-8 h-8 rounded-xl overflow-hidden ring-1 ring-white/10 flex-shrink-0\">\n                                        {!isSameUser ? (\n                                            <Avatar src={(msg.profiles as any)?.avatar_url || ''} fallback={(msg.profiles as any)?.username?.[0] || \"?\"} className=\"w-full h-full\" />\n                                        ) : <div className=\"w-full h-full\" />}\n                                    </div>\n                                )}\n\n                                <div className={cn(\n                                    \"px-4 py-2.5 relative group transition-all\",\n                                    isMe\n                                        ? \"bg-primary text-black rounded-[18px] rounded-br-[4px]\"\n                                        : \"bg-[#1A1A1A] text-white rounded-[18px] rounded-bl-[4px]\"\n                                )}>\n                                    {/* Action Buttons */}\n                                    <div className={cn(\n                                        \"absolute -top-8 px-2 py-1 bg-black/60 backdrop-blur-md rounded-xl border border-white/10 flex gap-2 opacity-0 group-hover:opacity-100 transition-all z-20\",\n                                        isMe ? \"right-0\" : \"left-0\"\n                                    )}>\n                                        <button\n                                            onClick={() => setReplyingTo(msg)}\n                                            className=\"text-white/60 hover:text-primary transition-colors\"\n                                        >\n                                            <ReplyIcon size={14} />\n                                        </button>\n                                        {isMe && !msg.is_deleted && (\n                                            <button\n                                                onClick={() => handleDeleteMessage(msg.id)}\n                                                className=\"text-white/60 hover:text-secondary transition-colors\"\n                                            >\n                                                <Trash2 size={14} />\n                                            </button>\n                                        )}\n                                    </div>\n\n                                    {msg.is_deleted ? (\n                                        <p className=\"italic text-[13px] opacity-40 font-medium tracking-tight\">ðŸš« Ghost message deleted</p>\n                                    ) : (\n                                        <>\n                                            {/* Replying To Preview */}\n                                            {msg.reply_item && (\n                                                <div className={cn(\n                                                    \"mb-2 p-2 rounded-xl flex flex-col gap-0.5 border-l-4\",\n                                                    isMe ? \"bg-black/5 border-black/20\" : \"bg-white/5 border-primary/40\"\n                                                )}>\n                                                    <span className={cn(\"text-[9px] font-black uppercase tracking-widest\", isMe ? \"text-black/50\" : \"text-primary/70\")}>\n                                                        {msg.reply_item.profiles?.username || 'GOSSIPER'}\n                                                    </span>\n                                                    <p className={cn(\"text-[11px] font-bold truncate italic opacity-60\", isMe ? \"text-black\" : \"text-white\")}>\n                                                        {msg.reply_item.message_type === 'text' ? msg.reply_item.content : `[MEDIA ${msg.reply_item.message_type.toUpperCase()}]`}\n                                                    </p>\n                                                </div>\n                                            )}\n\n                                            {msg.message_type === 'text' && <p className=\"text-[15px] font-medium leading-relaxed tracking-tight\">{msg.content}</p>}\n                                            {msg.message_type === 'image' && (\n                                                <div className=\"rounded-2xl overflow-hidden my-1 border border-white/10\">\n                                                    <img src={msg.media_url || ''} alt=\"\" className=\"max-w-full max-h-[400px] w-auto h-auto object-cover\" />\n                                                </div>\n                                            )}\n                                        </>\n                                    )}\n\n                                    <div className={cn(\"flex items-center gap-1.5 mt-1.5\", isMe ? \"justify-end\" : \"justify-start\")}>\n                                        <span className={cn(\"text-[10px] font-black uppercase tracking-widest\", isMe ? \"text-black/40\" : \"text-white/20\")}>\n                                            {new Date(msg.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                                        </span>\n                                        {isMe && (\n                                            msg.read_at\n                                                ? <CheckCheck size={12} className=\"text-black/60\" />\n                                                : <Check size={12} className=\"text-black/40\" />\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    );\n                })}\n                {uploading && (\n                    <div className=\"flex justify-end pr-4\">\n                        <div className=\"bg-primary/20 p-2 rounded-xl flex items-center gap-2 border border-primary/20\">\n                            <Loader2 className=\"w-4 h-4 animate-spin text-primary\" />\n                            <span className=\"text-[11px] font-black text-primary uppercase tracking-widest\">Transmitting...</span>\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {/* Input Area matches Image 2 */}\n            <form onSubmit={(e) => handleSendMessage(e, 'text')} className=\"p-4 bg-black\">\n                <div className=\"flex items-center gap-3\">\n                    <div className=\"flex-1 flex items-center bg-[#1A1A1A] rounded-[28px] px-4 py-1 border border-white/5\">\n                        <button type=\"button\" className=\"p-2 text-white/40 hover:text-white\">\n                            <svg className=\"w-6 h-6\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                                <circle cx=\"12\" cy=\"12\" r=\"10\" />\n                                <path d=\"M8 14s1.5 2 4 2 4-2 4-2\" />\n                                <line x1=\"9\" y1=\"9\" x2=\"9.01\" y2=\"9\" />\n                                <line x1=\"15\" y1=\"9\" x2=\"15.01\" y2=\"9\" />\n                            </svg>\n                        </button>\n                        <input\n                            value={newMessage}\n                            onChange={(e) => setNewMessage(e.target.value)}\n                            placeholder=\"Message...\"\n                            className=\"flex-1 bg-transparent border-none outline-none px-2 text-[15px] text-white placeholder:text-white/20 h-11\"\n                        />\n                        <button\n                            type=\"button\"\n                            onClick={() => fileInputRef.current?.click()}\n                            className=\"p-2 text-white/40 hover:text-white\"\n                        >\n                            <Paperclip className=\"w-5 h-5\" />\n                        </button>\n                    </div>\n\n                    <button\n                        type={newMessage.trim() ? \"submit\" : \"button\"}\n                        onClick={!newMessage.trim() ? (recording ? stopRecording : startRecording) : undefined}\n                        className={cn(\n                            \"w-12 h-12 rounded-full flex items-center justify-center transition-all\",\n                            newMessage.trim() ? \"bg-primary text-black\" : \"bg-[#1A1A1A] text-white/60\"\n                        )}\n                    >\n                        {newMessage.trim() ? (\n                            <Send className=\"w-5 h-5 ml-0.5\" />\n                        ) : (\n                            <Mic className={cn(\"w-5 h-5\", recording && \"text-red-500 animate-pulse\")} />\n                        )}\n                    </button>\n                </div>\n            </form>\n            {showGroupInfo && <GroupInfo roomId={roomId} onClose={() => setShowGroupInfo(false)} currentUserId={user.id} />}\n            {showActions && (\n                <ChatActions\n                    onClose={() => setShowActions(false)}\n                    onVoiceCall={() => {\n                        setShowActions(false);\n                        startCall(roomId, false);\n                    }}\n                    onVideoCall={() => {\n                        setShowActions(false);\n                        startCall(roomId, true);\n                    }}\n                    onBlockUser={() => {\n                        setShowActions(false);\n                        handleBlockUser();\n                    }}\n                    isBlocked={isBlocked}\n                    isGroup={false}\n                />\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAZA;;;;;;;;;;;;AAce,SAAS,WAAW,EAAE,MAAM,EAAE,IAAI,EAAiC;IAC9E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,sOAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,sOAAQ,EAAC;IAC7C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,sOAAQ,EAAM;IACtC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sOAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,sOAAQ,EAAC;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,sOAAQ,EAAC;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sOAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sOAAQ,EAAc;IACxD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,sOAAQ,EAAiB;IAC7D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,sOAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,sOAAQ,EAAC;IACvC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,sOAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,sOAAQ,EAAqB;IACrE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,sOAAQ,EAAqB;IAErE,MAAM,mBAAmB,IAAA,oOAAM,EAAuB;IACtD,MAAM,YAAY,IAAA,oOAAM,EAAS,EAAE;IACnC,MAAM,YAAY,IAAA,oOAAM,EAAiB;IACzC,MAAM,eAAe,IAAA,oOAAM,EAAmB;IAC9C,MAAM,WAAW,IAAA,qKAAY;IAC7B,MAAM,SAAS,IAAA,oKAAS;IAExB,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,mKAAO;IAC7B,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,qKAAQ;IAE7B,IAAA,uOAAS,EAAC;QACN,MAAM,uBAAuB;YACzB,WAAW;YACX,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,SAC5B,IAAI,CAAC,SACL,MAAM,CAAC,CAAC,gFAAgF,CAAC,EACzF,EAAE,CAAC,MAAM,QACT,MAAM;YAEX,QAAQ;YAER,IAAI,UAAU;gBACV,IAAI,SAAS,QAAQ,KAAK,SAAS,SAAS,iBAAiB,EAAE;oBAC3D,MAAM,QAAQ,SAAS,iBAAiB,CAAC,IAAI,CAAC,CAAC,IAAW,EAAE,OAAO,KAAK,KAAK,EAAE;oBAC/E,IAAI,SAAS,MAAM,QAAQ,EAAE;wBACzB,MAAM,OAAO,CAAC,MAAM,QAAQ,CAAC,SAAS,IAAI,MAAM,QAAQ,CAAC,QAAQ,IAAI,cAAc,EAAE,WAAW;wBAChG,cAAc;wBACd,gBAAgB,MAAM,QAAQ,CAAC,UAAU;wBACzC,gBAAgB,MAAM,QAAQ,CAAC,MAAM;wBAErC,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,cAAc,KAAK,EAAE,EACxB,EAAE,CAAC,cAAc,MAAM,OAAO,EAC9B,WAAW;wBAEhB,aAAa,CAAC,CAAC;oBACnB;gBACJ,OAAO;oBACH,cAAc,GAAG,CAAC,SAAS,IAAI,IAAI,YAAY,EAAE,WAAW,GAAG,KAAK,CAAC;gBACzE;YACJ;YAEA,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC,CAAC,mHAAmH,CAAC,EAC5H,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAK;YAE3C,IAAI,SAAS,YAAY;YACzB,WAAW;QACf;QAEA;QAEA,MAAM,UAAU,SACX,OAAO,CAAC,CAAC,KAAK,EAAE,QAAQ,EACxB,EAAE,CAAC,oBAAoB;YAAE,OAAO;YAAU,QAAQ;YAAU,OAAO;YAAY,QAAQ,CAAC,WAAW,EAAE,QAAQ;QAAC,GAC3G,OAAO;YACH,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,CAAC,mHAAmH,CAAC,EAAE,EAAE,CAAC,MAAM,QAAQ,GAAG,CAAC,EAAE,EAAE,MAAM;YAC9M,IAAI,MAAM,YAAY,CAAC,OAAS;uBAAI;oBAAM;iBAAY;QAC1D,GACH,SAAS;QAEd,OAAO;YACH,SAAS,aAAa,CAAC;QAC3B;IACJ,GAAG;QAAC;QAAQ,KAAK,EAAE;QAAE;KAAS;IAE9B,IAAA,uOAAS,EAAC;QACN,IAAI,UAAU,OAAO,EAAE;YACnB,UAAU,OAAO,CAAC,SAAS,GAAG,UAAU,OAAO,CAAC,YAAY;QAChE;QAEA,MAAM,YAAY,SACb,MAAM,CAAC,CAAA,IAAK,EAAE,OAAO,KAAK,KAAK,EAAE,IAAI,CAAC,EAAE,OAAO,EAC/C,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE;QAElB,IAAI,UAAU,MAAM,GAAG,GAAG;YACtB,SACK,IAAI,CAAC,YACL,MAAM,CAAC;gBAAE,SAAS,IAAI,OAAO,WAAW;YAAG,GAC3C,EAAE,CAAC,MAAM,WACT,IAAI,CAAC,KAAQ;QACtB;IACJ,GAAG;QAAC;QAAU,KAAK,EAAE;QAAE;KAAS;IAEhC,MAAM,eAAe,CAAC;QAClB,OAAQ,QAAQ;YACZ,KAAK;gBAAQ,OAAO;YACpB,KAAK;gBAAU,OAAO;YACtB,KAAK;gBAAS,OAAO;YACrB;gBAAS,OAAO;QACpB;IACJ;IAEA,MAAM,oBAAoB,OAAO,GAAqB,OAAoB,MAAM,EAAE,UAAmB;QACjG,IAAI,GAAG,EAAE,cAAc;QACvB,IAAI,WAAW;QAEf,IAAI,UAAU,SAAS,SAAS,aAAa;QAC7C,IAAI,SAAS,UAAU,CAAC,SAAS,QAAQ;QAEzC,IAAI,CAAC,WAAW,SAAS,QAAQ;YAC7B,IAAI,SAAS,SAAS,UAAU;iBAC3B,IAAI,SAAS,SAAS,UAAU;iBAChC,IAAI,SAAS,SAAS,UAAU;iBAChC,UAAU;QACnB;QAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC;YACrD,SAAS;YACT,SAAS,KAAK,EAAE;YAChB,SAAS;YACT,cAAc;YACd,WAAW;YACX,YAAY;YACZ,UAAU,YAAY;YACtB,QAAQ;YACR,YAAY;QAChB;QAEA,IAAI,CAAC,OAAO;YACR,IAAI,SAAS,QAAQ,cAAc;YACnC,cAAc;YAEd,yBAAyB;YACzB,MAAM,SAAS,IAAI,CAAC,SAAS,MAAM,CAAC;gBAAE,YAAY,IAAI,OAAO,WAAW;YAAG,GAAG,EAAE,CAAC,MAAM;QAC3F;IACJ;IAEA,MAAM,mBAAmB,OAAO;QAC5B,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,CAAC,QAAQ,WAAW;QAExB,aAAa;QACb,MAAM,WAAW,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,IAAI,EAAE;QAC7C,MAAM,WAAW,GAAG,OAAO,CAAC,EAAE,UAAU;QAExC,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,OAAO,CAChD,IAAI,CAAC,cACL,MAAM,CAAC,UAAU;QAEtB,IAAI,aAAa;YACb,SAAS,YAAY,OAAO,EAAE;YAC9B,aAAa;YACb;QACJ;QAEA,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,GAAG,SAAS,OAAO,CAAC,IAAI,CAAC,cAAc,YAAY,CAAC;QAEjF,IAAI,OAAoB;QACxB,IAAI,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW,OAAO;aACtC,IAAI,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW,OAAO;aAC3C,IAAI,KAAK,IAAI,CAAC,UAAU,CAAC,WAAW,OAAO;QAEhD,MAAM,kBAAkB,WAAW,MAAM,WAAW;YAAE,MAAM,KAAK,IAAI;YAAE,MAAM,KAAK,IAAI;QAAC;QACvF,aAAa;IACjB;IAEA,MAAM,sBAAsB,OAAO;QAC/B,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACnB,IAAI,CAAC,YACL,MAAM,CAAC;YAAE,SAAS;YAAsB,YAAY;YAAM,WAAW;YAAM,YAAY;QAAK,GAC5F,EAAE,CAAC,MAAM;QAEd,IAAI,OAAO,SAAS,4BAA4B;IACpD;IAEA,MAAM,iBAAiB;QACnB,IAAI,WAAW;QACf,IAAI;YACA,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;gBAAE,OAAO;YAAK;YACvE,MAAM,gBAAgB,IAAI,cAAc;YACxC,iBAAiB,OAAO,GAAG;YAC3B,UAAU,OAAO,GAAG,EAAE;YAEtB,cAAc,eAAe,GAAG,CAAC;gBAC7B,IAAI,EAAE,IAAI,CAAC,IAAI,GAAG,GAAG,UAAU,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI;YACtD;YAEA,cAAc,MAAM,GAAG;gBACnB,MAAM,OAAO,IAAI,KAAK,UAAU,OAAO,EAAE;oBAAE,MAAM;gBAAa;gBAC9D,aAAa;gBACb,OAAO,SAAS,GAAG,OAAO,CAAC,CAAA,QAAS,MAAM,IAAI;YAClD;YAEA,cAAc,KAAK;YACnB,aAAa;QACjB,EAAE,OAAO,KAAK;YACV,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,SAAS,+BAA+B;QAC5C;IACJ;IAEA,MAAM,gBAAgB;QAClB,IAAI,iBAAiB,OAAO,IAAI,WAAW;YACvC,iBAAiB,OAAO,CAAC,IAAI;YAC7B,aAAa;QACjB;IACJ;IAEA,MAAM,kBAAkB;QACpB;QACA,aAAa;QACb,UAAU,OAAO,GAAG,EAAE;IAC1B;IAEA,MAAM,gBAAgB;QAClB,IAAI,CAAC,aAAa,WAAW;QAC7B,aAAa;QACb,MAAM,WAAW,GAAG,KAAK,GAAG,GAAG,KAAK,CAAC;QACrC,MAAM,WAAW,GAAG,OAAO,CAAC,EAAE,UAAU;QAExC,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,OAAO,CAChD,IAAI,CAAC,cACL,MAAM,CAAC,UAAU;QAEtB,IAAI,aAAa;YACb,SAAS,YAAY,OAAO,EAAE;YAC9B,aAAa;YACb;QACJ;QAEA,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,GAAG,SAAS,OAAO,CAAC,IAAI,CAAC,cAAc,YAAY,CAAC;QACjF,MAAM,kBAAkB,WAAW,SAAS,WAAW;YAAE,UAAU;QAAE;QACrE,aAAa;QACb,aAAa;IACjB;IAEA,MAAM,kBAAkB;QACpB,IAAI,CAAC,QAAQ,KAAK,QAAQ,EAAE;QAC5B,MAAM,QAAQ,KAAK,iBAAiB,EAAE,KAAK,CAAC,IAAW,EAAE,OAAO,KAAK,MAAM;QAC3E,IAAI,CAAC,OAAO;QAEZ,IAAI;YACA,IAAI,WAAW;gBACX,MAAM,SAAS,IAAI,CAAC,iBAAiB,MAAM,GAAG,EAAE,CAAC,cAAc,MAAM,IAAI,EAAE,CAAC,cAAc,MAAM,OAAO;gBACvG,aAAa;gBACb,SAAS,kBAAkB;YAC/B,OAAO;gBACH,MAAM,SAAS,IAAI,CAAC,iBAAiB,MAAM,CAAC;oBAAE,YAAY,MAAM;oBAAI,YAAY,MAAM,OAAO;gBAAC;gBAC9F,aAAa;gBACb,SAAS,gBAAgB;gBACzB,OAAO,IAAI,CAAC;YAChB;QACJ,EAAE,OAAO,KAAU;YACf,SAAS,iBAAiB;QAC9B;IACJ;IAEA,IAAI,SAAS;QACT,qBACI,mQAAC;YAAI,WAAU;;8BACX,mQAAC,iPAAO;oBAAC,WAAU;;;;;;8BACnB,mQAAC;oBAAE,WAAU;8BAAqE;;;;;;;;;;;;IAG9F;IAEA,qBACI,mQAAC;QAAI,WAAU;;0BAEX,mQAAC;gBAAI,WAAU;;;;;;0BAGf,mQAAC;gBAAI,WAAU;;kCACX,mQAAC;wBAAI,WAAU;;0CACX,mQAAC;gCAAO,SAAS,IAAM,OAAO,IAAI,CAAC;gCAAU,WAAU;0CACnD,cAAA,mQAAC,kPAAS;oCAAC,WAAU;oCAAU,aAAa;;;;;;;;;;;0CAEhD,mQAAC;gCAAI,WAAU;;kDACX,mQAAC;wCAAI,WAAU;kDACX,cAAA,mQAAC,iKAAM;4CAAC,KAAK;4CAAc,UAAU,UAAU,CAAC,EAAE,IAAI;4CAAK,WAAU;;;;;;;;;;;kDAEzE,mQAAC;wCAAI,WAAU;;;;;;;;;;;;0CAEnB,mQAAC;;kDACG,mQAAC;wCAAG,WAAU;wCAAwC,OAAO;4CAAE,OAAO,aAAa;wCAAc;kDAAI;;;;;;oCACpG,MAAM,yBACH,mQAAC;wCAAE,WAAU;;4CACR,KAAK,iBAAiB,EAAE,UAAU;4CAAE;4CAAW,KAAK,iBAAiB,EAAE,UAAU;4CAAE;;;;;;6DAGxF,mQAAC;wCAAE,WAAU;kDAAsE;;;;;;;;;;;;;;;;;;kCAK/F,mQAAC;wBAAI,WAAU;kCACX,cAAA,mQAAC;4BACG,SAAS;gCACL,IAAI,MAAM,UAAU,iBAAiB;qCAChC,eAAe;4BACxB;4BACA,WAAU;sCAEV,cAAA,mQAAC,+PAAY;gCAAC,WAAU;gCAAU,aAAa;;;;;;;;;;;;;;;;;;;;;;0BAM3D,mQAAC;gBAAI,WAAU;gBAAsE,KAAK;;kCACtF,mQAAC;wBAAI,WAAU;kCACX,cAAA,mQAAC;4BAAI,WAAU;sCACX,cAAA,mQAAC;gCAAK,WAAU;0CAAkE;;;;;;;;;;;;;;;;oBAIzF,SAAS,GAAG,CAAC,CAAC,KAAK;wBAChB,MAAM,OAAO,IAAI,OAAO,KAAK,KAAK,EAAE;wBACpC,MAAM,UAAU,QAAQ,CAAC,QAAQ,EAAE;wBACnC,MAAM,aAAa,SAAS,YAAY,IAAI,OAAO;wBAEnD,qBACI,mQAAC;4BAAiB,WAAW,IAAA,8IAAE,EAAC,iBAAiB,OAAO,cAAc;;gCACjE,CAAC,QAAQ,CAAC,4BACP,mQAAC;oCAAK,WAAU;oCAA6E,OAAO;wCAAE,OAAO,aAAc,IAAI,QAAQ,EAAU;oCAAQ;8CACpJ,AAAC,IAAI,QAAQ,EAAU;;;;;;8CAGhC,mQAAC;oCAAI,WAAW,IAAA,8IAAE,EAAC,oCAAoC,QAAQ;;wCAC1D,CAAC,sBACE,mQAAC;4CAAI,WAAU;sDACV,CAAC,2BACE,mQAAC,iKAAM;gDAAC,KAAK,AAAC,IAAI,QAAQ,EAAU,cAAc;gDAAI,UAAU,AAAC,IAAI,QAAQ,EAAU,UAAU,CAAC,EAAE,IAAI;gDAAK,WAAU;;;;;qEACvH,mQAAC;gDAAI,WAAU;;;;;;;;;;;sDAI3B,mQAAC;4CAAI,WAAW,IAAA,8IAAE,EACd,6CACA,OACM,0DACA;;8DAGN,mQAAC;oDAAI,WAAW,IAAA,8IAAE,EACd,6JACA,OAAO,YAAY;;sEAEnB,mQAAC;4DACG,SAAS,IAAM,cAAc;4DAC7B,WAAU;sEAEV,cAAA,mQAAC,kOAAS;gEAAC,MAAM;;;;;;;;;;;wDAEpB,QAAQ,CAAC,IAAI,UAAU,kBACpB,mQAAC;4DACG,SAAS,IAAM,oBAAoB,IAAI,EAAE;4DACzC,WAAU;sEAEV,cAAA,mQAAC,yOAAM;gEAAC,MAAM;;;;;;;;;;;;;;;;;gDAKzB,IAAI,UAAU,iBACX,mQAAC;oDAAE,WAAU;8DAA2D;;;;;yEAExE;;wDAEK,IAAI,UAAU,kBACX,mQAAC;4DAAI,WAAW,IAAA,8IAAE,EACd,wDACA,OAAO,+BAA+B;;8EAEtC,mQAAC;oEAAK,WAAW,IAAA,8IAAE,EAAC,mDAAmD,OAAO,kBAAkB;8EAC3F,IAAI,UAAU,CAAC,QAAQ,EAAE,YAAY;;;;;;8EAE1C,mQAAC;oEAAE,WAAW,IAAA,8IAAE,EAAC,oDAAoD,OAAO,eAAe;8EACtF,IAAI,UAAU,CAAC,YAAY,KAAK,SAAS,IAAI,UAAU,CAAC,OAAO,GAAG,CAAC,OAAO,EAAE,IAAI,UAAU,CAAC,YAAY,CAAC,WAAW,GAAG,CAAC,CAAC;;;;;;;;;;;;wDAKpI,IAAI,YAAY,KAAK,wBAAU,mQAAC;4DAAE,WAAU;sEAA0D,IAAI,OAAO;;;;;;wDACjH,IAAI,YAAY,KAAK,yBAClB,mQAAC;4DAAI,WAAU;sEACX,cAAA,mQAAC;gEAAI,KAAK,IAAI,SAAS,IAAI;gEAAI,KAAI;gEAAG,WAAU;;;;;;;;;;;;;8DAMhE,mQAAC;oDAAI,WAAW,IAAA,8IAAE,EAAC,oCAAoC,OAAO,gBAAgB;;sEAC1E,mQAAC;4DAAK,WAAW,IAAA,8IAAE,EAAC,oDAAoD,OAAO,kBAAkB;sEAC5F,IAAI,KAAK,IAAI,UAAU,EAAE,kBAAkB,CAAC,EAAE,EAAE;gEAAE,MAAM;gEAAW,QAAQ;4DAAU;;;;;;wDAEzF,QAAQ,CACL,IAAI,OAAO,iBACL,mQAAC,qPAAU;4DAAC,MAAM;4DAAI,WAAU;;;;;iFAChC,mQAAC,kOAAK;4DAAC,MAAM;4DAAI,WAAU;;;;;gEACrC;;;;;;;;;;;;;;;;;;;;2BA9EN,IAAI,EAAE;;;;;oBAoFxB;oBACC,2BACG,mQAAC;wBAAI,WAAU;kCACX,cAAA,mQAAC;4BAAI,WAAU;;8CACX,mQAAC,iPAAO;oCAAC,WAAU;;;;;;8CACnB,mQAAC;oCAAK,WAAU;8CAAgE;;;;;;;;;;;;;;;;;;;;;;;0BAOhG,mQAAC;gBAAK,UAAU,CAAC,IAAM,kBAAkB,GAAG;gBAAS,WAAU;0BAC3D,cAAA,mQAAC;oBAAI,WAAU;;sCACX,mQAAC;4BAAI,WAAU;;8CACX,mQAAC;oCAAO,MAAK;oCAAS,WAAU;8CAC5B,cAAA,mQAAC;wCAAI,WAAU;wCAAU,SAAQ;wCAAY,MAAK;wCAAO,QAAO;wCAAe,aAAY;wCAAI,eAAc;wCAAQ,gBAAe;;0DAChI,mQAAC;gDAAO,IAAG;gDAAK,IAAG;gDAAK,GAAE;;;;;;0DAC1B,mQAAC;gDAAK,GAAE;;;;;;0DACR,mQAAC;gDAAK,IAAG;gDAAI,IAAG;gDAAI,IAAG;gDAAO,IAAG;;;;;;0DACjC,mQAAC;gDAAK,IAAG;gDAAK,IAAG;gDAAI,IAAG;gDAAQ,IAAG;;;;;;;;;;;;;;;;;8CAG3C,mQAAC;oCACG,OAAO;oCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;oCAC7C,aAAY;oCACZ,WAAU;;;;;;8CAEd,mQAAC;oCACG,MAAK;oCACL,SAAS,IAAM,aAAa,OAAO,EAAE;oCACrC,WAAU;8CAEV,cAAA,mQAAC,8OAAS;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAI7B,mQAAC;4BACG,MAAM,WAAW,IAAI,KAAK,WAAW;4BACrC,SAAS,CAAC,WAAW,IAAI,KAAM,YAAY,gBAAgB,iBAAkB;4BAC7E,WAAW,IAAA,8IAAE,EACT,0EACA,WAAW,IAAI,KAAK,0BAA0B;sCAGjD,WAAW,IAAI,mBACZ,mQAAC,+NAAI;gCAAC,WAAU;;;;;qDAEhB,mQAAC,4NAAG;gCAAC,WAAW,IAAA,8IAAE,EAAC,WAAW,aAAa;;;;;;;;;;;;;;;;;;;;;;YAK1D,+BAAiB,mQAAC,qKAAS;gBAAC,QAAQ;gBAAQ,SAAS,IAAM,iBAAiB;gBAAQ,eAAe,KAAK,EAAE;;;;;;YAC1G,6BACG,mQAAC,yKAAW;gBACR,SAAS,IAAM,eAAe;gBAC9B,aAAa;oBACT,eAAe;oBACf,UAAU,QAAQ;gBACtB;gBACA,aAAa;oBACT,eAAe;oBACf,UAAU,QAAQ;gBACtB;gBACA,aAAa;oBACT,eAAe;oBACf;gBACJ;gBACA,WAAW;gBACX,SAAS;;;;;;;;;;;;AAK7B"}},
    {"offset": {"line": 1590, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/user-search.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { Avatar } from \"@/components/ui/avatar\";\nimport { Search, UserPlus, Check, X } from \"lucide-react\";\nimport { Profile } from \"@/lib/types\";\nimport { cn } from \"@/lib/utils\";\nimport { useToast } from \"@/contexts/toast-context\";\n\ninterface UserSearchProps {\n    onClose: () => void;\n    currentUserId: string;\n}\n\nexport function UserSearch({ onClose, currentUserId }: UserSearchProps) {\n    const [query, setQuery] = useState(\"\");\n    const [results, setResults] = useState<Profile[]>([]);\n    const [loading, setLoading] = useState(false);\n    const [requested, setRequested] = useState<Set<string>>(new Set());\n    const supabase = createClient();\n    const { addToast } = useToast();\n\n    const handleSearch = async () => {\n        if (!query.trim()) return;\n        setLoading(true);\n\n        // Simple search by username or full_name\n        const { data, error } = await supabase\n            .from(\"profiles\")\n            .select(\"*\")\n            .or(`username.ilike.%${query}%,full_name.ilike.%${query}%`)\n            .neq(\"id\", currentUserId)\n            .limit(10);\n\n        if (data) {\n            // Filter out already connected users? For now showing all.\n            setResults(data);\n        }\n        setLoading(false);\n    };\n\n    const sendRequest = async (targetId: string) => {\n        // Optimistic update\n        setRequested((prev) => new Set(prev).add(targetId));\n\n        // 1. Check if a connection tuple already exists (in either direction)\n        const { data: existing, error: fetchError } = await supabase\n            .from(\"connections\")\n            .select(\"*\")\n            .or(`and(requester_id.eq.${currentUserId},addressee_id.eq.${targetId}),and(requester_id.eq.${targetId},addressee_id.eq.${currentUserId})`)\n            .maybeSingle();\n\n        if (fetchError) {\n            console.error(\"Error checking connection:\", fetchError);\n            return;\n        }\n\n        let error = null;\n\n        if (existing) {\n            // 2. If exists, handle based on status\n            if (existing.status === 'rejected') {\n                // Re-activate as a new request from me\n                const { error: updateError } = await supabase\n                    .from(\"connections\")\n                    .update({ status: 'pending', requester_id: currentUserId, addressee_id: targetId })\n                    .eq(\"id\", existing.id);\n                error = updateError;\n            } else {\n                // 'pending' or 'accepted' - Do nothing to prevent duplicate key error\n                // The UI already shows a checkmark optimistically\n                console.log(\"Connection already exists or is pending.\");\n            }\n        } else {\n            // 3. New Record\n            const { error: insertError } = await supabase\n                .from(\"connections\")\n                .insert({ requester_id: currentUserId, addressee_id: targetId });\n            error = insertError;\n        }\n\n        if (error) {\n            console.error(\"Failed to send request\", error);\n            // Revert on error\n            setRequested((prev) => {\n                const next = new Set(prev);\n                next.delete(targetId);\n                return next;\n            });\n            addToast(\"Failed to send request: \" + error.message, \"error\");\n        } else {\n            addToast(\"Request sent!\", \"success\");\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\n            <div className=\"w-full max-w-md bg-[#1e1e24] border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200\">\n                <div className=\"p-4 border-b border-white/5 flex items-center justify-between\">\n                    <h2 className=\"text-lg font-bold text-white\">Find People</h2>\n                    <button onClick={onClose} className=\"p-2 hover:bg-white/10 rounded-full transition-colors\">\n                        <X className=\"w-5 h-5 text-white/70\" />\n                    </button>\n                </div>\n\n                <div className=\"p-4 space-y-4\">\n                    <div className=\"flex gap-2\">\n                        <div className=\"relative flex-1\">\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/50\" />\n                            <input\n                                type=\"text\"\n                                placeholder=\"Search by username...\"\n                                className=\"w-full bg-white/5 border border-white/10 rounded-xl py-2 pl-9 pr-4 text-white placeholder:text-white/30 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all\"\n                                value={query}\n                                onChange={(e) => setQuery(e.target.value)}\n                                onKeyDown={(e) => e.key === 'Enter' && handleSearch()}\n                            />\n                        </div>\n                        <button\n                            onClick={handleSearch}\n                            disabled={loading}\n                            className=\"px-4 py-2 bg-primary text-primary-foreground font-medium rounded-xl hover:bg-primary/90 transition-colors disabled:opacity-50\"\n                        >\n                            {loading ? \"...\" : \"Search\"}\n                        </button>\n                    </div>\n\n                    <div className=\"space-y-2 max-h-[300px] overflow-y-auto custom-scrollbar\">\n                        {results.length === 0 && !loading && query && (\n                            <p className=\"text-center text-white/30 py-4\">No users found.</p>\n                        )}\n\n                        {results.map((user) => (\n                            <div key={user.id} className=\"flex items-center gap-3 p-3 rounded-xl hover:bg-white/5 border border-transparent hover:border-white/5 transition-all\">\n                                <Avatar src={user.avatar_url || undefined} fallback={user.username || user.full_name || \"?\"} />\n                                <div className=\"flex-1 overflow-hidden\">\n                                    <p className=\"font-semibold text-white truncate\">{user.full_name || user.username || \"Unknown\"}</p>\n                                    <p className=\"text-xs text-white/50 truncate\">@{user.username}</p>\n                                </div>\n                                <button\n                                    onClick={() => sendRequest(user.id)}\n                                    disabled={requested.has(user.id)}\n                                    className={cn(\n                                        \"p-2 rounded-full transition-all\",\n                                        requested.has(user.id) ? \"bg-green-500/20 text-green-400\" : \"bg-primary/10 text-primary hover:bg-primary/20\"\n                                    )}\n                                >\n                                    {requested.has(user.id) ? <Check className=\"w-4 h-4\" /> : <UserPlus className=\"w-4 h-4\" />}\n                                </button>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1869, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/connection-requests.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { Avatar } from \"@/components/ui/avatar\";\nimport { Check, X, UserCheck, MessageCircle } from \"lucide-react\";\nimport { Connection } from \"@/lib/types\";\nimport { useRouter } from \"next/navigation\";\n\ninterface ConnectionRequestsProps {\n    onClose: () => void;\n    currentUserId: string;\n}\n\nexport function ConnectionRequests({ onClose, currentUserId }: ConnectionRequestsProps) {\n    const [requests, setRequests] = useState<Connection[]>([]);\n    const [loading, setLoading] = useState(true);\n    const supabase = createClient();\n    const router = useRouter();\n\n    useEffect(() => {\n        fetchRequests();\n    }, []);\n\n    const fetchRequests = async () => {\n        const { data, error } = await supabase\n            .from(\"connections\")\n            .select(\"*, requester:profiles!requester_id(*)\")\n            .eq(\"addressee_id\", currentUserId)\n            .eq(\"status\", \"pending\");\n\n        if (data) {\n            setRequests(data as any); // Cast because Supabase joined types are tricky\n        }\n        setLoading(false);\n    };\n\n    const handleResponse = async (id: string, status: 'accepted' | 'rejected') => {\n        const { error } = await supabase\n            .from(\"connections\")\n            .update({ status })\n            .eq(\"id\", id);\n\n        if (!error) {\n            setRequests((prev) => prev.filter(req => req.id !== id));\n            if (status === 'accepted') {\n                // Find and get request details to get the other user ID\n                const req = requests.find(r => r.id === id);\n                if (req) {\n                    await getOrCreateDm(req.requester_id);\n                }\n            }\n        }\n    };\n\n    const getOrCreateDm = async (otherUserId: string) => {\n        setLoading(true);\n        // 1. Check if a DM room already exists\n        // This is a bit complex in Supabase SQL without a function, but we can try a simple creating approach\n        // or just create a new one for now and rely on unique constraints if we had them (we might not).\n        // Better approach: Create a new room with is_group=false. \n        // Real-world app would query room_participants to find common room.\n\n        // Let's create a new DM room for simplicity and reliability in this session\n        const { data: roomData, error: roomError } = await supabase\n            .from(\"rooms\")\n            .insert({ is_group: false, name: \"Direct Message\" }) // Name is often ignored for DMs in UI\n            .select()\n            .single();\n\n        if (roomData) {\n            // Add participants\n            await supabase.from(\"room_participants\").insert([\n                { room_id: roomData.id, user_id: currentUserId },\n                { room_id: roomData.id, user_id: otherUserId }\n            ]);\n\n            onClose();\n            router.push(`/chat?roomId=${roomData.id}`);\n        } else {\n            console.error(\"Failed to create room\", roomError);\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4\">\n            <div className=\"w-full max-w-md bg-[#1e1e24] border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200\">\n                <div className=\"p-4 border-b border-white/5 flex items-center justify-between\">\n                    <h2 className=\"text-lg font-bold text-white flex items-center gap-2\">\n                        <UserCheck className=\"w-5 h-5 text-primary\" />\n                        Connection Requests\n                    </h2>\n                    <button onClick={onClose} className=\"p-2 hover:bg-white/10 rounded-full transition-colors\">\n                        <X className=\"w-5 h-5 text-white/70\" />\n                    </button>\n                </div>\n\n                <div className=\"p-4 space-y-2 max-h-[400px] overflow-y-auto custom-scrollbar\">\n                    {loading && <p className=\"text-center text-white/30 py-4\">Loading...</p>}\n                    {!loading && requests.length === 0 && (\n                        <div className=\"text-center text-white/30 py-8 flex flex-col items-center gap-2\">\n                            <UserCheck className=\"w-10 h-10 opacity-20\" />\n                            <p>No pending requests.</p>\n                        </div>\n                    )}\n\n                    {requests.map((req) => (\n                        <div key={req.id} className=\"flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5\">\n                            <Avatar\n                                src={req.requester?.avatar_url || undefined}\n                                fallback={req.requester?.username || \"?\"}\n                            />\n                            <div className=\"flex-1 overflow-hidden\">\n                                <p className=\"font-semibold text-white truncate\">\n                                    {req.requester?.full_name || req.requester?.username || \"Unknown User\"}\n                                </p>\n                                <p className=\"text-xs text-white/50 truncate\">\n                                    wants to connect\n                                </p>\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                                <button\n                                    onClick={() => handleResponse(req.id, 'accepted')}\n                                    className=\"p-2 bg-green-500/20 text-green-400 hover:bg-green-500/30 rounded-full transition-colors\"\n                                    title=\"Accept\"\n                                >\n                                    <Check className=\"w-4 h-4\" />\n                                </button>\n                                <button\n                                    onClick={() => handleResponse(req.id, 'rejected')}\n                                    className=\"p-2 bg-red-500/20 text-red-400 hover:bg-red-500/30 rounded-full transition-colors\"\n                                    title=\"Reject\"\n                                >\n                                    <X className=\"w-4 h-4\" />\n                                </button>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2135, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/services/profile-service.ts"],"sourcesContent":["import { safeSupabaseOperation } from '@/lib/supabase/client';\n\nexport interface Profile {\n    id: string;\n    username: string;\n    full_name: string;\n    avatar_url: string;\n    is_online: boolean;\n    last_seen: string;\n    age?: number;\n    phone?: string;\n    bio?: string;\n    gender?: string;\n}\n\nexport interface UpdateProfileData {\n    username?: string;\n    full_name?: string;\n    avatar_url?: string;\n    age?: number;\n    phone?: string;\n    bio?: string;\n    gender?: string;\n}\n\nexport const ProfileService = {\n    async getProfile(userId: string): Promise<{ data: Profile | null; error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { data, error } = await client\n                .from('profiles')\n                .select('*')\n                .eq('id', userId)\n                .single();\n            if (error) return { data: null, error: error.message };\n            return { data: data as Profile, error: null };\n        });\n    },\n\n    async updateProfile(userId: string, updates: UpdateProfileData): Promise<{ error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { error } = await client\n                .from('profiles')\n                .update(updates)\n                .eq('id', userId);\n            return { error: error?.message || null };\n        });\n    },\n\n    async searchProfiles(query: string): Promise<{ data: Profile[]; error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { data, error } = await client\n                .from('profiles')\n                .select('*')\n                .or(`username.ilike.%${query}%,full_name.ilike.%${query}%`)\n                .limit(20);\n            if (error) return { data: [], error: error.message };\n            return { data: data as Profile[], error: null };\n        });\n    },\n\n    async uploadAvatar(userId: string, file: File): Promise<{ data: string | null; error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            try {\n                console.log('[ProfileService] Starting upload for file:', file.name);\n\n                const fileExt = file.name.split('.').pop() || 'jpg';\n                const fileName = `${userId}_${Date.now()}.${fileExt}`;\n                const filePath = `avatars/${fileName}`;\n\n                const { error: uploadError } = await client.storage\n                    .from('gossip-avatars')\n                    .upload(filePath, file, {\n                        contentType: file.type,\n                        upsert: false\n                    });\n\n                if (uploadError) {\n                    console.error('[ProfileService] Upload error:', uploadError);\n                    throw uploadError;\n                }\n\n                const { data } = client.storage\n                    .from('gossip-avatars')\n                    .getPublicUrl(filePath);\n\n                console.log('[ProfileService] Upload successful, URL:', data.publicUrl);\n                return { data: data.publicUrl, error: null };\n            } catch (err: any) {\n                console.error('[ProfileService] Upload failed:', err);\n                return { data: null, error: err.message };\n            }\n        });\n    },\n\n    async updatePushToken(userId: string, token: string): Promise<{ error: string | null }> {\n        return await safeSupabaseOperation(async (client) => {\n            const { error } = await client\n                .from('profiles')\n                .update({ push_token: token })\n                .eq('id', userId);\n\n            if (error) console.error('[ProfileService] Update Token Error:', error);\n\n            return { error: error?.message || null };\n        });\n    }\n};\n"],"names":[],"mappings":";;;;AAAA;;AAyBO,MAAM,iBAAiB;IAC1B,MAAM,YAAW,MAAc;QAC3B,OAAO,MAAM,IAAA,8KAAqB,EAAC,OAAO;YACtC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,OACzB,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,QACT,MAAM;YACX,IAAI,OAAO,OAAO;gBAAE,MAAM;gBAAM,OAAO,MAAM,OAAO;YAAC;YACrD,OAAO;gBAAE,MAAM;gBAAiB,OAAO;YAAK;QAChD;IACJ;IAEA,MAAM,eAAc,MAAc,EAAE,OAA0B;QAC1D,OAAO,MAAM,IAAA,8KAAqB,EAAC,OAAO;YACtC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,OACnB,IAAI,CAAC,YACL,MAAM,CAAC,SACP,EAAE,CAAC,MAAM;YACd,OAAO;gBAAE,OAAO,OAAO,WAAW;YAAK;QAC3C;IACJ;IAEA,MAAM,gBAAe,KAAa;QAC9B,OAAO,MAAM,IAAA,8KAAqB,EAAC,OAAO;YACtC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,OACzB,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,CAAC,gBAAgB,EAAE,MAAM,mBAAmB,EAAE,MAAM,CAAC,CAAC,EACzD,KAAK,CAAC;YACX,IAAI,OAAO,OAAO;gBAAE,MAAM,EAAE;gBAAE,OAAO,MAAM,OAAO;YAAC;YACnD,OAAO;gBAAE,MAAM;gBAAmB,OAAO;YAAK;QAClD;IACJ;IAEA,MAAM,cAAa,MAAc,EAAE,IAAU;QACzC,OAAO,MAAM,IAAA,8KAAqB,EAAC,OAAO;YACtC,IAAI;gBACA,QAAQ,GAAG,CAAC,8CAA8C,KAAK,IAAI;gBAEnE,MAAM,UAAU,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM;gBAC9C,MAAM,WAAW,GAAG,OAAO,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,SAAS;gBACrD,MAAM,WAAW,CAAC,QAAQ,EAAE,UAAU;gBAEtC,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,OAAO,OAAO,CAC9C,IAAI,CAAC,kBACL,MAAM,CAAC,UAAU,MAAM;oBACpB,aAAa,KAAK,IAAI;oBACtB,QAAQ;gBACZ;gBAEJ,IAAI,aAAa;oBACb,QAAQ,KAAK,CAAC,kCAAkC;oBAChD,MAAM;gBACV;gBAEA,MAAM,EAAE,IAAI,EAAE,GAAG,OAAO,OAAO,CAC1B,IAAI,CAAC,kBACL,YAAY,CAAC;gBAElB,QAAQ,GAAG,CAAC,4CAA4C,KAAK,SAAS;gBACtE,OAAO;oBAAE,MAAM,KAAK,SAAS;oBAAE,OAAO;gBAAK;YAC/C,EAAE,OAAO,KAAU;gBACf,QAAQ,KAAK,CAAC,mCAAmC;gBACjD,OAAO;oBAAE,MAAM;oBAAM,OAAO,IAAI,OAAO;gBAAC;YAC5C;QACJ;IACJ;IAEA,MAAM,iBAAgB,MAAc,EAAE,KAAa;QAC/C,OAAO,MAAM,IAAA,8KAAqB,EAAC,OAAO;YACtC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,OACnB,IAAI,CAAC,YACL,MAAM,CAAC;gBAAE,YAAY;YAAM,GAC3B,EAAE,CAAC,MAAM;YAEd,IAAI,OAAO,QAAQ,KAAK,CAAC,wCAAwC;YAEjE,OAAO;gBAAE,OAAO,OAAO,WAAW;YAAK;QAC3C;IACJ;AACJ"}},
    {"offset": {"line": 2222, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/ui/gradient-text.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface GradientTextProps {\n    text: string;\n    className?: string;\n    colors?: [string, string];\n}\n\nexport function GradientText({ text, className, colors = ['#00BFFF', '#FFB6C1'] }: GradientTextProps) {\n    return (\n        <span\n            className={cn(\"bg-clip-text text-transparent\", className)}\n            style={{\n                backgroundImage: `linear-gradient(to right, ${colors[0]}, ${colors[1]})`,\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent'\n            }}\n        >\n            {text}\n        </span>\n    );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAWO,SAAS,aAAa,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS;IAAC;IAAW;CAAU,EAAqB;IAChG,qBACI,mQAAC;QACG,WAAW,IAAA,8IAAE,EAAC,iCAAiC;QAC/C,OAAO;YACH,iBAAiB,CAAC,0BAA0B,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;YACxE,sBAAsB;YACtB,qBAAqB;QACzB;kBAEC;;;;;;AAGb"}},
    {"offset": {"line": 2253, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/settings-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { X, Shield, Eye, UserX, Loader2, Unlock, Camera, Edit3, Save, Languages, Bell, LogOut, ChevronRight } from \"lucide-react\";\nimport { Avatar } from \"@/components/ui/avatar\";\nimport { useToast } from \"@/contexts/toast-context\";\nimport { useAuth } from \"@/contexts/auth-context\";\nimport { ProfileService, Profile } from \"@/services/profile-service\";\nimport { GradientText } from \"@/components/ui/gradient-text\";\n\nconst translations: Record<string, Record<string, string>> = {\n    'English': {\n        profile: 'Profile',\n        personalInfo: 'PERSONAL INFO',\n        settings: 'SETTINGS',\n        notifications: 'Notifications',\n        language: 'Language',\n        logout: 'Logout',\n        fullName: 'Full Name',\n        username: 'Username',\n        age: 'Age',\n        phone: 'Phone',\n        bio: 'Bio',\n        edit: 'Edit',\n        save: 'Save Changes',\n        cancel: 'Cancel',\n        gender: 'Gender',\n        male: 'Male',\n        female: 'Female',\n        other: 'Other'\n    },\n    'Tamil': {\n        profile: 'à®šà¯à®¯à®µà®¿à®µà®°à®®à¯',\n        personalInfo: 'à®¤à®©à®¿à®ªà¯à®ªà®Ÿà¯à®Ÿ à®¤à®•à®µà®²à¯',\n        settings: 'à®…à®®à¯ˆà®ªà¯à®ªà¯à®•à®³à¯',\n        notifications: 'à®…à®±à®¿à®µà®¿à®ªà¯à®ªà¯à®•à®³à¯',\n        language: 'à®®à¯Šà®´à®¿',\n        logout: 'à®µà¯†à®³à®¿à®¯à¯‡à®±à¯',\n        fullName: 'à®®à¯à®´à¯ à®ªà¯†à®¯à®°à¯',\n        username: 'à®ªà®¯à®©à®°à¯à®ªà¯†à®¯à®°à¯',\n        age: 'à®µà®¯à®¤à¯',\n        phone: 'à®¤à¯Šà®²à¯ˆà®ªà¯‡à®šà®¿',\n        bio: 'à®šà¯à®¯à®šà®°à®¿à®¤à¯ˆ',\n        edit: 'à®¤à¯Šà®•à¯',\n        save: 'à®®à®¾à®±à¯à®±à®™à¯à®•à®³à¯ˆ à®šà¯‡à®®à®¿',\n        cancel: 'à®°à®¤à¯à®¤à¯à®šà¯†à®¯à¯',\n        gender: 'à®ªà®¾à®²à®¿à®©à®®à¯',\n        male: 'à®†à®£à¯',\n        female: 'à®ªà¯†à®£à¯',\n        other: 'à®®à®±à¯à®±à®µà¯ˆ'\n    }\n};\n\nexport function SettingsModal({ onClose, user }: { onClose: () => void; user: any }) {\n    const [isEditing, setIsEditing] = useState(false);\n    const [language, setLanguage] = useState('English');\n    const [profile, setProfile] = useState<Profile | null>(null);\n    const [blockedUsers, setBlockedUsers] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [saving, setSaving] = useState(false);\n    const [notificationsEnabled, setNotificationsEnabled] = useState(true);\n    const [activeTab, setActiveTab] = useState<'info' | 'settings' | 'blocked'>('info');\n\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const supabase = createClient();\n    const { addToast } = useToast();\n    const { logout } = useAuth();\n    const t = translations[language];\n\n    const [form, setForm] = useState({\n        full_name: '',\n        username: '',\n        age: '',\n        phone: '',\n        bio: '',\n        gender: ''\n    });\n\n    useEffect(() => {\n        const fetchData = async () => {\n            setLoading(true);\n            const { data: prof } = await ProfileService.getProfile(user.id);\n            if (prof) {\n                setProfile(prof);\n                setForm({\n                    full_name: prof.full_name || '',\n                    username: prof.username || '',\n                    age: prof.age?.toString() || '',\n                    phone: prof.phone || '',\n                    bio: prof.bio || '',\n                    gender: prof.gender || ''\n                });\n            }\n\n            const { data: blocks } = await supabase\n                .from(\"blocked_users\")\n                .select(`*, blocked:profiles!blocked_id(*)`)\n                .eq(\"blocker_id\", user.id);\n\n            if (blocks) setBlockedUsers(blocks);\n            setLoading(false);\n        };\n\n        fetchData();\n    }, [user.id, supabase]);\n\n    const handleSave = async () => {\n        setSaving(true);\n        const { error } = await ProfileService.updateProfile(user.id, {\n            ...form,\n            age: parseInt(form.age) || undefined\n        });\n\n        if (!error) {\n            addToast(\"Profile updated\", \"success\");\n            setIsEditing(false);\n            setProfile(prev => prev ? { ...prev, ...form, age: parseInt(form.age) || undefined } : null);\n        } else {\n            addToast(error, \"error\");\n        }\n        setSaving(false);\n    };\n\n    const handleAvatarClick = () => {\n        fileInputRef.current?.click();\n    };\n\n    const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (!file) return;\n\n        setSaving(true);\n        const { data: url, error } = await ProfileService.uploadAvatar(user.id, file);\n        if (url) {\n            await ProfileService.updateProfile(user.id, { avatar_url: url });\n            setProfile(prev => prev ? { ...prev, avatar_url: url } : null);\n            addToast(\"Avatar updated\", \"success\");\n        } else if (error) {\n            addToast(error, \"error\");\n        }\n        setSaving(false);\n    };\n\n    const handleUnblock = async (blockId: string) => {\n        const { error } = await supabase.from(\"blocked_users\").delete().eq(\"id\", blockId);\n        if (!error) {\n            setBlockedUsers(prev => prev.filter(b => b.id !== blockId));\n            addToast(\"User unblocked\", \"success\");\n        }\n    };\n\n    const getGlowColor = () => {\n        switch (form.gender?.toLowerCase()) {\n            case 'male': return 'from-[#00BFFF] to-transparent';\n            case 'female': return 'from-[#FFB6C1] to-transparent';\n            case 'other': return 'from-[#FFD700] to-transparent';\n            default: return 'from-primary/20 to-transparent';\n        }\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black/95 backdrop-blur-xl flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-black border border-white/10 w-full max-w-2xl rounded-[40px] shadow-2xl overflow-hidden relative flex flex-col max-h-[90vh]\">\n                {/* Background Decor */}\n                <div className={`absolute top-0 left-0 right-0 h-64 bg-gradient-to-b ${getGlowColor()} opacity-20 pointer-events-none transition-all duration-500`} />\n\n                {/* Header */}\n                <div className=\"p-8 pb-4 flex items-center justify-between relative z-10\">\n                    <div className=\"flex items-center gap-3\">\n                        <div className=\"p-3 rounded-2xl bg-white/5 border border-white/10\">\n                            <Shield className=\"w-6 h-6 text-primary\" />\n                        </div>\n                        <h2 className=\"text-2xl font-black text-white italic uppercase tracking-tight\">\n                            Identity <span className=\"text-primary\">&</span> Settings\n                        </h2>\n                    </div>\n                    <button onClick={onClose} className=\"p-3 bg-white/5 hover:bg-white/10 rounded-2xl text-white/40 hover:text-white transition-all shadow-lg\">\n                        <X className=\"w-6 h-6\" />\n                    </button>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar p-8 pt-0 relative z-10\">\n                    <div className=\"flex flex-col md:flex-row gap-8\">\n                        {/* Left Sidebar */}\n                        <div className=\"flex flex-col gap-4 md:w-48\">\n                            <button\n                                onClick={() => setActiveTab('info')}\n                                className={`flex items-center gap-3 p-4 rounded-2xl transition-all border ${activeTab === 'info' ? 'bg-primary/10 border-primary/20 text-primary shadow-lg shadow-primary/5' : 'bg-white/5 border-white/5 text-white/40 hover:text-white hover:bg-white/10'}`}\n                            >\n                                <Edit3 className=\"w-5 h-5\" />\n                                <span className=\"font-black text-[10px] uppercase tracking-[0.2em]\">Profile</span>\n                            </button>\n                            <button\n                                onClick={() => setActiveTab('settings')}\n                                className={`flex items-center gap-3 p-4 rounded-2xl transition-all border ${activeTab === 'settings' ? 'bg-primary/10 border-primary/20 text-primary shadow-lg shadow-primary/5' : 'bg-white/5 border-white/5 text-white/40 hover:text-white hover:bg-white/10'}`}\n                            >\n                                <Languages className=\"w-5 h-5\" />\n                                <span className=\"font-black text-[10px] uppercase tracking-[0.2em]\">Options</span>\n                            </button>\n                            <button\n                                onClick={() => setActiveTab('blocked')}\n                                className={`flex items-center gap-3 p-4 rounded-2xl transition-all border ${activeTab === 'blocked' ? 'bg-secondary/10 border-secondary/20 text-secondary shadow-lg shadow-secondary/5' : 'bg-white/5 border-white/5 text-white/40 hover:text-white hover:bg-white/10'}`}\n                            >\n                                <UserX className=\"w-5 h-5\" />\n                                <span className=\"font-black text-[10px] uppercase tracking-[0.2em]\">Ghosts</span>\n                            </button>\n\n                            <div className=\"mt-auto pt-8\">\n                                <button onClick={logout} className=\"w-full flex items-center justify-center gap-2 p-4 rounded-2xl bg-secondary opacity-80 hover:opacity-100 transition-all text-black font-black uppercase text-[10px] tracking-widest shadow-lg shadow-secondary/10\">\n                                    <LogOut className=\"w-4 h-4\" />\n                                    {t.logout}\n                                </button>\n                                <p className=\"text-center text-[9px] font-black text-white/20 mt-4 tracking-[0.3em] uppercase\">GOSSIP v1.2.0 â€¢ Web</p>\n                            </div>\n                        </div>\n\n                        {/* Right Content */}\n                        <div className=\"flex-1\">\n                            {activeTab === 'info' && (\n                                <div className=\"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500\">\n                                    {/* Avatar/Header Item */}\n                                    <div className=\"flex flex-col items-center gap-6\">\n                                        <div className=\"relative group\">\n                                            <div className=\"w-32 h-32 rounded-[40px] p-1 bg-gradient-to-br from-primary via-white/10 to-secondary shadow-2xl relative overflow-hidden\">\n                                                <div className={`absolute inset-0 bg-gradient-to-br ${getGlowColor()} opacity-40 blur-xl group-hover:opacity-60 transition-opacity`} />\n                                                <Avatar src={profile?.avatar_url || user.user_metadata?.avatar_url} fallback={profile?.username?.[0] || \"?\"} className=\"w-full h-full rounded-[36px] relative z-10\" />\n                                            </div>\n                                            <button\n                                                onClick={handleAvatarClick}\n                                                className=\"absolute -bottom-2 -right-2 p-3 bg-primary text-black rounded-2xl shadow-xl hover:scale-110 transition-transform z-20 border-4 border-black\"\n                                                disabled={saving}\n                                            >\n                                                <Camera className=\"w-4 h-4\" />\n                                            </button>\n                                            <input type=\"file\" ref={fileInputRef} className=\"hidden\" onChange={handleFileChange} accept=\"image/*\" />\n                                        </div>\n                                        <div className=\"text-center\">\n                                            <GradientText text={profile?.full_name || 'NEW GOSSIPER'} className=\"text-3xl font-black italic uppercase tracking-tighter\" />\n                                            <p className=\"text-white/30 text-[10px] font-black tracking-[0.3em] uppercase mt-1\">@{profile?.username || 'unknown'}</p>\n                                        </div>\n                                    </div>\n\n                                    {/* Form */}\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                        <div className=\"space-y-2\">\n                                            <label className=\"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4\">{t.fullName}</label>\n                                            <input\n                                                value={form.full_name}\n                                                onChange={(e) => setForm(f => ({ ...f, full_name: e.target.value }))}\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-white font-bold focus:border-primary/50 transition-all outline-none\"\n                                                placeholder=\"Enter full name\"\n                                            />\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <label className=\"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4\">{t.username}</label>\n                                            <input\n                                                value={form.username}\n                                                onChange={(e) => setForm(f => ({ ...f, username: e.target.value }))}\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-white font-bold focus:border-primary/50 transition-all outline-none\"\n                                                placeholder=\"username\"\n                                            />\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <label className=\"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4\">{t.gender}</label>\n                                            <div className=\"grid grid-cols-3 gap-2\">\n                                                {['Male', 'Female', 'Other'].map(g => (\n                                                    <button\n                                                        key={g}\n                                                        onClick={() => setForm(f => ({ ...f, gender: g }))}\n                                                        className={`p-4 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all border ${form.gender === g ? 'bg-primary text-black border-primary' : 'bg-white/5 text-white/30 border-white/5 hover:border-white/10'}`}\n                                                    >\n                                                        {t[g.toLowerCase()]}\n                                                    </button>\n                                                ))}\n                                            </div>\n                                        </div>\n                                        <div className=\"space-y-2\">\n                                            <label className=\"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4\">{t.age}</label>\n                                            <input\n                                                value={form.age}\n                                                onChange={(e) => setForm(f => ({ ...f, age: e.target.value }))}\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-white font-bold focus:border-primary/50 transition-all outline-none\"\n                                                placeholder=\"25\"\n                                                type=\"number\"\n                                            />\n                                        </div>\n                                        <div className=\"md:col-span-2 space-y-2\">\n                                            <label className=\"text-[10px] font-black text-white/30 uppercase tracking-widest ml-4\">{t.bio}</label>\n                                            <textarea\n                                                value={form.bio}\n                                                onChange={(e) => setForm(f => ({ ...f, bio: e.target.value }))}\n                                                className=\"w-full bg-white/5 border border-white/10 rounded-2xl p-4 text-white font-bold focus:border-primary/50 transition-all outline-none h-24 resize-none\"\n                                                placeholder=\"Tell Your Story...\"\n                                            />\n                                        </div>\n                                    </div>\n\n                                    <button\n                                        onClick={handleSave}\n                                        disabled={saving}\n                                        className=\"w-full py-5 bg-gradient-to-r from-primary to-primary-dark text-black font-black uppercase italic tracking-[0.2em] rounded-2xl shadow-xl shadow-primary/10 hover:scale-[1.02] transition-all flex items-center justify-center gap-3 active:scale-95\"\n                                    >\n                                        {saving ? <Loader2 className=\"w-5 h-5 animate-spin\" /> : <Save className=\"w-5 h-5\" />}\n                                        {t.save}\n                                    </button>\n                                </div>\n                            )}\n\n                            {activeTab === 'settings' && (\n                                <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-500\">\n                                    <div className=\"p-6 rounded-3xl bg-white/5 border border-white/10 space-y-6\">\n                                        <div className=\"flex items-center justify-between\">\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"p-3 bg-primary/10 rounded-2xl\">\n                                                    <Bell className=\"w-5 h-5 text-primary\" />\n                                                </div>\n                                                <div>\n                                                    <p className=\"text-[11px] font-black uppercase text-white tracking-widest\">{t.notifications}</p>\n                                                    <p className=\"text-[9px] font-bold text-white/30 uppercase tracking-widest\">Real-time alerts</p>\n                                                </div>\n                                            </div>\n                                            <button\n                                                onClick={() => setNotificationsEnabled(!notificationsEnabled)}\n                                                className={`w-14 h-8 rounded-full relative transition-all duration-300 ${notificationsEnabled ? 'bg-primary' : 'bg-white/10'}`}\n                                            >\n                                                <div className={`absolute top-1 w-6 h-6 bg-white rounded-full transition-all duration-300 ${notificationsEnabled ? 'left-7 shadow-lg shadow-black/20' : 'left-1'}`} />\n                                            </button>\n                                        </div>\n\n                                        <div className=\"flex items-center justify-between\">\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"p-3 bg-secondary/10 rounded-2xl\">\n                                                    <Languages className=\"w-5 h-5 text-secondary\" />\n                                                </div>\n                                                <div>\n                                                    <p className=\"text-[11px] font-black uppercase text-white tracking-widest\">{t.language}</p>\n                                                    <p className=\"text-[9px] font-bold text-white/30 uppercase tracking-widest\">Tamil & English supported</p>\n                                                </div>\n                                            </div>\n                                            <select\n                                                value={language}\n                                                onChange={(e) => setLanguage(e.target.value)}\n                                                className=\"bg-white/10 border-none rounded-xl p-3 text-[10px] font-black text-white uppercase tracking-widest outline-none cursor-pointer\"\n                                            >\n                                                <option value=\"English\" className=\"bg-black\">English</option>\n                                                <option value=\"Tamil\" className=\"bg-black\">Tamil</option>\n                                            </select>\n                                        </div>\n\n                                        <div className=\"flex items-center justify-between\">\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"p-3 bg-white/5 rounded-2xl\">\n                                                    <Eye className=\"w-5 h-5 text-white/40\" />\n                                                </div>\n                                                <div>\n                                                    <p className=\"text-[11px] font-black uppercase text-white tracking-widest\">Last Seen</p>\n                                                    <p className=\"text-[9px] font-bold text-white/30 uppercase tracking-widest\">Privacy control</p>\n                                                </div>\n                                            </div>\n                                            <button className=\"w-14 h-8 rounded-full bg-primary relative\"><div className=\"absolute top-1 left-7 w-6 h-6 bg-white rounded-full shadow-lg\" /></button>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"p-6 rounded-3xl bg-secondary/10 border border-secondary/20 flex items-center justify-between\">\n                                        <div className=\"flex items-center gap-4\">\n                                            <Shield className=\"w-6 h-6 text-secondary\" />\n                                            <p className=\"text-[11px] font-black text-secondary uppercase tracking-widest leading-loose\">End-to-End Encryption<br /><span className=\"text-white/40\">Verified & Active</span></p>\n                                        </div>\n                                        <ChevronRight className=\"w-5 h-5 text-secondary opacity-40\" />\n                                    </div>\n                                </div>\n                            )}\n\n                            {activeTab === 'blocked' && (\n                                <div className=\"space-y-4 animate-in fade-in slide-in-from-right-4 duration-500\">\n                                    <div className=\"p-6 rounded-3xl bg-white/5 border border-white/10\">\n                                        <h3 className=\"text-[11px] font-black text-white/40 uppercase tracking-[0.2em] mb-6\">Blocked Manifest</h3>\n\n                                        {loading ? (\n                                            <div className=\"flex flex-col items-center justify-center p-12\">\n                                                <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n                                            </div>\n                                        ) : blockedUsers.length === 0 ? (\n                                            <div className=\"flex flex-col items-center justify-center p-12 space-y-4\">\n                                                <div className=\"p-6 bg-white/5 rounded-full border border-white/10\">\n                                                    <UserX className=\"w-10 h-10 text-white/20\" />\n                                                </div>\n                                                <p className=\"text-xs font-bold text-white/20 uppercase tracking-widest italic text-center\">Your ghost list is empty</p>\n                                            </div>\n                                        ) : (\n                                            <div className=\"space-y-3\">\n                                                {blockedUsers.map((block) => (\n                                                    <div key={block.id} className=\"flex items-center justify-between bg-black/40 p-3 rounded-2xl border border-white/5 group hover:border-white/20 transition-all\">\n                                                        <div className=\"flex items-center gap-4\">\n                                                            <Avatar src={block.blocked?.avatar_url} fallback={block.blocked?.username?.[0] || \"?\"} className=\"w-10 h-10 rounded-xl\" />\n                                                            <div>\n                                                                <p className=\"text-[13px] font-black text-white uppercase tracking-tight\">{block.blocked?.username || \"Unknown Entity\"}</p>\n                                                                <p className=\"text-[9px] font-bold text-white/20 uppercase tracking-[0.2em]\">Restricted Access</p>\n                                                            </div>\n                                                        </div>\n                                                        <button\n                                                            onClick={() => handleUnblock(block.id)}\n                                                            className=\"flex items-center gap-2 px-4 py-2 bg-secondary/10 hover:bg-secondary text-secondary hover:text-black rounded-xl transition-all font-black text-[9px] uppercase tracking-widest\"\n                                                        >\n                                                            <Unlock className=\"w-3 h-3\" />\n                                                            Restore\n                                                        </button>\n                                                    </div>\n                                                ))}\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3418, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/components/sidebar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { Avatar } from \"@/components/ui/avatar\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\nimport { LogOut, MessageSquare, Plus, Search, UserPlus, Users, Phone, Radio } from \"lucide-react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { UserSearch } from \"./user-search\";\nimport { ConnectionRequests } from \"./connection-requests\";\nimport { SettingsModal } from \"./settings-modal\";\nimport { Settings } from \"lucide-react\";\nimport { useStatus } from \"@/contexts/status-context\";\nimport { GradientText } from \"./ui/gradient-text\";\n\ninterface Room {\n    id: string;\n    name: string | null;\n    is_group: boolean;\n    last_message?: string;\n    updated_at: string;\n    room_participants?: {\n        user_id: string;\n        profiles: {\n            username: string;\n            full_name: string;\n            avatar_url: string;\n            gender?: string;\n        }\n    }[];\n}\n\ninterface Connection {\n    id: string;\n    addressee_id: string;\n    requester_id: string;\n    status: string;\n    requester?: { username: string; avatar_url: string; full_name: string; gender?: string };\n    addressee?: { username: string; avatar_url: string; full_name: string; gender?: string };\n}\n\nexport function Sidebar({ user }: { user: any }) {\n    const [rooms, setRooms] = useState<Room[]>([]);\n    const [matches, setMatches] = useState<Connection[]>([]);\n    const [showSearch, setShowSearch] = useState(false);\n    const [showRequests, setShowRequests] = useState(false);\n    const [showSettings, setShowSettings] = useState(false);\n    const [pendingCount, setPendingCount] = useState(0);\n    const [blockedIds, setBlockedIds] = useState<Set<string>>(new Set());\n    const { statuses } = useStatus();\n    const supabase = createClient();\n    const pathname = usePathname();\n    const searchParams = useSearchParams();\n    const router = useRouter();\n    const currentRoomId = searchParams.get(\"roomId\");\n\n    useEffect(() => {\n        const fetchRooms = async () => {\n            const { data } = await supabase\n                .from(\"rooms\")\n                .select(`\n                    *,\n                    room_participants(\n                        user_id,\n                        profiles(username, full_name, avatar_url, gender)\n                    )\n                `)\n                .order(\"updated_at\", { ascending: false });\n\n            if (data) setRooms(data as any);\n        };\n\n        const fetchPendingCount = async () => {\n            const { count } = await supabase\n                .from(\"connections\")\n                .select(\"*\", { count: 'exact', head: true })\n                .eq(\"addressee_id\", user?.id)\n                .eq(\"status\", \"pending\");\n            setPendingCount(count || 0);\n\n            const { data: matchesData } = await supabase\n                .from(\"connections\")\n                .select(`\n                    *,\n                    requester:profiles!requester_id(username, avatar_url, full_name, gender),\n                    addressee:profiles!addressee_id(username, avatar_url, full_name, gender)\n                `)\n                .or(`requester_id.eq.${user.id},addressee_id.eq.${user.id}`)\n                .eq(\"status\", \"accepted\")\n                .limit(10);\n\n            if (matchesData) setMatches(matchesData as any);\n\n            const { data: blocks } = await supabase\n                .from(\"blocked_users\")\n                .select(\"blocked_id\")\n                .eq(\"blocker_id\", user.id);\n\n            if (blocks) {\n                setBlockedIds(new Set(blocks.map(b => b.blocked_id)));\n            }\n        };\n\n        if (user) {\n            fetchRooms();\n            fetchPendingCount();\n        }\n\n        const roomChannel = supabase\n            .channel(\"rooms_realtime\")\n            .on(\"postgres_changes\", { event: \"*\", schema: \"public\", table: \"rooms\" }, () => fetchRooms())\n            .subscribe();\n\n        const connectionChannel = supabase\n            .channel(\"connections_sidebar\")\n            .on(\"postgres_changes\", { event: \"*\", schema: \"public\", table: \"connections\" }, () => fetchPendingCount())\n            .subscribe();\n\n        return () => {\n            supabase.removeChannel(roomChannel);\n            supabase.removeChannel(connectionChannel);\n        };\n    }, [user, supabase]);\n\n    const handleCreateRoom = async () => {\n        const name = prompt(\"Enter room name:\");\n        if (!name) return;\n\n        const { data, error } = await supabase.from(\"rooms\").insert({ name, is_group: true, updated_at: new Date().toISOString() }).select().single();\n        if (error) alert(error.message);\n        else {\n            await supabase.from(\"room_participants\").insert({ room_id: data.id, user_id: user.id });\n            router.push(`/chat?roomId=${data.id}`);\n        }\n    };\n\n    const handleLogout = async () => {\n        await supabase.auth.signOut();\n        router.push(\"/login\");\n    };\n\n    const getNameColor = (gender?: string) => {\n        switch (gender?.toLowerCase()) {\n            case 'male': return '#00BFFF';\n            case 'female': return '#FFB6C1';\n            case 'other': return '#FFD700';\n            default: return '#FFF';\n        }\n    };\n\n    const formatTime = (dateStr: string) => {\n        if (!dateStr) return \"\";\n        const date = new Date(dateStr);\n        const now = new Date();\n        const diff = now.getTime() - date.getTime();\n        const minutes = Math.floor(diff / 60000);\n        if (minutes < 1) return 'Just now';\n        if (minutes < 60) return `${minutes}m`;\n        const hours = Math.floor(minutes / 60);\n        if (hours < 24) return `${hours}h`;\n        return date.toLocaleDateString([], { month: 'short', day: 'numeric' });\n    };\n\n    return (\n        <>\n            <aside className=\"w-full h-full bg-black text-foreground flex flex-col font-sans overflow-hidden\">\n                {/* Header */}\n                <div className=\"px-[20px] pt-[10px] pb-[15px]\">\n                    <div className=\"flex justify-between items-center mb-1\">\n                        <div className=\"flex items-center gap-1\">\n                            <GradientText text=\"GOSSIP.\" className=\"text-[32px] font-[900] tracking-[0.5px]\" />\n                            <img\n                                src=\"/images/gossip_header_doodle.png\"\n                                alt=\"Gossip Doodle\"\n                                className=\"w-[50px] h-[50px] object-contain -mt-2 opacity-80\"\n                            />\n                        </div>\n                        <button\n                            onClick={() => setShowRequests(true)}\n                            className=\"relative p-1\"\n                        >\n                            <div className=\"w-[28px] h-[28px]\">\n                                <img src=\"data:image/svg+xml;base64,...\" alt=\"\" className=\"hidden\" />\n                                {/* Using Lucide icon to match Expo Ionicons name=\"notifications-outline\" */}\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\" /><path d=\"M10.3 21a1.94 1.94 0 0 0 3.4 0\" /></svg>\n                            </div>\n                            {pendingCount > 0 && (\n                                <div className=\"absolute -top-1 -right-1 min-w-[18px] h-[18px] rounded-full bg-red-500 border-2 border-black flex items-center justify-center\">\n                                    <span className=\"text-white text-[10px] font-[900]\">{pendingCount}</span>\n                                </div>\n                            )}\n                        </button>\n                    </div>\n                    <p className=\"text-[13px] text-[#888] font-medium mt-1\">Connect, share, and whisper in style.</p>\n                </div>\n\n                {/* Search Bar */}\n                <div className=\"px-[20px] mb-[15px]\">\n                    <div className=\"bg-[#111] h-[48px] rounded-[24px] flex items-center px-[15px] gap-3 border border-[#222]\">\n                        <Search className=\"w-5 h-5 text-[#666]\" />\n                        <input\n                            placeholder=\"Search friends or gossip...\"\n                            className=\"bg-transparent border-none outline-none text-[15px] w-full placeholder-[#666] text-white font-normal\"\n                            readOnly\n                            onClick={() => setShowSearch(true)}\n                        />\n                    </div>\n                </div>\n\n                {/* Vibes Card */}\n                <div className=\"px-4 mb-4\">\n                    <div className=\"bg-[#111] border border-[#222] rounded-[35px] p-5\">\n                        <h3 className=\"text-[11px] font-[800] tracking-[1.5px] text-[#444] mb-4 uppercase ml-1\">VIBES</h3>\n                        <div className=\"flex gap-5 overflow-x-auto pb-2 scrollbar-hide\">\n                            <button onClick={() => router.push('/chat/status')} className=\"flex flex-col items-center gap-3 min-w-[58px]\">\n                                <div className=\"relative\">\n                                    <Avatar src={user?.user_metadata?.avatar_url} fallback={user?.email?.[0] || \"?\"} className=\"w-[58px] h-[58px] rounded-full border-2 border-[#333] opacity-50\" />\n                                    <div className=\"absolute bottom-0 right-0 w-[20px] h-[20px] bg-[#00BFFF] rounded-full flex items-center justify-center border-2 border-black\">\n                                        <Plus className=\"w-[12px] h-[12px] text-black\" strokeWidth={3} />\n                                    </div>\n                                </div>\n                                <span className=\"text-[11px] font-bold text-white/60\">Your Vibe</span>\n                            </button>\n\n                            {/* Active Statuses List */}\n                            {Array.from(new Set(statuses.filter((s: any) => s.user_id !== user.id).map((s: any) => s.user_id))).map((userId: any) => {\n                                const status = statuses.find((s: any) => s.user_id === userId);\n                                if (!status || !status.profiles) return null;\n                                const profile = status.profiles;\n\n                                return (\n                                    <button\n                                        key={userId}\n                                        onClick={() => router.push('/chat/status')}\n                                        className=\"flex flex-col items-center gap-3 min-w-[58px]\"\n                                    >\n                                        <div className=\"relative p-[2px] rounded-full bg-gradient-to-tr from-[#00BFFF] to-[#FFB6C1]\">\n                                            <div className=\"p-[2px] bg-black rounded-full\">\n                                                <Avatar src={profile.avatar_url} fallback={profile.username?.[0] || \"?\"} className=\"w-[50px] h-[50px]\" />\n                                            </div>\n                                        </div>\n                                        <span className=\"text-[11px] font-black text-center truncate w-full text-white tracking-tight uppercase\">{profile.username}</span>\n                                    </button>\n                                );\n                            })}\n                        </div>\n                    </div>\n                </div>\n\n                {/* Recent Gossips Card */}\n                <div className=\"flex-1 px-4 mb-4 min-h-0 flex flex-col\">\n                    <div className=\"bg-[#111] border border-[#222] rounded-[35px] flex-1 flex flex-col overflow-hidden\">\n                        {/* Header */}\n                        <div className=\"px-6 pt-5 pb-2 flex items-center gap-[10px]\">\n                            <h3 className=\"text-[11px] font-[800] tracking-[1.5px] text-[#444] uppercase\">RECENT GOSSIPS</h3>\n                        </div>\n\n                        {/* Chat List */}\n                        <div className=\"flex-1 overflow-y-auto custom-scrollbar p-2\">\n                            <div className=\"space-y-1\">\n                                {rooms.filter(room => {\n                                    const other = room.room_participants?.find(p => p.user_id !== user?.id);\n                                    if (other && blockedIds.has(other.user_id)) return false;\n                                    return true;\n                                }).map((room) => {\n                                    let displayName = room.name || \"UNNAMED CHAT\";\n                                    let displayAvatar = undefined;\n                                    let isOnline = false;\n                                    let gender = undefined;\n\n                                    if (room.room_participants) {\n                                        const other = room.room_participants.find(p => p.user_id !== user?.id);\n                                        if (other && other.profiles) {\n                                            displayName = (other.profiles.full_name || other.profiles.username || \"Unknown User\").toUpperCase();\n                                            displayAvatar = other.profiles.avatar_url;\n                                            isOnline = true;\n                                            gender = other.profiles.gender;\n                                        }\n                                    }\n\n                                    const isActive = currentRoomId === room.id;\n\n                                    return (\n                                        <Link href={`/chat?roomId=${room.id}`} key={room.id} className=\"block group\">\n                                            <div className={cn(\n                                                \"px-6 py-3 transition-all cursor-pointer flex items-center gap-4\",\n                                                isActive ? \"bg-primary/10\" : \"hover:bg-white/[0.03]\"\n                                            )}>\n                                                <div className=\"relative\">\n                                                    <Avatar\n                                                        src={displayAvatar}\n                                                        fallback={displayName[0] || \"?\"}\n                                                        className=\"w-[58px] h-[58px] rounded-full ring-2 ring-white/5\"\n                                                    />\n                                                    {isOnline && (\n                                                        <span className=\"absolute bottom-0 right-1 w-4 h-4 bg-online border-[3px] border-black rounded-full\"></span>\n                                                    )}\n                                                </div>\n                                                <div className=\"overflow-hidden flex-1 border-b border-white/5 pb-3 group-last:border-none\">\n                                                    <div className=\"flex justify-between items-center mb-1\">\n                                                        <p className=\"text-[16px] font-black tracking-tight truncate\" style={{ color: getNameColor(gender) }}>\n                                                            {displayName}\n                                                        </p>\n                                                        <p className=\"text-[11px] font-bold text-white/20\">\n                                                            {formatTime(room.updated_at)}\n                                                        </p>\n                                                    </div>\n                                                    <div className=\"flex justify-between items-center\">\n                                                        <p className={cn(\"text-xs truncate flex-1 pr-2 font-medium\", isActive ? \"text-primary/70\" : \"text-white/30\")}>\n                                                            {room.last_message || \"Started a gossip...\"}\n                                                        </p>\n                                                        {/* Mocked unread badge if needed */}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </Link>\n                                    )\n                                })}\n                                {rooms.length === 0 && (\n                                    <div className=\"flex flex-col items-center justify-center p-12 text-center\">\n                                        <MessageSquare className=\"w-12 h-12 text-white/10 mb-4\" />\n                                        <p className=\"text-xs text-white/30 font-bold uppercase tracking-widest italic\">No gossips yet</p>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Footer User Info */}\n                <div className=\"p-4 border-t border-white/5 bg-black/80 backdrop-blur-md\">\n                    <div className=\"flex items-center gap-3\">\n                        <Avatar src={user?.user_metadata?.avatar_url} fallback={user?.email || \"?\"} className=\"w-10 h-10 ring-2 ring-white/10 shadow-lg\" />\n                        <div className=\"flex-1 overflow-hidden\">\n                            <p className=\"text-[13px] font-black truncate text-white uppercase tracking-tight\">{user?.user_metadata?.username || user?.email?.split('@')[0]}</p>\n                            <p className=\"text-[11px] font-bold text-primary flex items-center gap-1 uppercase tracking-widest\">\n                                Online\n                            </p>\n                        </div>\n                        <div className=\"flex gap-1\">\n                            <button onClick={() => setShowSettings(true)} className=\"text-white/40 hover:text-white transition-colors p-2 hover:bg-white/5 rounded-xl\">\n                                <Settings className=\"w-5 h-5\" />\n                            </button>\n                            <button onClick={handleLogout} className=\"text-white/40 hover:text-secondary transition-colors p-2 hover:bg-white/5 rounded-xl\">\n                                <LogOut className=\"w-5 h-5\" />\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </aside>\n            {showSearch && <UserSearch onClose={() => setShowSearch(false)} currentUserId={user?.id} />}\n            {showRequests && <ConnectionRequests onClose={() => setShowRequests(false)} currentUserId={user?.id} />}\n            {showSettings && <SettingsModal onClose={() => setShowSettings(false)} user={user} />}\n        </>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4174, "column": 0}, "map": {"version":3,"sources":["file:///Users/apple/Desktop/GOSSIP/src/app/chat/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useSearchParams } from \"next/navigation\";\nimport { Suspense, useEffect, useState } from \"react\";\nimport { createClient } from \"@/lib/supabase/client\";\nimport { User } from \"@supabase/supabase-js\";\nimport ChatWindow from \"@/components/chat-window\";\nimport { Sidebar } from \"@/components/sidebar\";\n\nfunction ChatContent() {\n    const searchParams = useSearchParams();\n    const roomId = searchParams.get(\"roomId\");\n    const [user, setUser] = useState<User | null>(null);\n    const supabase = createClient();\n\n    useEffect(() => {\n        supabase.auth.getUser().then(({ data: { user } }) => setUser(user));\n    }, [supabase.auth]);\n\n    if (!user) return null;\n\n    if (!roomId) {\n        return <Sidebar user={user} />;\n    }\n\n    return <ChatWindow roomId={roomId} user={user} />;\n}\n\nexport default function DashboardPage() {\n    return (\n        <Suspense fallback={<div>Loading...</div>}>\n            <ChatContent />\n        </Suspense>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;AAPA;;;;;;;AASA,SAAS;IACL,MAAM,eAAe,IAAA,0KAAe;IACpC,MAAM,SAAS,aAAa,GAAG,CAAC;IAChC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,sOAAQ,EAAc;IAC9C,MAAM,WAAW,IAAA,qKAAY;IAE7B,IAAA,uOAAS,EAAC;QACN,SAAS,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAK,QAAQ;IACjE,GAAG;QAAC,SAAS,IAAI;KAAC;IAElB,IAAI,CAAC,MAAM,OAAO;IAElB,IAAI,CAAC,QAAQ;QACT,qBAAO,mQAAC,6JAAO;YAAC,MAAM;;;;;;IAC1B;IAEA,qBAAO,mQAAC,oKAAU;QAAC,QAAQ;QAAQ,MAAM;;;;;;AAC7C;AAEe,SAAS;IACpB,qBACI,mQAAC,sOAAQ;QAAC,wBAAU,mQAAC;sBAAI;;;;;;kBACrB,cAAA,mQAAC;;;;;;;;;;AAGb"}}]
}