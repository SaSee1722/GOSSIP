module.exports=[96496,34240,a=>{"use strict";let b=(0,a.i(70981).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96496);var c=a.i(99881),d=a.i(83749);function e({text:a,className:b,colors:e=["#00BFFF","#FFB6C1"]}){return(0,c.jsx)("span",{className:(0,d.cn)("bg-clip-text text-transparent",b),style:{backgroundImage:`linear-gradient(to right, ${e[0]}, ${e[1]})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:a})}a.s(["GradientText",()=>e],34240)},93205,a=>{"use strict";let b=(0,a.i(70981).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],93205)},88409,a=>{"use strict";let b=(0,a.i(70981).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);a.s(["Camera",()=>b],88409)},13379,a=>{"use strict";let b=(0,a.i(70981).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);a.s(["Send",()=>b],13379)},14476,a=>{"use strict";var b=a.i(99881),c=a.i(78540),d=a.i(22536),e=a.i(93205),f=a.i(96496),g=a.i(88409),h=a.i(14359),i=a.i(13379),j=a.i(52053),k=a.i(34240),l=a.i(57120),m=a.i(75489),n=a.i(54720);function o(){let{statuses:a,loading:o,uploadStatus:p,refreshStatuses:q}=(0,c.useStatus)(),{user:r}=(0,d.useAuth)(),{addToast:s}=(0,n.useToast)(),[t,u]=(0,l.useState)(null),[v,w]=(0,l.useState)(0),[x,y]=(0,l.useState)(0),[z,A]=(0,l.useState)("grid"),[B,C]=(0,l.useState)(null),[D,E]=(0,l.useState)(""),[F,G]=(0,l.useState)(!1),H=(0,l.useRef)(null),I=(0,l.useRef)(null),J=(0,l.useRef)(null),K=(0,l.useRef)(null),L=Object.values(a.reduce((a,b)=>{let c=b.user_id;return a[c]||(a[c]={...b.profiles,items:[]}),a[c].items.push(b),a},{})).map(a=>({user:a,items:a.items}));(0,l.useEffect)(()=>()=>{B?.url&&URL.revokeObjectURL(B.url),N()},[]),(0,l.useEffect)(()=>{let a;return t&&(y(0),a=setInterval(()=>{y(a=>{if(a>=100)if(v<t.items.length-1)return w(v+1),0;else return u(null),0;return a+1})},50)),()=>clearInterval(a)},[t,v]);let M=async()=>{try{A("camera");let a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});J.current=a,H.current&&(H.current.srcObject=a)}catch(a){console.error(a),s("Unable to access camera. Please check permissions.","error"),A("grid")}},N=()=>{J.current&&(J.current.getTracks().forEach(a=>a.stop()),J.current=null)},O=async a=>{let b=a.target.files?.[0];if(!b)return;if(b.size>0x3200000)return void s("File size too large. Max 50MB allowed.","error");let c=b.type.startsWith("video/");if(c&&await R(b)>32)return void s("Video too long. Max 30 seconds allowed.","error");let d=URL.createObjectURL(b);C({file:b,url:d,type:c?"video":"image"}),A("preview"),a.target.value=""},P=async()=>{if(B&&r){G(!0);try{let{data:a,error:b}=await m.StatusService.uploadMedia(B.file);if(b)throw Error(b);a&&(await p(a,D),s("Whisper posted!","success"),q(),Q())}catch(a){s(a.message||"Failed to post whisper","error")}finally{G(!1)}}},Q=()=>{A("grid"),C(null),E(""),J.current&&N()},R=a=>new Promise(b=>{try{let c=document.createElement("video");c.preload="metadata",c.onloadedmetadata=()=>{b(c.duration),window.URL.revokeObjectURL(c.src)},c.onerror=()=>b(0),c.src=URL.createObjectURL(a)}catch{b(0)}}),S=a=>{switch(a?.toLowerCase()){case"male":return"#00BFFF";case"female":return"#FFB6C1";case"other":return"#FFD700";default:return"#FFF"}},T=a=>["mp4","webm","mov","ogg"].includes(a.split(".").pop()?.toLowerCase()||"");return(0,b.jsxs)("div",{className:"flex-1 flex flex-col bg-black h-full relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-secondary/10 rounded-full blur-[150px] pointer-events-none"}),"grid"===z&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("header",{className:"p-8 pb-4 flex items-center justify-between relative z-10",children:[(0,b.jsx)("div",{className:"flex items-center gap-6",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(k.GradientText,{text:"Whispers",className:"text-5xl font-black italic uppercase tracking-tighter"}),(0,b.jsx)("div",{className:"w-16 h-16 relative",children:(0,b.jsx)("img",{src:"/gossip_illustration.png",alt:"Whispers",className:"w-full h-full object-contain opacity-80"})})]}),(0,b.jsx)("p",{className:"text-white/30 text-xs font-bold uppercase tracking-[0.2em] mt-1",children:"Disappearing stories of your circle."})]})}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:M,className:"p-5 bg-white/5 border border-white/10 rounded-[24px] hover:bg-white/10 transition-all text-white",children:(0,b.jsx)(g.Camera,{className:"w-8 h-8"})}),(0,b.jsx)("input",{type:"file",ref:K,className:"hidden",accept:"image/*,video/*",onChange:O})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8 pt-4 relative z-10",children:o?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(f.Loader2,{className:"w-10 h-10 animate-spin text-secondary"})}):(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[(0,b.jsxs)("div",{onClick:()=>K.current?.click(),className:"aspect-[3/4] rounded-[40px] bg-white/5 border border-dashed border-white/20 flex flex-col items-center justify-center gap-4 hover:border-secondary transition-all cursor-pointer group active:scale-95",children:[(0,b.jsx)("div",{className:"w-20 h-20 rounded-[30px] bg-secondary/20 flex items-center justify-center text-secondary group-hover:scale-110 transition-all",children:(0,b.jsx)(e.Plus,{className:"w-10 h-10"})}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-white/30 group-hover:text-secondary transition-colors",children:"Post Whisper"})]}),L.map(a=>(0,b.jsxs)("div",{onClick:()=>{u(a),w(0),y(0)},className:"aspect-[3/4] rounded-[40px] relative overflow-hidden border border-white/10 hover:border-secondary transition-all cursor-pointer group",children:[T(a.items[0].media_url)?(0,b.jsx)("video",{src:a.items[0].media_url,className:"absolute inset-0 w-full h-full object-cover group-hover:scale-110 duration-700 transition-all",muted:!0,loop:!0}):(0,b.jsx)("img",{src:a.items[0].media_url,alt:"",className:"absolute inset-0 w-full h-full object-cover group-hover:scale-110 duration-700 transition-all"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"}),(0,b.jsx)("div",{className:"absolute top-6 left-6 right-6 flex gap-2",children:a.items.map((a,c)=>(0,b.jsx)("div",{className:"h-1 flex-1 bg-white/30 rounded-full overflow-hidden",children:0===c&&(0,b.jsx)("div",{className:"h-full bg-secondary w-full"})},c))}),(0,b.jsxs)("div",{className:"absolute bottom-6 left-6 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"relative p-1 rounded-full border-2 border-secondary bg-black ring-4 ring-black",children:(0,b.jsx)(j.Avatar,{src:a.user.avatar_url,fallback:a.user.username?.[0]||"?",className:"w-10 h-10"})}),(0,b.jsxs)("div",{className:"overflow-hidden",children:[(0,b.jsx)("p",{className:"text-[14px] font-black uppercase text-white tracking-tight truncate italic",style:{color:S(a.user.gender)},children:a.user.username}),(0,b.jsx)("p",{className:"text-[9px] font-bold text-white/50 uppercase tracking-widest",children:new Date(a.items[0].created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]},a.user.id))]})})]}),"camera"===z&&(0,b.jsx)("div",{className:"absolute inset-0 z-50 bg-black flex flex-col",children:(0,b.jsxs)("div",{className:"relative flex-1 bg-black overflow-hidden rounded-[40px] m-4 border border-white/10",children:[(0,b.jsx)("video",{ref:H,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),(0,b.jsx)("canvas",{ref:I,className:"hidden"}),(0,b.jsxs)("div",{className:"absolute bottom-10 left-0 right-0 flex items-center justify-center gap-12",children:[(0,b.jsx)("button",{onClick:Q,className:"w-12 h-12 rounded-full bg-black/40 backdrop-blur-md border border-white/20 flex items-center justify-center",children:(0,b.jsx)(h.X,{className:"w-6 h-6 text-white"})}),(0,b.jsx)("button",{onClick:()=>{if(H.current&&I.current){let a=H.current,b=I.current;b.width=a.videoWidth,b.height=a.videoHeight;let c=b.getContext("2d");c&&(c.drawImage(a,0,0,b.width,b.height),b.toBlob(a=>{a&&(C({file:new File([a],`capture_${Date.now()}.png`,{type:"image/png"}),url:URL.createObjectURL(a),type:"image"}),A("preview"),N())},"image/png"))}},className:"w-20 h-20 rounded-full border-4 border-white flex items-center justify-center hover:scale-105 transition-transform active:scale-95 bg-white/10",children:(0,b.jsx)("div",{className:"w-16 h-16 bg-white rounded-full pointer-events-none"})}),(0,b.jsx)("div",{className:"w-12 h-12"})," "]})]})}),"preview"===z&&B&&(0,b.jsx)("div",{className:"absolute inset-0 z-50 bg-black flex flex-col animate-in zoom-in duration-300",children:(0,b.jsxs)("div",{className:"relative flex-1 m-4 rounded-[40px] overflow-hidden border border-white/10 bg-[#111]",children:["video"===B.type?(0,b.jsx)("video",{src:B.url,className:"w-full h-full object-contain",autoPlay:!0,loop:!0,playsInline:!0}):(0,b.jsx)("img",{src:B.url,className:"w-full h-full object-contain"}),(0,b.jsx)("button",{onClick:Q,className:"absolute top-6 right-6 p-3 bg-black/20 hover:bg-black/40 rounded-full backdrop-blur-xl border border-white/10 text-white transition-all z-20",children:(0,b.jsx)(h.X,{className:"w-6 h-6"})}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black via-black/80 to-transparent pt-20",children:(0,b.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{value:D,onChange:a=>E(a.target.value),placeholder:"Add a caption...",autoFocus:!0,className:"w-full bg-transparent text-white placeholder-white/50 text-lg font-medium outline-none border-b border-white/20 pb-2 focus:border-white transition-colors"})}),(0,b.jsx)("button",{onClick:P,disabled:F,className:"p-4 bg-secondary text-black rounded-full font-bold hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:scale-100 shadow-lg shadow-secondary/20",children:F?(0,b.jsx)(f.Loader2,{className:"w-6 h-6 animate-spin"}):(0,b.jsx)(i.Send,{className:"w-6 h-6"})})]})})]})}),t&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black z-[100] flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"relative w-full max-w-lg aspect-[9/16] rounded-[40px] overflow-hidden bg-white/5 shadow-2xl animate-in zoom-in duration-300",children:[T(t.items[v].media_url)?(0,b.jsx)("video",{src:t.items[v].media_url,className:"absolute inset-0 w-full h-full object-contain md:object-cover",autoPlay:!0,playsInline:!0,onEnded:()=>{v<t.items.length-1?(w(v+1),y(0)):u(null)}}):(0,b.jsx)("img",{src:t.items[v].media_url,alt:"",className:"absolute inset-0 w-full h-full object-contain md:object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/60 pointer-events-none"}),(0,b.jsx)("div",{className:"absolute top-8 left-8 right-8 flex gap-2 z-20",children:t.items.map((a,c)=>(0,b.jsxs)("div",{className:"h-1 flex-1 bg-white/20 rounded-full overflow-hidden",children:[c<v&&(0,b.jsx)("div",{className:"h-full bg-white w-full"}),c===v&&(0,b.jsx)("div",{className:"h-full bg-white transition-all duration-50",style:{width:`${x}%`}})]},c))}),(0,b.jsxs)("div",{className:"absolute top-14 left-8 right-8 flex items-center justify-between z-20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(j.Avatar,{src:t.user.avatar_url,fallback:t.user.username[0],className:"w-12 h-12 ring-2 ring-white/50"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white font-black italic uppercase tracking-tight",style:{color:S(t.user.gender)},children:t.user.username}),(0,b.jsx)("p",{className:"text-white/50 text-[10px] uppercase font-bold tracking-widest",children:new Date(t.items[v].created_at).toLocaleTimeString()})]})]}),(0,b.jsx)("button",{onClick:()=>u(null),className:"p-3 bg-black/20 hover:bg-black/40 rounded-full backdrop-blur-xl border border-white/10 text-white transition-all",children:(0,b.jsx)(h.X,{className:"w-6 h-6"})})]}),t.items[v].caption&&(0,b.jsx)("div",{className:"absolute bottom-16 left-8 right-8 z-20 text-center",children:(0,b.jsx)("p",{className:"text-white text-lg font-bold drop-shadow-lg",children:t.items[v].caption})}),(0,b.jsxs)("div",{className:"absolute inset-x-0 top-32 bottom-32 flex z-10",children:[(0,b.jsx)("div",{className:"flex-1 hover:bg-white/5 transition-all cursor-pointer",onClick:()=>{v>0&&(w(v-1),y(0))}}),(0,b.jsx)("div",{className:"flex-1 hover:bg-white/5 transition-all cursor-pointer",onClick:()=>{v<t.items.length-1?(w(v+1),y(0)):u(null)}})]})]})})]})}a.s(["default",()=>o])}];

//# sourceMappingURL=Desktop_GOSSIP_66f72a49._.js.map