{"version":3,"sources":["../../../../../../Desktop/GOSSIP/node_modules/lucide-react/src/icons/mic-off.ts","../../../../../../Desktop/GOSSIP/node_modules/lucide-react/src/icons/mic.ts","../../../../../../Desktop/GOSSIP/node_modules/lucide-react/src/icons/video.ts","../../../../../../Desktop/GOSSIP/src/components/call-overlay.tsx","../../../../../../Desktop/GOSSIP/src/contexts/call-context.tsx","../../../../../../Desktop/GOSSIP/node_modules/lucide-react/src/icons/video-off.ts","../../../../../../Desktop/GOSSIP/node_modules/lucide-react/src/icons/maximize-2.ts","../../../../../../Desktop/GOSSIP/node_modules/lucide-react/src/icons/minimize-2.ts","../../../../../../Desktop/GOSSIP/node_modules/lucide-react/src/icons/phone-off.ts","../../../../../../Desktop/GOSSIP/src/services/call-service.ts"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 19v3', key: 'npa21l' }],\n  ['path', { d: 'M15 9.34V5a3 3 0 0 0-5.68-1.33', key: '1gzdoj' }],\n  ['path', { d: 'M16.95 16.95A7 7 0 0 1 5 12v-2', key: 'cqa7eg' }],\n  ['path', { d: 'M18.89 13.23A7 7 0 0 0 19 12v-2', key: '16hl24' }],\n  ['path', { d: 'm2 2 20 20', key: '1ooewy' }],\n  ['path', { d: 'M9 9v3a3 3 0 0 0 5.12 2.12', key: 'r2i35w' }],\n];\n\n/**\n * @component @name MicOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMTl2MyIgLz4KICA8cGF0aCBkPSJNMTUgOS4zNFY1YTMgMyAwIDAgMC01LjY4LTEuMzMiIC8+CiAgPHBhdGggZD0iTTE2Ljk1IDE2Ljk1QTcgNyAwIDAgMSA1IDEydi0yIiAvPgogIDxwYXRoIGQ9Ik0xOC44OSAxMy4yM0E3IDcgMCAwIDAgMTkgMTJ2LTIiIC8+CiAgPHBhdGggZD0ibTIgMiAyMCAyMCIgLz4KICA8cGF0aCBkPSJNOSA5djNhMyAzIDAgMCAwIDUuMTIgMi4xMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/mic-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MicOff = createLucideIcon('mic-off', __iconNode);\n\nexport default MicOff;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 19v3', key: 'npa21l' }],\n  ['path', { d: 'M19 10v2a7 7 0 0 1-14 0v-2', key: '1vc78b' }],\n  ['rect', { x: '9', y: '2', width: '6', height: '13', rx: '3', key: 's6n7sd' }],\n];\n\n/**\n * @component @name Mic\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMTl2MyIgLz4KICA8cGF0aCBkPSJNMTkgMTB2MmE3IDcgMCAwIDEtMTQgMHYtMiIgLz4KICA8cmVjdCB4PSI5IiB5PSIyIiB3aWR0aD0iNiIgaGVpZ2h0PSIxMyIgcng9IjMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/mic\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Mic = createLucideIcon('mic', __iconNode);\n\nexport default Mic;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'm16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5',\n      key: 'ftymec',\n    },\n  ],\n  ['rect', { x: '2', y: '6', width: '14', height: '12', rx: '2', key: '158x01' }],\n];\n\n/**\n * @component @name Video\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgMTMgNS4yMjMgMy40ODJhLjUuNSAwIDAgMCAuNzc3LS40MTZWNy44N2EuNS41IDAgMCAwLS43NTItLjQzMkwxNiAxMC41IiAvPgogIDxyZWN0IHg9IjIiIHk9IjYiIHdpZHRoPSIxNCIgaGVpZ2h0PSIxMiIgcng9IjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/video\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Video = createLucideIcon('video', __iconNode);\n\nexport default Video;\n","\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { Mic, MicOff, Video, VideoOff, PhoneOff, Maximize2, Minimize2 } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Avatar } from \"./ui/avatar\";\nimport { useCall } from \"@/contexts/call-context\";\n\ninterface CallOverlayProps {\n    roomId: string;\n    currentUser: any;\n    minimize?: boolean;\n    onClose?: () => void;\n}\n\nexport function CallOverlay({ roomId, currentUser, minimize = false, onClose }: CallOverlayProps) {\n    const { localStream, remoteStream, callType, connectionState, signalingStatus, iceCandidateCount } = useCall();\n    const [isMinimized, setIsMinimized] = useState(minimize);\n    const [isMuted, setIsMuted] = useState(false);\n    const [isVideoOff, setIsVideoOff] = useState(false);\n\n    // Refs for media elements\n    const localVideoRef = useRef<HTMLVideoElement>(null);\n    const remoteVideoRef = useRef<HTMLVideoElement>(null);\n\n    useEffect(() => {\n        if (localVideoRef.current && localStream) {\n            localVideoRef.current.srcObject = localStream;\n        }\n    }, [localStream]);\n\n    useEffect(() => {\n        if (remoteVideoRef.current && remoteStream) {\n            remoteVideoRef.current.srcObject = remoteStream;\n            remoteVideoRef.current.play().catch(e => console.error(\"Error auto-playing video:\", e));\n        }\n    }, [remoteStream]);\n\n\n    const toggleMinimize = () => setIsMinimized(!isMinimized);\n\n    const toggleMute = () => {\n        if (localStream) {\n            localStream.getAudioTracks().forEach(track => track.enabled = !track.enabled);\n            setIsMuted(!isMuted);\n        }\n    }\n\n    const toggleVideo = () => {\n        if (localStream) {\n            localStream.getVideoTracks().forEach(track => track.enabled = !track.enabled);\n            setIsVideoOff(!isVideoOff);\n        }\n    }\n\n    const isAudioOnly = callType === 'audio';\n\n    return (\n        <div className={cn(\n            \"fixed transition-all duration-500 ease-in-out bg-black/90 backdrop-blur-md shadow-2xl border border-white/10 overflow-hidden z-50\",\n            isMinimized\n                ? \"bottom-4 right-4 w-72 h-48 rounded-2xl\"\n                : \"inset-4 rounded-3xl\"\n        )}>\n            {/* DEBUG OVERLAY */}\n            <div className=\"absolute top-4 left-4 z-50 bg-black/50 p-2 rounded text-xs text-white/70 font-mono pointer-events-none\">\n                <div>Signal: {signalingStatus}</div>\n                <div>WebRTC: {connectionState}</div>\n                <div>Candidates: {iceCandidateCount}</div>\n                <div>Type: {callType}</div>\n                <div>L-Tracks: {localStream?.getTracks().length || 0}</div>\n                <div>R-Tracks: {remoteStream?.getTracks().length || 0}</div>\n            </div>\n\n            {/* Main Video Area */}\n            <div className=\"relative w-full h-full flex items-center justify-center\">\n                {/* Remote Video or Audio Avatar */}\n                <div className=\"w-full h-full bg-zinc-900 flex items-center justify-center relative\">\n                    {/* Show Avatar if Audio Only OR No Remote Stream yet */}\n                    {(isAudioOnly || !remoteStream) && (\n                        <div className=\"flex flex-col items-center animate-pulse\">\n                            <Avatar fallback=\"Remote\" className=\"w-32 h-32 bg-zinc-800 text-zinc-500 mb-6 text-4xl\" />\n                            <p className=\"text-zinc-400 text-lg font-medium\">\n                                {connectionState === 'connected' ? 'Connected' : 'Connecting...'}\n                            </p>\n                        </div>\n                    )}\n\n                    {/* Video Element - Hidden if Audio Only */}\n                    <video\n                        ref={remoteVideoRef}\n                        autoPlay\n                        playsInline\n                        className={cn(\"absolute inset-0 w-full h-full object-cover\", (isAudioOnly || !remoteStream) && \"opacity-0 pointer-events-none\")}\n                    />\n                </div>\n\n                {/* Local Video (PIP) - Only show if Video Call */}\n                {!isAudioOnly && (\n                    <div className={cn(\n                        \"absolute transition-all duration-300 bg-zinc-800 rounded-xl overflow-hidden shadow-lg border border-white/10 z-10\",\n                        isMinimized ? \"hidden\" : \"top-4 right-4 w-48 h-36\"\n                    )}>\n                        <div className=\"w-full h-full flex items-center justify-center relative bg-black\">\n                            {!localStream && <span className=\"text-xs text-muted-foreground\">You</span>}\n                            <video ref={localVideoRef} autoPlay muted playsInline className=\"w-full h-full object-cover transform -scale-x-100\" />\n                        </div>\n                    </div>\n                )}\n\n                {/* Controls Overlay */}\n                <div className={cn(\n                    \"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/80 to-transparent flex flex-col items-center justify-end transition-opacity z-20\",\n                    isMinimized ? \"opacity-0 hover:opacity-100\" : \"opacity-100\"\n                )}>\n                    {!isMinimized && (\n                        <div className=\"mb-8 text-center\">\n                            <h3 className=\"text-2xl font-bold text-white\">\n                                {isAudioOnly ? \"Voice Call\" : \"Video Call\"}\n                            </h3>\n                            <div className=\"flex items-center justify-center gap-2\">\n                                <span className={cn(\"w-2 h-2 rounded-full\", connectionState === 'connected' ? \"bg-green-500\" : \"bg-yellow-500\")}></span>\n                                <p className=\"text-white/60 capitalize\">{connectionState}</p>\n                            </div>\n                        </div>\n                    )}\n\n                    <div className=\"flex items-center gap-4\">\n                        <button onClick={toggleMute} className={cn(\"p-4 rounded-full transition-all\", isMuted ? \"bg-white text-black\" : \"bg-white/10 text-white hover:bg-white/20\")}>\n                            {isMuted ? <MicOff className=\"w-6 h-6\" /> : <Mic className=\"w-6 h-6\" />}\n                        </button>\n\n                        <button onClick={toggleVideo} className={cn(\"p-4 rounded-full transition-all\", isVideoOff ? \"bg-white text-black\" : \"bg-white/10 text-white hover:bg-white/20\")}>\n                            {isVideoOff ? <VideoOff className=\"w-6 h-6\" /> : <Video className=\"w-6 h-6\" />}\n                        </button>\n\n                        <button\n                            onClick={onClose}\n                            className=\"p-4 rounded-full bg-red-500 text-white hover:bg-red-600 transition-all shadow-lg hover:shadow-red-500/30 scale-100 hover:scale-110\"\n                        >\n                            <PhoneOff className=\"w-8 h-8\" />\n                        </button>\n\n                        <button onClick={toggleMinimize} className=\"p-4 rounded-full bg-white/10 text-white hover:bg-white/20 transition-all\">\n                            {isMinimized ? <Maximize2 className=\"w-6 h-6\" /> : <Minimize2 className=\"w-6 h-6\" />}\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n","\"use client\";\n\nimport { createContext, useContext, useEffect, useRef, useState } from \"react\";\n\nimport { createClient } from \"@/lib/supabase/client\";\nimport { RealtimeChannel } from \"@supabase/supabase-js\";\nimport { CallOverlay } from \"@/components/call-overlay\";\nimport { CallService } from \"@/services/call-service\";\n\ndeclare global {\n    interface Window {\n        iceErrorShown: boolean;\n    }\n}\n\ninterface CallContextType {\n    isInCall: boolean;\n    isIncomingCall: boolean;\n    callDetails: any;\n    startCall: (roomId: string, isVideo?: boolean) => Promise<void>;\n    acceptCall: () => Promise<void>;\n    endCall: () => Promise<void>;\n    localStream: MediaStream | null;\n    remoteStream: MediaStream | null;\n    callType: \"video\" | \"audio\";\n    connectionState: string;\n    signalingStatus: string;\n    iceCandidateCount: number;\n    callHistory: any[];\n    loading: boolean;\n    initiateCall: (receiverId: string, type: 'audio' | 'video') => Promise<void>;\n}\n\nconst CallContext = createContext<CallContextType | null>(null);\n\nexport function useCall() {\n    const context = useContext(CallContext);\n    if (!context) throw new Error(\"useCall must be used within a CallProvider\");\n    return context;\n}\n\nimport { useAuth } from \"./auth-context\";\n\nexport function CallProvider({ children }: { children: React.ReactNode }) {\n    const { user } = useAuth();\n    const [callDetails, setCallDetails] = useState<any>(null);\n    const [localStream, setLocalStream] = useState<MediaStream | null>(null);\n    const [remoteStream, setRemoteStream] = useState<MediaStream | null>(null);\n    const [incomingCall, setIncomingCall] = useState<any>(null);\n    const [callType, setCallType] = useState<\"video\" | \"audio\">(\"video\");\n    const [connectionState, setConnectionState] = useState<string>(\"new\");\n    const [signalingStatus, setSignalingStatus] = useState<string>(\"disconnected\");\n    const [iceCandidateCount, setIceCandidateCount] = useState<number>(0);\n    const [callHistory, setCallHistory] = useState<any[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    // WebRTC refs\n    const peerConnection = useRef<RTCPeerConnection | null>(null);\n    const supabase = createClient();\n    const signalingChannel = useRef<RealtimeChannel | null>(null);\n\n\n\n    const candidateQueue = useRef<any[]>([]); // Queue for early candidates\n\n    // ICE servers (STUN) - Expanded list for better connectivity\n    const pcConfig = {\n        iceServers: [\n            { urls: 'stun:stun.l.google.com:19302' },\n            { urls: 'stun:stun1.l.google.com:19302' },\n            { urls: 'stun:stun2.l.google.com:19302' },\n            { urls: 'stun:global.stun.twilio.com:3478' }\n        ]\n    };\n\n    // 1. Listen for incoming calls\n    useEffect(() => {\n        if (!user) return;\n\n        console.log(\"Listening for calls on user channel:\", user.id);\n        const channel = supabase\n            .channel(`calls:${user.id}`)\n            .on(\n                'postgres_changes',\n                { event: 'INSERT', schema: 'public', table: 'calls', filter: `caller_id=neq.${user.id}` }, // Simply listening for ANY insert might be too broad if not filtering by recipients, but schema is simple. \n                // Wait, the schema 'calls' table has 'room_id'. It doesn't explicitly have 'recipient_id'. \n                // We should probably listen to \"calls\" where I am in the \"room_participants\". \n                // For simplicity/MVP, I'll listen to ALL INSERTs on 'calls' and then check if I'm in the room (client-side filtering) or if it's meant for me.\n                // Actually, a better query would be filtering by my user ID if I had a 'recipient_id' column.\n                // Given current schema, I will subscribe to the global 'calls' table but in a real app this is bad. \n                // Let's rely on the fact that we can subscribe to changes on the Calls table.\n                async (payload) => {\n                    console.log(\"New call detected:\", payload);\n                    // Check if I am a participant in this room?\n                    // For now, let's just show it if it's NOT my own call.\n                    if (payload.new.caller_id !== user.id && payload.new.status === 'active') {\n                        // TODO: Verify if user belongs to payload.new.room_id\n                        setIncomingCall(payload.new);\n                    }\n                }\n            )\n            .subscribe();\n\n        return () => {\n            supabase.removeChannel(channel);\n        };\n    }, [user, supabase]);\n\n    // 2. Fetch call history\n    useEffect(() => {\n        const fetchHistory = async () => {\n            setLoading(true);\n            const { data } = await CallService.getCallHistory();\n            if (data) setCallHistory(data);\n            setLoading(false);\n        };\n\n        if (user) {\n            fetchHistory();\n\n            // Subscribe to call changes to refresh history\n            const channel = supabase\n                .channel('call_history_updates')\n                .on('postgres_changes', { event: '*', schema: 'public', table: 'calls' }, () => {\n                    fetchHistory();\n                })\n                .subscribe();\n\n            return () => {\n                supabase.removeChannel(channel);\n            };\n        }\n    }, [user, supabase]);\n\n    // Cleanup on unmount\n    useEffect(() => {\n        return () => {\n            localStream?.getTracks().forEach(track => track.stop());\n            peerConnection.current?.close();\n        };\n    }, []);\n\n    // We need a ref to store the current call ID for the callback\n    const currentCallIdRef = useRef<string | null>(null);\n    const remoteCandidateQueue = useRef<RTCIceCandidateInit[]>([]); // Buffer for incoming candidates\n\n    const startCall = async (roomId: string, isVideo = true) => {\n        try {\n            setIceCandidateCount(0);\n            const type = isVideo ? 'video' : 'audio';\n            setCallType(type);\n\n            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n                alert(\"Browser not supported (getUserMedia missing).\");\n                return;\n            }\n\n            const stream = await navigator.mediaDevices.getUserMedia({ video: isVideo, audio: true });\n            setLocalStream(stream);\n\n            // Create PC first\n            const pc = new RTCPeerConnection(pcConfig);\n            peerConnection.current = pc;\n            remoteCandidateQueue.current = []; // Reset queue\n\n            // Standard \"Add Track\" pattern\n            stream.getTracks().forEach(track => {\n                pc.addTrack(track, stream);\n            });\n\n            // Force ALL transceivers to sendrecv (ensure bidirectional)\n            pc.getTransceivers().forEach(t => {\n                if (t.direction !== 'stopped') {\n                    t.direction = 'sendrecv';\n                }\n            });\n\n            // Queue for local candidates generated before Call ID is ready\n            const localQueuedCandidates: RTCIceCandidate[] = [];\n\n            // Bind ICE handler IMMEDIATELY\n            pc.onicecandidate = async (event) => {\n                if (event.candidate) {\n                    setIceCandidateCount(prev => prev + 1);\n\n                    if (currentCallIdRef.current) {\n                        // Call ID ready, send immediately\n                        const { error } = await supabase.from('ice_candidates').insert({\n                            call_id: currentCallIdRef.current,\n                            candidate: event.candidate,\n                            sender_id: user?.id\n                        });\n                        if (error) console.error(\"ICE Insert Error:\", error);\n                    } else {\n                        // Call ID not ready, queue it\n                        console.log(\"Queueing local candidate (Call ID not ready)\");\n                        localQueuedCandidates.push(event.candidate);\n                    }\n                }\n            };\n\n            // Bind other events\n            pc.ontrack = (event) => {\n                console.log(\"Track received:\", event.track.kind, event.streams[0]);\n                setRemoteStream(new MediaStream(event.streams[0].getTracks()));\n            };\n            pc.onconnectionstatechange = () => {\n                console.log(\"Connection state changes:\", pc.connectionState);\n                setConnectionState(pc.connectionState);\n            };\n\n\n\n            // Create Offer\n            const offer = await pc.createOffer();\n            await pc.setLocalDescription(offer);\n\n            // Create Call in DB\n            const { data: call, error } = await supabase.from('calls').insert({\n                room_id: roomId,\n                caller_id: user?.id,\n                status: 'active',\n                offer: offer,\n                type: type\n            }).select().single();\n\n            if (error) throw error;\n\n            setCallDetails(call);\n            currentCallIdRef.current = call.id; // Set ref for ICE callback\n\n            // FLUSH QUEUED CANDIDATES\n            if (localQueuedCandidates.length > 0) {\n                console.log(`Flushing ${localQueuedCandidates.length} queued local candidates`);\n                const inserts = localQueuedCandidates.map(c => ({\n                    call_id: call.id,\n                    candidate: c,\n                    sender_id: user?.id\n                }));\n                const { error: flushError } = await supabase.from('ice_candidates').insert(inserts);\n                if (flushError) console.error(\"Error flushing local candidates:\", flushError);\n            }\n\n            // Setup DB handlers\n            setupSignaling(call.id);\n\n\n\n        } catch (err: any) {\n            console.error(\"Error starting call:\", err);\n            alert(`Call failed: ${err.message}`);\n        }\n    };\n\n    const acceptCall = async () => {\n        if (!incomingCall) return;\n\n        try {\n            setIceCandidateCount(0);\n            // ... getUserMedia logic ...\n            const isVideo = incomingCall.type === 'video';\n            setCallType(incomingCall.type || 'video');\n\n            const stream = await navigator.mediaDevices.getUserMedia({ video: isVideo, audio: true });\n            setLocalStream(stream);\n\n            const pc = new RTCPeerConnection(pcConfig);\n            peerConnection.current = pc;\n            currentCallIdRef.current = incomingCall.id;\n            remoteCandidateQueue.current = []; // Reset queue\n\n            // Bind events IMMEDIATELY\n            pc.onicecandidate = async (event) => {\n                if (event.candidate) {\n                    setIceCandidateCount(prev => prev + 1);\n                    const { error } = await supabase.from('ice_candidates').insert({\n                        call_id: incomingCall.id,\n                        candidate: event.candidate,\n                        sender_id: user?.id\n                    });\n                    if (error) console.error(\"ICE Insert Error:\", error);\n                }\n            };\n\n            pc.ontrack = (event) => {\n                console.log(\"Track received:\", event.track.kind, event.streams[0]);\n                setRemoteStream(new MediaStream(event.streams[0].getTracks()));\n            };\n\n            pc.onconnectionstatechange = () => {\n                console.log(\"Connection state changes:\", pc.connectionState);\n                setConnectionState(pc.connectionState);\n            };\n\n            // 1. Set Offer FIRST (This creates the receivers/transceivers from the caller)\n            await pc.setRemoteDescription(new RTCSessionDescription(incomingCall.offer));\n\n            // 2. Add our tracks to the existing transceivers\n            stream.getTracks().forEach(track => {\n                try {\n                    pc.addTrack(track, stream);\n                } catch (e) {\n                    console.error(\"Error adding track:\", e);\n                }\n            });\n\n            // Force ALL transceivers to sendrecv (crucial for Receiver to send back)\n            pc.getTransceivers().forEach(t => {\n                if (t.direction !== 'stopped') {\n                    t.direction = 'sendrecv';\n                }\n            });\n\n\n\n\n\n            // Create Answer\n            const answer = await pc.createAnswer();\n            await pc.setLocalDescription(answer);\n\n            // Update DB - Answer\n            const { error: updateError } = await supabase.from('calls').update({\n                answer: answer,\n                status: 'active'\n            }).eq('id', incomingCall.id);\n\n            if (updateError) throw updateError;\n\n            setCallDetails(incomingCall);\n            setIncomingCall(null);\n\n            setupSignaling(incomingCall.id);\n\n            // Fetch existing candidates!\n            const { data: existingCandidates, error: fetchError } = await supabase\n                .from('ice_candidates')\n                .select('*')\n                .eq('call_id', incomingCall.id)\n                .neq('sender_id', user?.id || '');\n\n            if (fetchError) console.error(\"Error fetching candidates:\", fetchError);\n\n            if (existingCandidates) {\n                console.log(`Found ${existingCandidates.length} existing candidates`);\n                // If we are accepting, we have already set RemoteDescription (Offer) above.\n                // So we can add them safely.\n                existingCandidates.forEach(async (c) => {\n                    await pc.addIceCandidate(new RTCIceCandidate(c.candidate));\n                });\n            }\n\n        } catch (err: any) {\n            console.error(\"Error accepting call:\", err);\n            alert(`Accept call failed: ${err.message}`);\n        }\n    };\n\n    const endCall = async () => {\n        // Close connections\n        localStream?.getTracks().forEach(track => track.stop());\n        peerConnection.current?.close();\n\n        // Update DB\n        if (callDetails) {\n            await supabase.from('calls').update({ status: 'ended' }).eq('id', callDetails.id);\n        }\n\n        // Reset state\n        setLocalStream(null);\n        setRemoteStream(null);\n        setCallDetails(null);\n        setIncomingCall(null);\n        setConnectionState(\"new\"); // Reset connection state\n        if (signalingChannel.current) {\n            await supabase.removeChannel(signalingChannel.current);\n            signalingChannel.current = null;\n        }\n        currentCallIdRef.current = null;\n    };\n\n    const processCandidateQueue = async () => {\n        if (!peerConnection.current || !remoteCandidateQueue.current.length) return;\n\n        console.log(`Processing ${remoteCandidateQueue.current.length} queued remote candidates.`);\n        for (const candidate of remoteCandidateQueue.current) {\n            try {\n                await peerConnection.current.addIceCandidate(new RTCIceCandidate(candidate));\n            } catch (e) {\n                console.error(\"Error flushing candidate from queue:\", e);\n            }\n        }\n        remoteCandidateQueue.current = [];\n    };\n\n    const setupSignaling = (callId: string) => {\n        // Cleanup existing channel if any\n        if (signalingChannel.current) {\n            supabase.removeChannel(signalingChannel.current);\n            signalingChannel.current = null;\n        }\n\n        // Subscribe to Call Updates (Answer/Status) AND ICE Candidates\n        const channel = supabase.channel(`call_signaling:${callId}`);\n        setSignalingStatus(\"initializing\");\n\n        channel\n            // Listen for ICE Candidates inserted into DB\n            .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'ice_candidates', filter: `call_id=eq.${callId}` }, async (payload) => {\n                // Ignore my own candidates\n                if (payload.new.sender_id === user?.id) return;\n\n                if (peerConnection.current && peerConnection.current.signalingState !== 'closed') {\n                    console.log(\"Received new ICE candidate from DB via Realtime\");\n\n                    // Attempt to add, with fallback to queue\n                    const pc = peerConnection.current;\n                    const candidate = new RTCIceCandidate(payload.new.candidate);\n\n                    if (pc.remoteDescription && pc.signalingState !== 'have-local-offer') { // Extra check for stability\n                        try {\n                            await pc.addIceCandidate(candidate);\n                            console.log(\"Successfully added ICE candidate\");\n                        } catch (e: any) {\n                            console.error(\"Error adding live candidate:\", e);\n                            // Self-healing: If it failed due to remote description or state, QUEUE IT\n                            if (e.message?.includes(\"remote description\") || e.name === 'InvalidStateError') {\n                                console.log(\"Add failed (remote desc missing/invalid state). Re-queueing candidate.\");\n                                remoteCandidateQueue.current.push(payload.new.candidate);\n                            }\n                        }\n                    } else {\n                        console.log(\"Remote description not set (or unstable). Queueing candidate.\");\n                        remoteCandidateQueue.current.push(payload.new.candidate);\n                    }\n                }\n            })\n            // Listen for Call Updates (Answer, End)\n            .on('postgres_changes', { event: 'UPDATE', schema: 'public', table: 'calls', filter: `id=eq.${callId}` }, async (payload) => {\n                if (payload.new.answer && !peerConnection.current?.currentRemoteDescription) {\n                    console.log(\"Received Answer via Realtime\");\n                    const answer = payload.new.answer;\n                    await peerConnection.current?.setRemoteDescription(new RTCSessionDescription(answer));\n\n                    // Now that remote description is set, process any queued candidates\n                    await processCandidateQueue();\n                }\n\n                if (payload.new.status === 'ended') {\n                    endCall();\n                }\n            })\n            .subscribe((status) => {\n                console.log(\"Signaling Channel Status:\", status);\n                setSignalingStatus(status);\n            });\n\n        signalingChannel.current = channel;\n    };\n\n    const initiateCall = async (receiverId: string, type: 'audio' | 'video') => {\n        if (!user) return;\n\n        // Find existing DM room or create one\n        const { data: rooms } = await supabase\n            .from('room_participants')\n            .select('room_id')\n            .eq('user_id', user.id);\n\n        let roomId: string | null = null;\n\n        if (rooms && rooms.length > 0) {\n            const myRoomIds = rooms.map(r => r.room_id);\n            const { data: sharedRooms } = await supabase\n                .from('room_participants')\n                .select('room_id')\n                .eq('user_id', receiverId)\n                .in('room_id', myRoomIds);\n\n            if (sharedRooms && sharedRooms.length > 0) {\n                // Check if any of these is a DM\n                const { data: dmRoom } = await supabase\n                    .from('rooms')\n                    .select('id')\n                    .eq('is_group', false)\n                    .in('id', sharedRooms.map(r => r.room_id))\n                    .maybeSingle();\n\n                if (dmRoom) roomId = dmRoom.id;\n            }\n        }\n\n        if (!roomId) {\n            const { data: newRoom } = await supabase\n                .from('rooms')\n                .insert({ is_group: false, updated_at: new Date().toISOString() })\n                .select()\n                .single();\n\n            if (newRoom) {\n                roomId = newRoom.id;\n                await supabase.from('room_participants').insert([\n                    { room_id: roomId, user_id: user.id },\n                    { room_id: roomId, user_id: receiverId }\n                ]);\n            }\n        }\n\n        if (roomId) {\n            await startCall(roomId, type === 'video');\n        }\n    };\n\n    return (\n        <CallContext.Provider value={{\n            isInCall: !!callDetails,\n            isIncomingCall: !!incomingCall,\n            callDetails: callDetails || incomingCall,\n            startCall,\n            acceptCall,\n            endCall,\n            localStream,\n            remoteStream,\n            callType,\n            connectionState,\n            signalingStatus,\n            iceCandidateCount,\n            callHistory,\n            loading,\n            initiateCall\n        }}>\n            {children}\n            {/* Global Call Overlay */}\n            {incomingCall && !callDetails && (\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n                    <div className=\"glass-card p-8 rounded-2xl flex flex-col items-center gap-4 animate-float\">\n                        <div className=\"w-20 h-20 rounded-full bg-primary/20 flex items-center justify-center animate-pulse\">\n                            <div className=\"w-16 h-16 rounded-full bg-primary flex items-center justify-center text-white\">\n                                {incomingCall.type === 'audio' ? 'ðŸŽ¤' : 'ðŸ“¹'}\n                            </div>\n                        </div>\n                        <h3 className=\"text-xl font-bold\">Incoming {incomingCall.type === 'audio' ? 'Voice' : 'Video'} Call...</h3>\n                        <div className=\"flex gap-4\">\n                            <button onClick={acceptCall} className=\"px-6 py-2 bg-green-500 rounded-full text-white font-medium hover:bg-green-600 transition-colors\">Accept</button>\n                            <button onClick={() => setIncomingCall(null)} className=\"px-6 py-2 bg-red-500 rounded-full text-white font-medium hover:bg-red-600 transition-colors\">Decline</button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {callDetails && (\n                <CallOverlay roomId={callDetails.room_id} currentUser={user} onClose={endCall} />\n            )}\n        </CallContext.Provider>\n    );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    { d: 'M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196', key: 'w8jjjt' },\n  ],\n  ['path', { d: 'M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2', key: '1xawa7' }],\n  ['path', { d: 'm2 2 20 20', key: '1ooewy' }],\n];\n\n/**\n * @component @name VideoOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAuNjYgNkgxNGEyIDIgMCAwIDEgMiAydjIuNWw1LjI0OC0zLjA2MkEuNS41IDAgMCAxIDIyIDcuODd2OC4xOTYiIC8+CiAgPHBhdGggZD0iTTE2IDE2YTIgMiAwIDAgMS0yIDJINGEyIDIgMCAwIDEtMi0yVjhhMiAyIDAgMCAxIDItMmgyIiAvPgogIDxwYXRoIGQ9Im0yIDIgMjAgMjAiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/video-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst VideoOff = createLucideIcon('video-off', __iconNode);\n\nexport default VideoOff;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'm21 3-7 7', key: '1l2asr' }],\n  ['path', { d: 'm3 21 7-7', key: 'tjx5ai' }],\n  ['path', { d: 'M9 21H3v-6', key: 'wtvkvv' }],\n];\n\n/**\n * @component @name Maximize2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0ibTIxIDMtNyA3IiAvPgogIDxwYXRoIGQ9Im0zIDIxIDctNyIgLz4KICA8cGF0aCBkPSJNOSAyMUgzdi02IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/maximize-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Maximize2 = createLucideIcon('maximize-2', __iconNode);\n\nexport default Maximize2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm14 10 7-7', key: 'oa77jy' }],\n  ['path', { d: 'M20 10h-6V4', key: 'mjg0md' }],\n  ['path', { d: 'm3 21 7-7', key: 'tjx5ai' }],\n  ['path', { d: 'M4 14h6v6', key: 'rmj7iw' }],\n];\n\n/**\n * @component @name Minimize2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTQgMTAgNy03IiAvPgogIDxwYXRoIGQ9Ik0yMCAxMGgtNlY0IiAvPgogIDxwYXRoIGQ9Im0zIDIxIDctNyIgLz4KICA8cGF0aCBkPSJNNCAxNGg2djYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/minimize-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Minimize2 = createLucideIcon('minimize-2', __iconNode);\n\nexport default Minimize2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272',\n      key: '1wngk7',\n    },\n  ],\n  ['path', { d: 'M22 2 2 22', key: 'y4kqgn' }],\n  [\n    'path',\n    {\n      d: 'M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473',\n      key: '10hv5p',\n    },\n  ],\n];\n\n/**\n * @component @name PhoneOff\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTAuMSAxMy45YTE0IDE0IDAgMCAwIDMuNzMyIDIuNjY4IDEgMSAwIDAgMCAxLjIxMy0uMzAzbC4zNTUtLjQ2NUEyIDIgMCAwIDEgMTcgMTVoM2EyIDIgMCAwIDEgMiAydjNhMiAyIDAgMCAxLTIgMiAxOCAxOCAwIDAgMS0xMi43MjgtNS4yNzIiIC8+CiAgPHBhdGggZD0iTTIyIDIgMiAyMiIgLz4KICA8cGF0aCBkPSJNNC43NiAxMy41ODJBMTggMTggMCAwIDEgMiA0YTIgMiAwIDAgMSAyLTJoM2EyIDIgMCAwIDEgMiAydjNhMiAyIDAgMCAxLS44IDEuNmwtLjQ2OC4zNTFhMSAxIDAgMCAwLS4yOTIgMS4yMzMgMTQgMTQgMCAwIDAgLjI0NC40NzMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/phone-off\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PhoneOff = createLucideIcon('phone-off', __iconNode);\n\nexport default PhoneOff;\n","import { safeSupabaseOperation } from '@/lib/supabase/client';\n\nexport interface Call {\n    id: string;\n    room_id: string | null;\n    caller_id: string;\n    type: 'audio' | 'video';\n    status: 'ringing' | 'accepted' | 'rejected' | 'missed' | 'ended';\n    duration: number;\n    created_at: string;\n    ended_at: string | null;\n    profiles?: {\n        id: string;\n        username: string;\n        full_name: string;\n        avatar_url: string;\n    };\n    offer_sdp?: any;\n    answer_sdp?: any;\n    receiver_id?: string;\n}\n\nexport const CallService = {\n    async initiateCall(receiverId: string, type: 'audio' | 'video', offerSdp: any, roomId?: string): Promise<{ data: Call | null; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) throw new Error('Not authenticated');\n\n                // Check if blocked\n                const { data: blocked } = await client\n                    .from('blocked_users')\n                    .select('id')\n                    .or(`and(blocker_id.eq.${user.id},blocked_id.eq.${receiverId}),and(blocker_id.eq.${receiverId},blocked_id.eq.${user.id})`)\n                    .maybeSingle();\n\n                if (blocked) {\n                    throw new Error('User is blocked');\n                }\n\n                const { data, error } = await client\n                    .from('calls')\n                    .insert({\n                        caller_id: user.id,\n                        receiver_id: receiverId || null,\n                        room_id: roomId || null,\n                        type,\n                        status: 'ringing',\n                        offer_sdp: offerSdp\n                    })\n                    .select()\n                    .single();\n\n                if (error) return { data: null, error: error.message };\n                return { data: data as Call, error: null };\n            });\n        } catch (err: any) {\n            return { data: null, error: err.message };\n        }\n    },\n\n    async updateCallStatus(callId: string, status: Call['status'], answerSdp?: any): Promise<{ error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const updateData: any = { status };\n                if (answerSdp) updateData.answer_sdp = answerSdp;\n\n                if (status === 'ended' || status === 'rejected' || status === 'missed') {\n                    updateData.ended_at = new Date().toISOString();\n\n                    // Calculate duration if it's ending\n                    if (status === 'ended') {\n                        const { data: call } = await client.from('calls').select('created_at').eq('id', callId).single();\n                        if (call) {\n                            const start = new Date(call.created_at).getTime();\n                            const end = new Date().getTime();\n                            updateData.duration = Math.floor((end - start) / 1000);\n                        }\n                    }\n                }\n\n                const { error } = await client\n                    .from('calls')\n                    .update(updateData)\n                    .eq('id', callId);\n\n                return { error: error?.message || null };\n            });\n        } catch (err: any) {\n            return { error: err.message };\n        }\n    },\n\n    async sendIceCandidate(callId: string, candidate: any): Promise<{ error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) return { error: 'Not authenticated' };\n\n                const { error } = await client\n                    .from('ice_candidates')\n                    .insert({\n                        call_id: callId,\n                        sender_id: user.id,\n                        candidate: candidate // Should be object\n                    });\n                return { error: error?.message || null };\n            });\n        } catch (err: any) {\n            return { error: err.message };\n        }\n    },\n\n    async getIceCandidates(callId: string): Promise<{ data: any[]; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data, error } = await client\n                    .from('ice_candidates')\n                    .select('*')\n                    .eq('call_id', callId)\n                    .order('created_at', { ascending: true });\n\n                return { data: data || [], error: error?.message || null };\n            });\n        } catch (err: any) {\n            return { data: [], error: err.message };\n        }\n    },\n\n    async getMessages(roomId: string, limit: number = 50, ascending: boolean = false): Promise<{ data: any[]; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data, error } = await client\n                    .from('messages')\n                    .select(`\n                        *,\n                        profiles:user_id (\n                            id, username, full_name, avatar_url, gender\n                        )\n                    `)\n                    .eq('room_id', roomId)\n                    .order('created_at', { ascending })\n                    .limit(limit);\n                return { data: data || [], error: error?.message || null };\n            });\n        } catch (err: any) {\n            return { data: [], error: err.message };\n        }\n    },\n\n    async getCallHistory(): Promise<{ data: Call[]; error: string | null }> {\n        try {\n            return await safeSupabaseOperation(async (client) => {\n                const { data: { user } } = await client.auth.getUser();\n                if (!user) throw new Error('Not authenticated');\n\n                const { data, error } = await client\n                    .from('calls')\n                    .select(`\n                        *,\n                        caller:caller_id (id, username, full_name, avatar_url, gender),\n                        receiver:receiver_id (id, username, full_name, avatar_url, gender)\n                    `)\n                    .or(`caller_id.eq.${user.id},receiver_id.eq.${user.id}`)\n                    .neq('status', 'ringing')\n                    .order('created_at', { ascending: false });\n\n                if (error) return { data: [], error: error.message };\n                return { data: data as Call[] || [], error: null };\n            });\n        } catch (err: any) {\n            return { data: [], error: err.message };\n        }\n    }\n};\n"],"names":[],"mappings":"8DCoBA,CAAA,ADbkE,GAAA,EAAA,CAAA,EAAA,EAAA,OAAA,EAAA,yJCDG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,4BDiB/E,CAAA,CAAA,CAAA,CAAA,AAAM,CAAN,CAAM,CAAA,EAAS,CAAT,AAAS,CAAA,AAAT,AAAS,CAAT,AAAS,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAjB,AAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CApBI,CAoBO,AAnBzC,CAAC,AAmBwC,CCnBxC,ADmBwC,AAnBxC,CCAA,ADAA,AAmBwC,CCnBxC,ADAA,AAmBwC,CCnBxC,ADAA,AAmBwC,CCnBxC,ADAA,AAmBwC,CCnBxC,ADAA,AAmBwC,CCnBxC,ADAA,AAAQ,AAmBgC,CCnBhC,ADAA,AAAE,AAmB8B,CAAU,CAAA,AAnBrC,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,AAAY,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,AAAK,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,CCAU,ADAA,EACzC,CAAC,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,AAAQ,CCAA,ADAA,AAAE,EAAG,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CDAA,ACAA,CAAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CDAA,ACAA,CAAA,ADAA,IAAkC,IAAK,CCAJ,ADAI,CCAJ,ADAI,CCAJ,ADAI,CAAA,IAAA,CAAU,CAAA,EAC9D,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAU,CCAA,CAAA,ADAG,CCAA,ADAA,CCAA,ADAA,CAAA,CAAA,6BAAkC,CAAA,ACAD,CAAA,ADAC,CCAD,ADAC,CCAD,ADAC,AAAK,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,OAAU,CCAD,ADC9D,CCD8D,ADC7D,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAmC,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAChE,CAAC,CAAA,ACYH,CDZG,ACYH,KDZW,CAAE,CCYD,CAAA,ADZI,CCYJ,ADZI,CAAA,ACYJ,CAAA,ADZI,CAAA,ACYJ,CAAA,ADZI,CCYJ,ADZI,CCYJ,ADZI,CCYJ,ADZI,CCYJ,ADZI,CCYJ,ADZI,CCYJ,ADZI,EAAc,CCYD,ADZC,CCYD,ADZC,CCYD,ADZC,CAAA,ACYD,ADZM,WACjC,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAA8B,AAA9B,CAA8B,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAC7D,sDEeA,CAAA,CAAA,CAAA,CAAA,AAAM,CAAN,CAAM,CAAA,EAAA,AAAQ,CAAR,AAAQ,CAAR,AAAQ,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAAA,EAAiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAtBK,CAClC,AAqBsC,CAAA,AApBpC,CAAA,AAoBoC,CApBpC,AAoBoC,CApBpC,AAoBoC,CAAA,AApBpC,CAoBoC,AApBpC,CAoBoC,AApBpC,CACA,AAmBoC,CAlBlC,AAkBkC,CAlBlC,AAkB4C,CAlBzC,AAkByC,CAlBzC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACH,GAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAET,CACA,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,CAAA,CAAA,AAAG,CAAA,CAAA,EAAK,CAAA,CAAA,AAAG,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAO,CAAA,CAAA,CAAA,CAAA,CAAA,AAAM,CAAA,CAAA,CAAA,CAAA,CAAA,EAAQ,CAAA,CAAA,CAAA,CAAA,CAAA,AAAM,CAAA,CAAA,CAAA,AAAI,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAK,AAAL,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,CAChF,wHEVA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,ODDA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,oBEoBA,CAAA,AGbE,GAAA,EAAA,CAAA,EAAA,EAAA,OAAA,EAAA,YHPkC,CAoBW,CAAA,CAAA,OAjBzC,CAAA,ACAH,ACAA,CAAA,AFAG,ACAH,qEDA4E,CAAA,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,GAElF,CAAC,CGDM,AHCN,CGDM,AHCN,MAAU,CGAF,CAAA,yDHA+D,CAAA,CAAA,CAAA,CAAA,AAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAAA,SAC9E,CAAA,AAAE,EEYP,ADAA,8BEWA,EAAA,CAAA,EAAW,CAAA,CAAA,CAAA,CAAA,KAAA,EAAiB,CAAA,YAAa,CA3B3C,AA2B2C,CD3B5C,ADAA,AEAC,AHAA,CGAA,AHAA,ACAD,ACAA,CFAC,ACAD,ACAA,ACAC,CAAA,AHAA,AEAD,ADAA,CAAA,AEAC,AHAA,AEAD,CDAA,AEAC,AHAA,AEAD,+JCKD,CACA,CAAC,OAAQ,CAAA,AAAE,CHYP,CAAA,2BGZuC,CAC3C,CACE,CAAA,CAAA,CAAA,CAAA,CAAA,EACA,CACE,CAAA,CAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,gHACH,IAAK,CAAA,SACP,CAEJ,kBFEmC,eAjBhC,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,AAAQ,CCAA,ADAA,EAAK,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,AAAa,IAAK,UAAU,SACjC,CCAA,ADAA,AAAE,EAAA,0GEGF,EDaO,CAAA,CFZF,AEYE,ADAA,CAAA,ACAA,AFZF,CAAA,ACYE,ACAA,CAAA,AFZF,ACYE,CAAA,ADZF,AEYE,CDAA,ADZF,AEYE,CFZF,AEYE,ADAA,IAAA,EAAA,sCCjBY,CDAD,ACAC,CDAD,ACAC,CDAD,ACAC,CAAA,UAAe,0BACd,CDAF,ACAE,CDAF,ACAE,EAAK,CAAA,ADAF,CCAE,ADAF,CAAA,ACAE,CDAF,ACAE,CDAF,ACAE,CAAA,IAAU,CAC5C,CAAC,OAAQ,CAAA,AAAE,ADAF,ECAE,gBAAqB,CAAA,ADAA,CAAA,ACAA,CDAA,ACAA,CDAA,ACAA,CAAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,IAC/B,CAAA,ADAA,AEDC,CFCD,AEDC,ADCD,oBAA0B,IAAK,WAClC,EJJA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAUO,SAAS,EAAY,CAAE,QAAM,aAAE,CAAW,UAAE,GAAW,CAAK,SAAE,CAAO,CAAoB,EAC5F,GAAM,aAAE,CAAW,CAAE,cAAY,UAAE,CAAQ,CAAE,iBAAe,iBAAE,CAAe,mBAAE,CAAiB,CAAE,CAAG,IAC/F,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GACzC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GACjC,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGvC,EAAgB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAmB,MACzC,EAAiB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAmB,MAEhD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACF,EAAc,OAAO,EAAI,GACzB,GAAc,OADwB,AACjB,CAAC,SAAS,CAAG,CAAA,CAE1C,EAAG,CAAC,EAAY,EAEhB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACF,EAAe,OAAO,EAAI,IAC1B,EAAe,OAAO,CAAC,AADiB,SACR,CAAG,EACnC,EAAe,OAAO,CAAC,IAAI,GAAG,KAAK,CAAC,GAAK,QAAQ,KAAK,CAAC,4BAA6B,IAE5F,EAAG,CAAC,EAAa,EAmBjB,IAAM,EAAc,AAAa,YAEjC,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,oIACA,EACM,yCACA,iCAGN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mHACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,WAAS,KACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,WAAS,KACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,eAAa,KAClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,SAAO,KACZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,aAAW,GAAa,YAAY,QAAU,KACnD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,aAAW,GAAc,YAAY,QAAU,QAIxD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oEAEX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gFAEV,CAAC,GAAe,CAAC,CAAA,CAAY,EAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,SAAS,SAAS,UAAU,sDACpC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6CACY,cAApB,EAAkC,YAAc,qBAM7D,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,IAAK,EACL,QAAQ,CAAA,CAAA,EACR,WAAW,CAAA,CAAA,EACX,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,8CAA+C,CAAC,GAAe,CAAC,CAAA,CAAY,EAAK,sCAKtG,CAAC,GACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,oHACA,EAAc,SAAW,oCAEzB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6EACV,CAAC,GAAe,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yCAAgC,QACjE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,IAAK,EAAe,QAAQ,CAAA,CAAA,EAAC,KAAK,CAAA,CAAA,EAAC,WAAW,CAAA,CAAA,EAAC,UAAU,2DAM5E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACd,oJACA,EAAc,8BAAgC,yBAE7C,CAAC,GACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,yCACT,EAAc,aAAe,eAElC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,uBAA4C,cAApB,EAAkC,eAAiB,mBAC/F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA4B,UAKrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAvFT,CAuFkB,IAtF7B,IACA,EAAY,OADC,OACa,GAAG,OAAO,CAAC,GAAS,EAAM,OAAO,CAAG,CAAC,EAAM,OAAO,EAC5E,EAAW,CAAC,GAEpB,EAkFiD,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,kCAAmC,EAAU,sBAAwB,qDAC3G,EAAU,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAe,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,UAAU,cAG/D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QApFR,CAoFiB,IAnF7B,IACA,EAAY,OADC,OACa,GAAG,OAAO,CAAC,GAAS,EAAM,OAAO,CAAG,CAAC,EAAM,OAAO,EAC5E,EAAc,CAAC,GAEvB,EA+EkD,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,kCAAmC,EAAa,sBAAwB,qDAC/G,EAAa,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,UAAU,YAAe,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,cAGtE,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,8IAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,UAAU,cAGxB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAxGL,CAwGc,GAxGR,EAAe,CAAC,GAwGQ,UAAU,oFACtC,EAAc,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAU,UAAU,YAAe,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAU,UAAU,yBAOpG,CMjIO,IAAM,EAAc,CACvB,MAAM,aAAa,CAAkB,CAAE,CAAuB,CAAE,CAAa,CAAE,CAAe,EAC1F,GAAI,CACA,OAAO,MAAM,CAAA,EAAA,EAAA,qBAAqB,AAArB,EAAsB,MAAO,IACtC,GAAM,CAAE,KAAM,MAAE,CAAI,CAAE,CAAE,CAAG,MAAM,EAAO,IAAI,CAAC,OAAO,GACpD,GAAI,CAAC,EAAM,MAAM,AAAI,MAAM,qBAG3B,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC3B,IAAI,CAAC,iBACL,MAAM,CAAC,MACP,EAAE,CAAC,CAAC,kBAAkB,EAAE,EAAK,EAAE,CAAC,eAAe,EAAE,EAAW,oBAAoB,EAAE,EAAW,eAAe,EAAE,EAAK,EAAE,CAAC,CAAC,CAAC,EACxH,WAAW,GAEhB,GAAI,EACA,MAAU,AAAJ,CADG,KACO,mBAGpB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EACzB,IAAI,CAAC,SACL,MAAM,CAAC,CACJ,UAAW,EAAK,EAAE,CAClB,YAAa,GAAc,KAC3B,QAAS,GAAU,UACnB,EACA,OAAQ,UACR,UAAW,CACf,GACC,MAAM,GACN,MAAM,UAEX,AAAI,EAAc,CAAE,IAAT,CAAe,KAAM,MAAO,EAAM,OAAO,AAAC,EAC9C,CAAE,KAAM,EAAc,MAAO,IAAK,CAC7C,EACJ,CAAE,MAAO,EAAU,CACf,MAAO,CAAE,KAAM,KAAM,MAAO,EAAI,OAAO,AAAC,CAC5C,CACJ,EAEA,MAAM,iBAAiB,CAAc,CAAE,CAAsB,CAAE,CAAe,EAC1E,GAAI,CACA,OAAO,MAAM,CAAA,EAAA,EAAA,qBAAA,AAAqB,EAAC,MAAO,IACtC,IAAM,EAAkB,QAAE,CAAO,EAGjC,GAFI,IAAW,EAAW,UAAU,CAAG,CAAA,GAExB,UAAX,GAAiC,aAAX,GAAyB,AAAW,YAAA,GAAU,CACpE,EAAW,QAAQ,CAAG,IAAI,OAAO,WAAW,GAG7B,UAAX,GAAoB,CACpB,GAAM,CAAE,KAAM,CAAI,CAAE,CAAG,MAAM,EAAO,IAAI,CAAC,SAAS,MAAM,CAAC,cAAc,EAAE,CAAC,KAAM,GAAQ,MAAM,GAC9F,GAAI,EAAM,CACN,IAAM,EAAQ,IAAI,KAAK,EAAK,UAAU,EAAE,OAAO,GACzC,EAAM,IAAI,OAAO,OAAO,EAC9B,GAAW,QAAQ,CAAG,KAAK,KAAK,CAAC,CAAC,EAAM,CAAA,CAAK,CAAI,IACrD,CACJ,CAGJ,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EACnB,IAAI,CAAC,SACL,MAAM,CAAC,GACP,EAAE,CAAC,KAAM,GAEd,MAAO,CAAE,MAAO,GAAO,SAAW,IAAK,CAC3C,EACJ,CAAE,MAAO,EAAU,CACf,MAAO,CAAE,MAAO,EAAI,OAAO,AAAC,CAChC,CACJ,EAEA,MAAM,iBAAiB,CAAc,CAAE,CAAc,EACjD,GAAI,CACA,OAAO,MAAM,CAAA,EAAA,EAAA,qBAAA,AAAqB,EAAC,MAAO,IACtC,GAAM,CAAE,KAAM,CAAE,MAAI,CAAE,CAAE,CAAG,MAAM,EAAO,IAAI,CAAC,OAAO,GACpD,GAAI,CAAC,EAAM,MAAO,CAAE,MAAO,mBAAoB,EAE/C,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EACnB,IAAI,CAAC,kBACL,MAAM,CAAC,CACJ,QAAS,EACT,UAAW,EAAK,EAAE,CAClB,UAAW,CACf,GACJ,MAF6B,AAEtB,CAAE,MAAO,GAAO,SAFyB,AAEd,IAAK,CAC3C,EACJ,CAAE,MAAO,EAAU,CACf,MAAO,CAAE,MAAO,EAAI,OAAO,AAAC,CAChC,CACJ,EAEA,MAAM,iBAAiB,CAAc,EACjC,GAAI,CACA,OAAO,MAAM,CAAA,EAAA,EAAA,qBAAA,AAAqB,EAAC,MAAO,IACtC,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EACzB,IAAI,CAAC,kBACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAW,GACd,KAAK,CAAC,aAAc,CAAE,UAAW,EAAK,GAE3C,MAAO,CAAE,KAAM,GAAQ,EAAE,CAAE,MAAO,GAAO,SAAW,IAAK,CAC7D,EACJ,CAAE,MAAO,EAAU,CACf,MAAO,CAAE,KAAM,EAAE,CAAE,MAAO,EAAI,OAAO,AAAC,CAC1C,CACJ,EAEA,MAAM,YAAY,CAAc,CAAE,EAAgB,EAAE,CAAE,GAAqB,CAAK,EAC5E,GAAI,CACA,OAAO,MAAM,CAAA,EAAA,EAAA,qBAAA,AAAqB,EAAC,MAAO,IACtC,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EACzB,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;;;oBAKT,CAAC,EACA,EAAE,CAAC,UAAW,GACd,KAAK,CAAC,aAAc,WAAE,CAAU,GAChC,KAAK,CAAC,GACX,MAAO,CAAE,KAAM,GAAQ,EAAE,CAAE,MAAO,GAAO,SAAW,IAAK,CAC7D,EACJ,CAAE,MAAO,EAAU,CACf,MAAO,CAAE,KAAM,EAAE,CAAE,MAAO,EAAI,OAAO,AAAC,CAC1C,CACJ,EAEA,MAAM,iBACF,GAAI,CACA,OAAO,MAAM,CAAA,EAAA,EAAA,qBAAA,AAAqB,EAAC,MAAO,IACtC,GAAM,CAAE,KAAM,MAAE,CAAI,CAAE,CAAE,CAAG,MAAM,EAAO,IAAI,CAAC,OAAO,GACpD,GAAI,CAAC,EAAM,MAAM,AAAI,MAAM,qBAE3B,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EACzB,IAAI,CAAC,SACL,MAAM,CAAC,CAAC;;;;oBAIT,CAAC,EACA,EAAE,CAAC,CAAC,aAAa,EAAE,EAAK,EAAE,CAAC,gBAAgB,EAAE,EAAK,EAAE,CAAA,CAAE,EACtD,GAAG,CAAC,SAAU,WACd,KAAK,CAAC,aAAc,CAAE,WAAW,CAAM,UAE5C,AAAI,EAAc,CAAE,IAAT,CAAe,EAAE,CAAE,MAAO,EAAM,OAAO,AAAC,EAC5C,CAAE,KAAM,GAAkB,EAAE,CAAE,MAAO,IAAK,CACrD,EACJ,CAAE,MAAO,EAAU,CACf,MAAO,CAAE,KAAM,EAAE,CAAE,MAAO,EAAI,OAAO,AAAC,CAC1C,CACJ,CACJ,ELrIA,IAAA,EAAA,EAAA,CAAA,CAAA,OARA,IAAM,EAAc,CAAA,EAAA,EAAA,aAAA,AAAa,EAAyB,MAEnD,SAAS,IACZ,IAAM,EAAU,CAAA,EAAA,EAAA,UAAU,AAAV,EAAW,GAC3B,GAAI,CAAC,EAAS,MAAM,AAAI,MAAM,8CAC9B,OAAO,CACX,CAIO,SAAS,EAAa,UAAE,CAAQ,CAAiC,EACpE,GAAM,MAAE,CAAI,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAClB,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,MAC9C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,MAC7D,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,MAC/D,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,MAChD,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAoB,SACtD,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,OACzD,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,gBACzD,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,GAC7D,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAQ,EAAE,EAClD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAGjC,EAAiB,CAAA,EAAA,EAAA,MAAA,AAAM,EAA2B,MAClD,EAAW,CAAA,EAAA,EAAA,YAAA,AAAY,IACvB,EAAmB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAyB,MAIjC,CAAA,EAAA,EAAA,MAAA,AAAM,EAAQ,EAAE,EAGvC,CAH0C,GAGpC,EAAW,CACb,WAAY,CACR,CAAE,KAAM,KALuD,yBAKxB,EACvC,CAAE,KAAM,+BAAgC,EACxC,CAAE,KAAM,+BAAgC,EACxC,CAAE,KAAM,kCAAmC,EAC9C,AACL,EAGA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACN,GAAI,CAAC,EAAM,OAEX,QAAQ,GAAG,CAAC,uCAAwC,EAAK,EAAE,EAC3D,IAAM,EAAU,EACX,OAAO,CAAC,CAAC,MAAM,EAAE,EAAK,EAAE,CAAA,CAAE,EAC1B,EAAE,CACC,mBACA,CAAE,MAAO,SAAU,OAAQ,SAAU,MAAO,QAAS,OAAQ,CAAC,cAAc,EAAE,EAAK,EAAE,CAAA,CAAE,AAAC,EAOxF,CANA,KAMO,IACH,QAAQ,GAAG,CAAC,qBAAsB,GAG9B,EAAQ,GAAG,CAAC,SAAS,GAAK,EAAK,EAAE,EAAI,AAAuB,UAAU,GAAzB,GAAG,CAAC,MAAM,AAV6B,EAYpF,EAAgB,EAAQ,GAAG,CAEnC,GAEH,SAAS,GAEd,MAAO,KACH,EAAS,aAAa,CAAC,EAC3B,CACJ,EAAG,CAAC,EAAM,EAAS,EAGnB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACN,IAAM,EAAe,UACjB,GAAW,GACX,GAAM,MAAE,CAAI,CAAE,CAAG,MAAM,EAAY,cAAc,GAC7C,GAAM,EAAe,GACzB,GAAW,EACf,EAEA,GAAI,EAAM,CACN,IAGA,IAAM,EAAU,EACX,OAAO,CAAC,wBACR,EAAE,CAAC,mBAAoB,CAAE,MAAO,IAAK,OAAQ,SAAU,MAAO,OAAQ,EAAG,KACtE,GACJ,GACC,SAAS,GAEd,MAAO,KACH,EAAS,aAAa,CAAC,EAC3B,CACJ,CACJ,EAAG,CAAC,EAAM,EAAS,EAGnB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,IACC,KACH,GAAa,YAAY,QAAQ,GAAS,EAAM,IAAI,IACpD,EAAe,OAAO,EAAE,OAC5B,EACD,EAAE,EAGL,IAAM,EAAmB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAgB,MACzC,EAAuB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAwB,EAAE,EAEvD,CAF0D,CAE9C,MAAO,EAAgB,GAAU,CAAI,IACnD,GAAI,CACA,EAAqB,GACrB,IAAM,EAAO,CAL4E,CAKlE,QAAU,QAGjC,GAFA,EAAY,GAER,CAAC,UAAU,YAAY,EAAI,CAAC,UAAU,YAAY,CAAC,YAAY,CAAE,YACjE,MAAM,iDAIV,IAAM,EAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC,CAAE,MAAO,EAAS,OAAO,CAAK,GACvF,EAAe,GAGf,IAAM,EAAK,IAAI,kBAAkB,GACjC,EAAe,OAAO,CAAG,EACzB,EAAqB,OAAO,CAAG,EAAE,CAGjC,CAHmC,CAG5B,SAAS,GAAG,CAH8B,MAGvB,CAAC,IACvB,EAAG,QAAQ,CAAC,EAAO,EACvB,GAGA,EAAG,eAAe,GAAG,OAAO,CAAC,IACL,WAAW,CAA3B,EAAE,SAAS,GACX,EAAE,SAAS,CAAG,UAAA,CAEtB,GAGA,IAAM,EAA2C,EAAE,CAGnD,EAAG,cAAc,CAAG,MAAO,IACvB,GAAI,EAAM,SAAS,CAGf,CAHiB,EACjB,EAAqB,GAAQ,EAAO,GAEhC,EAAiB,OAAO,CAAE,CAE1B,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,kBAAkB,MAAM,CAAC,CAC3D,QAAS,EAAiB,OAAO,CACjC,UAAW,EAAM,SAAS,CAC1B,UAAW,GAAM,EACrB,GACI,GAAO,QAAQ,KAAK,CAAC,oBAAqB,EAClD,MAEI,CAFG,OAEK,GAAG,CAAC,gDACZ,EAAsB,IAAI,CAAC,EAAM,SAAS,CAGtD,EAGA,EAAG,OAAO,CAAG,AAAC,IACV,QAAQ,GAAG,CAAC,kBAAmB,EAAM,KAAK,CAAC,IAAI,CAAE,EAAM,OAAO,CAAC,EAAE,EACjE,EAAgB,IAAI,YAAY,EAAM,OAAO,CAAC,EAAE,CAAC,SAAS,IAC9D,EACA,EAAG,uBAAuB,CAAG,KACzB,QAAQ,GAAG,CAAC,4BAA6B,EAAG,eAAe,EAC3D,EAAmB,EAAG,eAAe,CACzC,EAKA,IAAM,EAAQ,MAAM,EAAG,WAAW,EAClC,OAAM,EAAG,mBAAmB,CAAC,GAG7B,GAAM,CAAE,KAAM,CAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,SAAS,MAAM,CAAC,CAC9D,QAAS,EACT,UAAW,GAAM,GACjB,OAAQ,SACR,MAAO,EACP,KAAM,CACV,GAAG,MAAM,GAAG,MAAM,GAElB,GAAI,EAAO,MAAM,EAMjB,GAJA,EAAe,GACf,EAAiB,OAAO,CAAG,EAAK,EAAE,CAG9B,CAHgC,CAGV,MAAM,CAAG,EAAG,CAClC,QAAQ,GAAG,CAAC,CAAC,GAJ8C,MAIrC,EAAE,EAAsB,MAAM,CAAC,wBAAwB,CAAC,EAC9E,IAAM,EAAU,EAAsB,GAAG,CAAC,IAAK,AAAC,CAC5C,QAAS,EAAK,EAAE,CAChB,UAAW,EACX,UAAW,GAAM,EACrB,CAAC,GACK,CAAE,MAAO,CAAU,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,kBAAkB,MAAM,CAAC,GACvE,GAAY,QAAQ,KAAK,CAAC,mCAAoC,EACtE,CAGA,EAAe,EAAK,EAAE,CAI1B,CAAE,MAAO,EAAU,CACf,QAAQ,KAAK,CAAC,uBAAwB,GACtC,MAAM,CAAC,aAAa,EAAE,EAAI,OAAO,CAAA,CAAE,CACvC,CACJ,EAEM,EAAa,UACf,GAAK,CAAD,CAEJ,GAAI,CACA,EAAqB,GAErB,GALe,CAKT,EAAgC,UAAtB,EAAa,IAAI,CACjC,EAAY,EAAa,IAAI,EAAI,SAEjC,IAAM,EAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC,CAAE,MAAO,EAAS,OAAO,CAAK,GACvF,EAAe,GAEf,IAAM,EAAK,IAAI,kBAAkB,GACjC,EAAe,OAAO,CAAG,EACzB,EAAiB,OAAO,CAAG,EAAa,EAAE,CAC1C,EAAqB,OAAO,CAAG,EAAE,CAGjC,CAHmC,CAGhC,aAH8C,CAGhC,CAAG,MAAO,IACvB,GAAI,EAAM,SAAS,CAAE,CACjB,EAAqB,GAAQ,EAAO,GACpC,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,kBAAkB,MAAM,CAAC,CAC3D,QAAS,EAAa,EAAE,CACxB,UAAW,EAAM,SAAS,CAC1B,UAAW,GAAM,EACrB,GACI,GAAO,QAAQ,KAAK,CAAC,oBAAqB,EAClD,CACJ,EAEA,EAAG,OAAO,CAAG,AAAC,IACV,QAAQ,GAAG,CAAC,kBAAmB,EAAM,KAAK,CAAC,IAAI,CAAE,EAAM,OAAO,CAAC,EAAE,EACjE,EAAgB,IAAI,YAAY,EAAM,OAAO,CAAC,EAAE,CAAC,SAAS,IAC9D,EAEA,EAAG,uBAAuB,CAAG,KACzB,QAAQ,GAAG,CAAC,4BAA6B,EAAG,eAAe,EAC3D,EAAmB,EAAG,eAAe,CACzC,EAGA,MAAM,EAAG,oBAAoB,CAAC,IAAI,sBAAsB,EAAa,KAAK,GAG1E,EAAO,SAAS,GAAG,OAAO,CAAC,IACvB,GAAI,CACA,EAAG,QAAQ,CAAC,EAAO,EACvB,CAAE,MAAO,EAAG,CACR,QAAQ,KAAK,CAAC,sBAAuB,EACzC,CACJ,GAGA,EAAG,eAAe,GAAG,OAAO,CAAC,IACL,WAAW,CAA3B,EAAE,SAAS,GACX,EAAE,SAAS,CAAG,UAAA,CAEtB,GAOA,IAAM,EAAS,MAAM,EAAG,YAAY,EACpC,OAAM,EAAG,mBAAmB,CAAC,GAG7B,GAAM,CAAE,MAAO,CAAW,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,SAAS,MAAM,CAAC,CAC/D,OAAQ,EACR,OAAQ,QACZ,GAAG,EAAE,CAAC,KAAM,EAAa,EAAE,EAE3B,GAAI,EAAa,MAAM,EAEvB,EAAe,GACf,EAAgB,MAEhB,EAAe,EAAa,EAAE,EAG9B,GAAM,CAAE,KAAM,CAAkB,CAAE,MAAO,CAAU,CAAE,CAAG,MAAM,EACzD,IAAI,CAAC,kBACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAW,EAAa,EAAE,EAC7B,GAAG,CAAC,YAAa,GAAM,IAAM,GAE9B,IAAY,QAAQ,KAAK,CAAC,6BAA8B,GAExD,IACA,QAAQ,GAAG,CAAC,CAAC,GADO,GACD,EAAE,EAAmB,MAAM,CAAC,oBAAoB,CAAC,EAGpE,EAAmB,OAAO,CAAC,MAAO,IAC9B,MAAM,EAAG,eAAe,CAAC,IAAI,gBAAgB,EAAE,SAAS,EAC5D,GAGR,CAAE,MAAO,EAAU,CACf,QAAQ,KAAK,CAAC,wBAAyB,GACvC,MAAM,CAAC,oBAAoB,EAAE,EAAI,OAAO,CAAA,CAAE,CAC9C,CACJ,EAEM,EAAU,UAEZ,GAAa,YAAY,QAAQ,GAAS,EAAM,IAAI,IACpD,EAAe,OAAO,EAAE,QAGpB,GACA,MAAM,EAAS,EADF,EACM,CAAC,SAAS,MAAM,CAAC,CAAE,OAAQ,OAAQ,GAAG,EAAE,CAAC,KAAM,EAAY,EAAE,EAIpF,EAAe,MACf,EAAgB,MAChB,EAAe,MACf,EAAgB,MAChB,EAAmB,OACf,CADuB,CACN,OAAO,EAAE,CAC1B,MAAM,EAAS,MAFiC,OAEpB,CAAC,EAAiB,OAAO,EACrD,EAAiB,OAAO,CAAG,MAE/B,EAAiB,OAAO,CAAG,IAC/B,EAEM,EAAwB,UAC1B,GAAI,AAAC,EAAe,OAAO,EAAK,EAAqB,AAAtB,OAA6B,CAAC,MAAM,EAAE,AAGrE,IAAK,IAAM,KADX,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,EAAqB,OAAO,CAAC,MAAM,CAAC,0BAA0B,CAAC,EACjE,EAAqB,OAAO,CAAE,CAClD,GAAI,CACA,MAAM,EAAe,OAAO,CAAC,eAAe,CAAC,IAAI,gBAAgB,GACrE,CAAE,MAAO,EAAG,CACR,QAAQ,KAAK,CAAC,uCAAwC,EAC1D,CAEJ,EAAqB,OAAO,CAAG,EAAE,CACrC,EAEM,EAAiB,AAAC,IAEhB,EAAiB,OAAO,EAAE,CAC1B,EAAS,aAAa,CAAC,EAAiB,OAAO,EAC/C,EAAiB,OAAO,CAAG,MAI/B,IAAM,EAAU,EAAS,OAAO,CAAC,CAAC,eAAe,EAAE,EAAA,CAAQ,EAC3D,EAAmB,gBAEnB,EAEK,EAAE,CAAC,EADJ,iBACwB,CAAE,MAAO,SAAU,OAAQ,KADN,IACgB,MAAO,iBAAkB,OAAQ,CAAC,WAAW,EAAE,EAAA,CAAQ,AAAC,EAAG,MAAO,IAE3H,GAAI,EAAQ,GAAG,CAAC,SAAS,GAAK,GAAM,IAEhC,AAFoC,EAErB,OAAO,EAA8C,WAA1C,EAAe,OAAO,CAAC,cAAc,CAAe,CAC9E,QAAQ,GAAG,CAAC,mDAGZ,IAAM,EAAK,EAAe,OAAO,CAC3B,EAAY,IAAI,gBAAgB,EAAQ,GAAG,CAAC,SAAS,EAE3D,GAAI,EAAG,iBAAiB,EAA0B,AAAtB,oBAA0C,GAAvC,cAAc,CACzC,GAAI,CACA,MAAM,EAAG,eAAe,CAAC,GACzB,QAAQ,GAAG,CAAC,mCAChB,CAAE,MAAO,EAAQ,CACb,QAAQ,KAAK,CAAC,+BAAgC,IAE1C,EAAE,OAAO,EAAE,SAAS,uBAAoC,sBAAX,EAAE,IAAI,AAAK,GAAqB,CAC7E,QAAQ,GAAG,CAAC,0EACZ,EAAqB,OAAO,CAAC,IAAI,CAAC,EAAQ,GAAG,CAAC,SAAS,EAE/D,MAEA,QAAQ,GAAG,CAAC,iEACZ,EAAqB,OAAO,CAAC,IAAI,CAAC,EAAQ,GAAG,CAAC,SAAS,CAE/D,CACJ,EACA,CACC,EAAE,CAAC,mBAAoB,CAAE,MAAO,SAAU,CADH,MACW,SAAU,MAAO,QAAS,OAAQ,CAAC,MAAM,EAAE,EAAA,CAAQ,AAAC,EAAG,MAAO,IAC7G,GAAI,EAAQ,GAAG,CAAC,MAAM,EAAI,CAAC,EAAe,OAAO,EAAE,yBAA0B,CACzE,QAAQ,GAAG,CAAC,gCACZ,IAAM,EAAS,EAAQ,GAAG,CAAC,MAAM,AACjC,OAAM,EAAe,OAAO,EAAE,qBAAqB,IAAI,sBAAsB,IAG7E,MAAM,GACV,CAE2B,SAAS,CAAhC,EAAQ,GAAG,CAAC,MAAM,EAClB,GAER,GACC,SAAS,CAAC,AAAC,IACR,QAAQ,GAAG,CAAC,4BAA6B,GACzC,EAAmB,EACvB,GAEJ,EAAiB,OAAO,CAAG,CAC/B,EAEM,EAAe,MAAO,EAAoB,KAC5C,GAAI,CAAC,EAAM,OAGX,GAAM,CAAE,KAAM,CAAK,CAAE,CAAG,MAAM,EACzB,IAAI,CAAC,qBACL,MAAM,CAAC,WACP,EAAE,CAAC,UAAW,EAAK,EAAE,EAEtB,EAAwB,KAE5B,GAAI,GAAS,EAAM,MAAM,CAAG,EAAG,CAC3B,IAAM,EAAY,EAAM,GAAG,CAAC,GAAK,EAAE,OAAO,EACpC,CAAE,KAAM,CAAW,CAAE,CAAG,MAAM,EAC/B,IAAI,CAAC,qBACL,MAAM,CAAC,WACP,EAAE,CAAC,UAAW,GACd,EAAE,CAAC,UAAW,GAEnB,GAAI,GAAe,EAAY,MAAM,CAAG,EAAG,CAEvC,GAAM,CAAE,KAAM,CAAM,CAAE,CAAG,MAAM,EAC1B,IAAI,CAAC,SACL,MAAM,CAAC,MACP,EAAE,CAAC,YAAY,GACf,EAAE,CAAC,KAAM,EAAY,GAAG,CAAC,GAAK,EAAE,OAAO,GACvC,WAAW,GAEZ,GAAQ,GAAS,EAAO,EAAA,AAAE,CAClC,CACJ,CAEA,GAAI,CAAC,EAAQ,CACT,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC3B,IAAI,CAAC,SACL,MAAM,CAAC,CAAE,SAAU,GAAO,WAAY,IAAI,OAAO,WAAW,EAAG,GAC/D,MAAM,GACN,MAAM,GAEP,IACA,EAAS,EAAQ,CADR,CACU,CACnB,MAAM,EAAS,IAAI,CAAC,qBAAqB,MAAM,CAAC,CAC5C,CAAE,QAAS,EAAQ,QAAS,EAAK,EAAE,AAAC,EACpC,CAAE,QAAS,EAAQ,QAAS,CAAW,EAC1C,EAET,CAEI,GACA,KADQ,CACF,EAAU,EAAiB,UAAT,EAEhC,EAEA,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,EAAY,QAAQ,CAAA,CAAC,MAAO,CACzB,SAAU,CAAC,CAAC,EACZ,eAAgB,CAAC,CAAC,EAClB,YAAa,GAAe,YAC5B,aACA,UACA,cACA,eACA,EACA,2BACA,kBACA,oBACA,cACA,UACA,eACA,CACJ,YACK,EAEA,GAAgB,CAAC,GACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4FACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sFACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yFACY,UAAtB,EAAa,IAAI,CAAe,KAAO,SAGhD,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,8BAAoB,YAAgC,UAAtB,EAAa,IAAI,CAAe,QAAU,QAAQ,cAC9F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,EAAY,UAAU,2GAAkG,WACzI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,EAAgB,MAAO,UAAU,uGAA8F,oBAMrK,GACG,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAY,OAAQ,EAAY,OAAO,CAAE,YAAa,EAAM,QAAS,MAItF","ignoreList":[0,1,2,5,6,7,8]}