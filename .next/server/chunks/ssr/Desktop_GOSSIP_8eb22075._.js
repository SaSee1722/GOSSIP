module.exports=[96496,34240,a=>{"use strict";let b=(0,a.i(70981).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96496);var c=a.i(99881),d=a.i(83749);function e({text:a,className:b,colors:e=["#00BFFF","#FFB6C1"]}){return(0,c.jsx)("span",{className:(0,d.cn)("bg-clip-text text-transparent",b),style:{backgroundImage:`linear-gradient(to right, ${e[0]}, ${e[1]})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:a})}a.s(["GradientText",()=>e],34240)},93205,a=>{"use strict";let b=(0,a.i(70981).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],93205)},88409,93311,a=>{"use strict";let b=(0,a.i(70981).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);a.s(["Camera",()=>b],88409);var c=a.i(42323);a.s(["ProfileService",0,{getProfile:async a=>await (0,c.safeSupabaseOperation)(async b=>{let{data:c,error:d}=await b.from("profiles").select("*").eq("id",a).single();return d?{data:null,error:d.message}:{data:c,error:null}}),updateProfile:async(a,b)=>await (0,c.safeSupabaseOperation)(async c=>{let{error:d}=await c.from("profiles").update(b).eq("id",a);return{error:d?.message||null}}),searchProfiles:async a=>await (0,c.safeSupabaseOperation)(async b=>{let{data:c,error:d}=await b.from("profiles").select("*").or(`username.ilike.%${a}%,full_name.ilike.%${a}%`).limit(20);return d?{data:[],error:d.message}:{data:c,error:null}}),uploadAvatar:async(a,b)=>await (0,c.safeSupabaseOperation)(async c=>{try{console.log("[ProfileService] Starting upload for file:",b.name);let d=b.name.split(".").pop()||"jpg",e=`${a}_${Date.now()}.${d}`,f=`avatars/${e}`,{error:g}=await c.storage.from("gossip-avatars").upload(f,b,{contentType:b.type,upsert:!1});if(g)throw console.error("[ProfileService] Upload error:",g),g;let{data:h}=c.storage.from("gossip-avatars").getPublicUrl(f);return console.log("[ProfileService] Upload successful, URL:",h.publicUrl),{data:h.publicUrl,error:null}}catch(a){return console.error("[ProfileService] Upload failed:",a),{data:null,error:a.message}}}),updatePushToken:async(a,b)=>await (0,c.safeSupabaseOperation)(async c=>{let{error:d}=await c.from("profiles").update({push_token:b}).eq("id",a);return d&&console.error("[ProfileService] Update Token Error:",d),{error:d?.message||null}})}],93311)},14476,a=>{"use strict";var b=a.i(99881),c=a.i(78540),d=a.i(22536),e=a.i(93205),f=a.i(96496),g=a.i(88409),h=a.i(14359),i=a.i(52053),j=a.i(34240),k=a.i(57120),l=a.i(93311),m=a.i(54720);function n(){let{statuses:a,loading:n,uploadStatus:o,refreshStatuses:p}=(0,c.useStatus)(),{user:q}=(0,d.useAuth)(),{addToast:r}=(0,m.useToast)(),[s,t]=(0,k.useState)(null),[u,v]=(0,k.useState)(0),[w,x]=(0,k.useState)(0),[y,z]=(0,k.useState)(!1),A=(0,k.useRef)(null),B=Object.values(a.reduce((a,b)=>{let c=b.user_id;return a[c]||(a[c]={user:b.profiles,items:[]}),a[c].items.push(b),a},{}));(0,k.useEffect)(()=>{let a;return s&&(x(0),a=setInterval(()=>{x(a=>{if(a>=100)if(u<s.items.length-1)return v(u+1),0;else return t(null),0;return a+1})},50)),()=>clearInterval(a)},[s,u]);let C=async a=>{let b=a.target.files?.[0];if(b){z(!0);try{if(!q)throw Error("Not authenticated");let{data:a,error:c}=await l.ProfileService.uploadAvatar(q.id,b);if(c)throw Error(c);a&&(await o(a,""),r("Whisper posted!","success"),p())}catch(a){r(a.message||"Failed to post whisper","error")}finally{z(!1)}}},D=a=>{switch(a?.toLowerCase()){case"male":return"#00BFFF";case"female":return"#FFB6C1";case"other":return"#FFD700";default:return"#FFF"}};return(0,b.jsxs)("div",{className:"flex-1 flex flex-col bg-black h-full relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-secondary/10 rounded-full blur-[150px] pointer-events-none"}),(0,b.jsxs)("header",{className:"p-8 pb-4 flex items-center justify-between relative z-10",children:[(0,b.jsx)("div",{className:"flex items-center gap-6",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(j.GradientText,{text:"Whispers",className:"text-5xl font-black italic uppercase tracking-tighter"}),(0,b.jsx)("div",{className:"w-16 h-16 relative",children:(0,b.jsx)("img",{src:"/gossip_illustration.png",alt:"Whispers",className:"w-full h-full object-contain opacity-80"})})]}),(0,b.jsx)("p",{className:"text-white/30 text-xs font-bold uppercase tracking-[0.2em] mt-1",children:"Disappearing stories of your circle."})]})}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:()=>A.current?.click(),disabled:y,className:"p-5 bg-white/5 border border-white/10 rounded-[24px] hover:bg-white/10 transition-all text-white disabled:opacity-50",children:y?(0,b.jsx)(f.Loader2,{className:"w-8 h-8 animate-spin"}):(0,b.jsx)(g.Camera,{className:"w-8 h-8"})}),(0,b.jsx)("input",{type:"file",ref:A,className:"hidden",accept:"image/*",onChange:C})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8 pt-4 relative z-10",children:n&&!y?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(f.Loader2,{className:"w-10 h-10 animate-spin text-secondary"})}):(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[(0,b.jsxs)("div",{onClick:()=>A.current?.click(),className:"aspect-[3/4] rounded-[40px] bg-white/5 border border-dashed border-white/20 flex flex-col items-center justify-center gap-4 hover:border-secondary transition-all cursor-pointer group active:scale-95",children:[(0,b.jsx)("div",{className:"w-20 h-20 rounded-[30px] bg-secondary/20 flex items-center justify-center text-secondary group-hover:scale-110 transition-all",children:(0,b.jsx)(e.Plus,{className:"w-10 h-10"})}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-white/30 group-hover:text-secondary transition-colors",children:"Post Whisper"})]}),B.map(a=>(0,b.jsxs)("div",{onClick:()=>{t(a),v(0),x(0)},className:"aspect-[3/4] rounded-[40px] relative overflow-hidden border border-white/10 hover:border-secondary transition-all cursor-pointer group",children:[(0,b.jsx)("img",{src:a.items[0].media_url,alt:"",className:"absolute inset-0 w-full h-full object-cover group-hover:scale-110 duration-700 transition-all"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"}),(0,b.jsx)("div",{className:"absolute top-6 left-6 right-6 flex gap-2",children:a.items.map((a,c)=>(0,b.jsx)("div",{className:"h-1 flex-1 bg-white/30 rounded-full overflow-hidden",children:0===c&&(0,b.jsx)("div",{className:"h-full bg-secondary w-full"})},c))}),(0,b.jsxs)("div",{className:"absolute bottom-6 left-6 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"relative p-1 rounded-full border-2 border-secondary bg-black ring-4 ring-black",children:(0,b.jsx)(i.Avatar,{src:a.user.avatar_url,fallback:a.user.username?.[0]||"?",className:"w-10 h-10"})}),(0,b.jsxs)("div",{className:"overflow-hidden",children:[(0,b.jsx)("p",{className:"text-[14px] font-black uppercase text-white tracking-tight truncate italic",style:{color:D(a.user.gender)},children:a.user.username}),(0,b.jsx)("p",{className:"text-[9px] font-bold text-white/50 uppercase tracking-widest",children:new Date(a.items[0].created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})]},a.user.id))]})}),s&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black z-[100] flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"relative w-full max-w-lg aspect-[9/16] rounded-[40px] overflow-hidden bg-white/5 shadow-2xl animate-in zoom-in duration-300",children:[(0,b.jsx)("img",{src:s.items[u].media_url,alt:"",className:"absolute inset-0 w-full h-full object-contain md:object-cover"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/60 pointer-events-none"}),(0,b.jsx)("div",{className:"absolute top-8 left-8 right-8 flex gap-2 z-20",children:s.items.map((a,c)=>(0,b.jsxs)("div",{className:"h-1 flex-1 bg-white/20 rounded-full overflow-hidden",children:[c<u&&(0,b.jsx)("div",{className:"h-full bg-white w-full"}),c===u&&(0,b.jsx)("div",{className:"h-full bg-white transition-all duration-50",style:{width:`${w}%`}})]},c))}),(0,b.jsxs)("div",{className:"absolute top-14 left-8 right-8 flex items-center justify-between z-20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(i.Avatar,{src:s.user.avatar_url,fallback:s.user.username[0],className:"w-12 h-12 ring-2 ring-white/50"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white font-black italic uppercase tracking-tight",style:{color:D(s.user.gender)},children:s.user.username}),(0,b.jsx)("p",{className:"text-white/50 text-[10px] uppercase font-bold tracking-widest",children:new Date(s.items[u].created_at).toLocaleTimeString()})]})]}),(0,b.jsx)("button",{onClick:()=>t(null),className:"p-3 bg-black/20 hover:bg-black/40 rounded-full backdrop-blur-xl border border-white/10 text-white transition-all",children:(0,b.jsx)(h.X,{className:"w-6 h-6"})})]}),s.items[u].caption&&(0,b.jsx)("div",{className:"absolute bottom-16 left-8 right-8 z-20 text-center",children:(0,b.jsx)("p",{className:"text-white text-lg font-bold drop-shadow-lg",children:s.items[u].caption})}),(0,b.jsxs)("div",{className:"absolute inset-x-0 top-32 bottom-32 flex z-10",children:[(0,b.jsx)("div",{className:"flex-1 hover:bg-white/5 transition-all cursor-pointer",onClick:()=>{u>0&&(v(u-1),x(0))}}),(0,b.jsx)("div",{className:"flex-1 hover:bg-white/5 transition-all cursor-pointer",onClick:()=>{u<s.items.length-1?(v(u+1),x(0)):t(null)}})]})]})})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=Desktop_GOSSIP_8eb22075._.js.map